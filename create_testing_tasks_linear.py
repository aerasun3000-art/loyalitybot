#!/usr/bin/env python3
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Linear —á–µ—Ä–µ–∑ API
–°–æ–∑–¥–∞–µ—Ç –∑–∞–¥–∞—á–∏ –∏–∑ TESTING_LINEAR_TASKS.md
"""

import os
import time
from linear_task_creator import create_linear_task, get_teams
from dotenv import load_dotenv

load_dotenv()

# –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã Linear: 1=Urgent, 2=High, 3=Medium, 4=Low
PRIORITY_MAP = {
    "P0": 1,  # Urgent (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ)
    "P1": 2,  # High (–≤–∞–∂–Ω—ã–µ)
    "P2": 3,  # Medium (–æ–±—ã—á–Ω—ã–µ)
}

# –¢–µ—Å—Ç-–∫–µ–π—Å—ã —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏
TEST_CASES = [
    # –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (P0)
    {
        "id": "TC-004",
        "title": "TC-004: Influencer —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥",
        "description": """**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ "Influencer" –ø–æ–ª–µ "–ö–æ–º–ø–∞–Ω–∏—è" —Å–∫—Ä—ã—Ç–æ, —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** 
- `category_group = 'influencer'` –≤ –ë–î
- –§–æ—Ä–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- –ü–æ–ª–µ "–ö–æ–º–ø–∞–Ω–∏—è" —Å–∫—Ä—ã—Ç–æ

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–∞—Ä—Ç–Ω—ë—Ä–∞
2. –í—ã–±—Ä–∞—Ç—å "–¢–∏–ø –±–∏–∑–Ω–µ—Å–∞" ‚Üí ü§≥ Influencer
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–ª–µ "–ö–æ–º–ø–∞–Ω–∏—è" —Å–∫—Ä—ã—Ç–æ
4. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
5. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ë–î `partner_applications`""",
        "priority": PRIORITY_MAP["P0"]
    },
    {
        "id": "TC-013",
        "title": "TC-013: Influencer —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞",
        "description": """**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –±–ª–æ–≥–µ—Ä–∞ —á–µ—Ä–µ–∑ `/start` ‚Üí "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è". –ë–æ—Ç –ù–ï –¥–æ–ª–∂–µ–Ω —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å –∞–¥—Ä–µ—Å/–≥–æ—Ä–æ–¥.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** 
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±—ã—Å—Ç—Ä–∞—è
- –í –ë–î `category_group = 'influencer'`
- –ë–æ—Ç –ù–ï —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∞–¥—Ä–µ—Å/–≥–æ—Ä–æ–¥

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–π –±–æ—Ç —Å –Ω–æ–≤–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/start`
3. –ù–∞–∂–∞—Ç—å "üöÄ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è"
4. –í—ã–±—Ä–∞—Ç—å —Ç–∏–ø: ü§≥ Influencer
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –±–æ—Ç –ù–ï —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∞–¥—Ä–µ—Å/–≥–æ—Ä–æ–¥
6. –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ë–î `partners`""",
        "priority": PRIORITY_MAP["P0"]
    },
    {
        "id": "TC-015",
        "title": "TC-015: –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é –¥–ª—è Influencer",
        "description": """**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í–æ–π—Ç–∏ –≤ –±–æ—Ç–∞ –∫–∞–∫ Influencer, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** 
- –ù–ï–¢ –∫–Ω–æ–ø–æ–∫ "–û–ø–µ—Ä–∞—Ü–∏–∏" –∏ "–ö–æ–Ω—Ç–µ–Ω—Ç"
- –ï–°–¢–¨ "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞" –∏ "Revenue Share"

**–®–∞–≥–∏:**
1. –í–æ–π—Ç–∏ –≤ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–π –±–æ—Ç –∫–∞–∫ Influencer-–ø–∞—Ä—Ç–Ω—ë—Ä
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/start`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
4. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ù–ï–¢ "üí∞ –û–ø–µ—Ä–∞—Ü–∏–∏" –∏ "üìù –ö–æ–Ω—Ç–µ–Ω—Ç"
5. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ï–°–¢–¨ "üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞", "üíé Revenue Share", "üë• –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞", "‚öôÔ∏è –ï—â—ë" """,
        "priority": PRIORITY_MAP["P0"]
    },
    
    # –í–∞–∂–Ω—ã–µ (P1)
    {
        "id": "TC-005",
        "title": "TC-005: –ì–æ—Ä–æ–¥ Nha Trang –≤ —Å–ø–∏—Å–∫–µ",
        "description": """**–í–∞–∂–Ω—ã–π —Ç–µ—Å—Ç**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤ —Ñ–æ—Ä–º–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –µ—Å—Ç—å –≥–æ—Ä–æ–¥ "Nha Trang".

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** 
- –ì–æ—Ä–æ–¥ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Å–ø–∏—Å–∫–µ
- –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –Ω–∏–º

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
2. –í—ã–±—Ä–∞—Ç—å "–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã" ‚Üí Offline
3. –û—Ç–∫—Ä—ã—Ç—å —Å–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ "Nha Trang"
5. –í—ã–±—Ä–∞—Ç—å "Nha Trang"
6. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ë–î `city = 'Nha Trang'`""",
        "priority": PRIORITY_MAP["P1"]
    },
    {
        "id": "TC-006",
        "title": "TC-006: –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã Offline ‚Üí –≥–æ—Ä–æ–¥ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω",
        "description": """**–í–∞–∂–Ω—ã–π —Ç–µ—Å—Ç**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í—ã–±—Ä–∞—Ç—å "Offline", –æ—Å—Ç–∞–≤–∏—Ç—å –≥–æ—Ä–æ–¥ –ø—É—Å—Ç—ã–º, –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** 
- –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ "–ì–æ—Ä–æ–¥ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω"

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
2. –í—ã–±—Ä–∞—Ç—å "–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã" ‚Üí üìç Offline
3. –û—Å—Ç–∞–≤–∏—Ç—å –ø–æ–ª–µ "–ì–æ—Ä–æ–¥" –ø—É—Å—Ç—ã–º
4. –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
6. –í—ã–±—Ä–∞—Ç—å –≥–æ—Ä–æ–¥ –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–Ω–æ–≤–∞""",
        "priority": PRIORITY_MAP["P1"]
    },
    {
        "id": "TC-007",
        "title": "TC-007: –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã Online ‚Üí –≥–æ—Ä–æ–¥ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω",
        "description": """**–í–∞–∂–Ω—ã–π —Ç–µ—Å—Ç**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í—ã–±—Ä–∞—Ç—å "Online", –æ—Å—Ç–∞–≤–∏—Ç—å –≥–æ—Ä–æ–¥ –ø—É—Å—Ç—ã–º, –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** 
- –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- –í –ë–î `work_mode = 'online'`

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
2. –í—ã–±—Ä–∞—Ç—å "–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã" ‚Üí üåç Online
3. –û—Å—Ç–∞–≤–∏—Ç—å –ø–æ–ª–µ "–ì–æ—Ä–æ–¥" –ø—É—Å—Ç—ã–º
4. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
5. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ë–î `work_mode = 'online'`""",
        "priority": PRIORITY_MAP["P1"]
    },
    {
        "id": "TC-009",
        "title": "TC-009: –ü—Ä–æ—Ü–µ–Ω—Ç –∫–æ–º–∏—Å—Å–∏–∏ ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è",
        "description": """**–í–∞–∂–Ω—ã–π —Ç–µ—Å—Ç**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–≤–æ–¥ –ø—Ä–æ—Ü–µ–Ω—Ç–∞: 10, 5.5, 0, 100 ‚Äî –≤—Å–µ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** 
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
2. –í –ø–æ–ª–µ "–ü—Ä–æ—Ü–µ–Ω—Ç –∫–æ–º–∏—Å—Å–∏–∏" –≤–≤–µ—Å—Ç–∏: 10 ‚Üí –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
3. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Å: 5.5, 0, 100, 15.25
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è
5. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å: -1, 150, abc
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ—è–≤–ª—è—é—Ç—Å—è –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏""",
        "priority": PRIORITY_MAP["P1"]
    },
    {
        "id": "TC-016",
        "title": "TC-016: –ü–æ–ª–Ω–∞—è –∑–∞—è–≤–∫–∞ —á–µ—Ä–µ–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥",
        "description": """**–í–∞–∂–Ω—ã–π —Ç–µ—Å—Ç**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É (Food, Hybrid, Nha Trang, 15%), –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–î.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** 
- –í—Å–µ –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ `partner_applications`

**–®–∞–≥–∏:**
1. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É:
   - –¢–∏–ø: Food
   - –ö–æ–º–ø–∞–Ω–∏—è: "Caf√© Luna"
   - –†–µ–∂–∏–º: Hybrid
   - –ì–æ—Ä–æ–¥: Nha Trang
   - –ö–æ–º–∏—Å—Å–∏—è: 15%
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ë–î `partner_applications`:
   - `category_group = 'food'`
   - `work_mode = 'hybrid'`
   - `city = 'Nha Trang'`
   - `default_referral_commission_percent = 15.0`""",
        "priority": PRIORITY_MAP["P1"]
    },
    
    # –û–±—ã—á–Ω—ã–µ (P2)
    {
        "id": "TC-001",
        "title": "TC-001: Beauty —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è",
        "description": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –ø–∞—Ä—Ç–Ω—ë—Ä–∞ —Ç–∏–ø–∞ Beauty —á–µ—Ä–µ–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `category_group = 'beauty'` –≤ –ë–î, —Ñ–æ—Ä–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç.",
        "priority": PRIORITY_MAP["P2"]
    },
    {
        "id": "TC-002",
        "title": "TC-002: Food —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è",
        "description": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –ø–∞—Ä—Ç–Ω—ë—Ä–∞ —Ç–∏–ø–∞ Food —á–µ—Ä–µ–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `category_group = 'food'` –≤ –ë–î.",
        "priority": PRIORITY_MAP["P2"]
    },
    {
        "id": "TC-003",
        "title": "TC-003: Retail —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è",
        "description": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –ø–∞—Ä—Ç–Ω—ë—Ä–∞ —Ç–∏–ø–∞ Retail —á–µ—Ä–µ–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `category_group = 'retail'` –≤ –ë–î.",
        "priority": PRIORITY_MAP["P2"]
    },
    {
        "id": "TC-008",
        "title": "TC-008: Hybrid —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã",
        "description": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é —Å —Ä–µ–∂–∏–º–æ–º —Ä–∞–±–æ—Ç—ã Hybrid. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `work_mode = 'hybrid'` –≤ –ë–î.",
        "priority": PRIORITY_MAP["P2"]
    },
    {
        "id": "TC-010",
        "title": "TC-010: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–æ—Ü–µ–Ω—Ç–∞",
        "description": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏ —Å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ (-1, 150, —Ç–µ–∫—Å—Ç). –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏.",
        "priority": PRIORITY_MAP["P2"]
    },
    {
        "id": "TC-011",
        "title": "TC-011: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –≤ –ë–î",
        "description": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–æ—Ü–µ–Ω—Ç –∫–æ–º–∏—Å—Å–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `default_referral_commission_percent` —Å–æ—Ö—Ä–∞–Ω—ë–Ω –∫–∞–∫ NUMERIC.",
        "priority": PRIORITY_MAP["P2"]
    },
    {
        "id": "TC-012",
        "title": "TC-012: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Beauty —á–µ—Ä–µ–∑ –±–æ—Ç–∞",
        "description": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é Beauty-–ø–∞—Ä—Ç–Ω—ë—Ä–∞ —á–µ—Ä–µ–∑ –±–æ—Ç–∞. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –∑–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞ –≤ `partners` —Å `category_group = 'beauty'`.",
        "priority": PRIORITY_MAP["P2"]
    },
    {
        "id": "TC-014",
        "title": "TC-014: –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é Beauty –ø–∞—Ä—Ç–Ω—ë—Ä–∞",
        "description": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –¥–ª—è Beauty-–ø–∞—Ä—Ç–Ω—ë—Ä–∞. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –≤—Å–µ –∫–Ω–æ–ø–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è (–û–ø–µ—Ä–∞—Ü–∏–∏, –ö–æ–Ω—Ç–µ–Ω—Ç, –ê–Ω–∞–ª–∏—Ç–∏–∫–∞, Revenue Share).",
        "priority": PRIORITY_MAP["P2"]
    },
    {
        "id": "TC-017",
        "title": "TC-017: Influencer –∑–∞—è–≤–∫–∞ —á–µ—Ä–µ–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥",
        "description": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ Influencer —á–µ—Ä–µ–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –∑–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞ –≤ `partner_applications` —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –ø–æ–ª—è–º–∏.",
        "priority": PRIORITY_MAP["P2"]
    },
    {
        "id": "TC-018",
        "title": "TC-018: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞ ‚Üí –ë–î",
        "description": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –∑–∞–ø–∏—Å—å –≤ `partners` —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –ø–æ–ª—è–º–∏.",
        "priority": PRIORITY_MAP["P2"]
    },
    {
        "id": "TC-019",
        "title": "TC-019: –†–µ–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π ‚Äî –ö–∞—Ñ–µ –ù—è—á–∞–Ω–≥",
        "description": "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ñ–µ –≤ –ù—è—á–∞–Ω–≥–µ —á–µ—Ä–µ–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥, –æ–¥–æ–±—Ä–∏—Ç—å –∑–∞—è–≤–∫—É, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –ø–∞—Ä—Ç–Ω—ë—Ä –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ –≤ –±–æ—Ç–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É.",
        "priority": PRIORITY_MAP["P2"]
    },
    {
        "id": "TC-020",
        "title": "TC-020: –†–µ–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π ‚Äî –ë–ª–æ–≥–µ—Ä",
        "description": "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –±–ª–æ–≥–µ—Ä–∞, –æ–¥–æ–±—Ä–∏—Ç—å –∑–∞—è–≤–∫—É, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Ä–µ–∑–∞–Ω–Ω–æ–µ –º–µ–Ω—é. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –º–µ–Ω—é –±–µ–∑ –û–ø–µ—Ä–∞—Ü–∏–π –∏ –ö–æ–Ω—Ç–µ–Ω—Ç–∞.",
        "priority": PRIORITY_MAP["P2"]
    },
    {
        "id": "TC-021",
        "title": "TC-021: –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å –∫–æ–º–∏—Å—Å–∏–µ–π (Future)",
        "description": "–ü—Ä–æ–≤–µ—Å—Ç–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `default_referral_commission_percent`. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç –¥–ª—è Revenue Share (—Ç—Ä–µ–±—É–µ—Ç –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏).",
        "priority": PRIORITY_MAP["P2"]
    },
    {
        "id": "TC-022",
        "title": "TC-022: –û—à–∏–±–∫–∞ –±–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏",
        "description": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–∫–∏ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ SQL –º–∏–≥—Ä–∞—Ü–∏–∏. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –ø–æ–Ω—è—Ç–Ω–∞—è –æ—à–∏–±–∫–∞, –Ω–µ 500 Internal Server Error.",
        "priority": PRIORITY_MAP["P2"]
    },
    {
        "id": "TC-023",
        "title": "TC-023: –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏",
        "description": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –æ—à–∏–±–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ä—è–¥–æ–º —Å –ø–æ–ª—è–º–∏, —Ñ–æ—Ä–º–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è.",
        "priority": PRIORITY_MAP["P2"]
    },
]

# Pre-flight checks
PREFLIGHT_CHECKS = [
    {
        "id": "PREFLIGHT-001",
        "title": "Pre-flight: SQL –º–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞",
        "description": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è `ecosystem_migration.sql` –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –≤ Supabase Dashboard. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –ø–æ–ª—è `category_group`, `work_mode`, `default_referral_commission_percent` —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö `partners` –∏ `partner_applications`.",
        "priority": PRIORITY_MAP["P0"]
    },
    {
        "id": "PREFLIGHT-002",
        "title": "Pre-flight: –ü–æ–ª—è –≤ –ë–î —Å–æ–∑–¥–∞–Ω—ã",
        "description": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –ø–æ–ª–µ–π –≤ –ë–î: `category_group`, `work_mode`, `default_referral_commission_percent` –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö `partners` –∏ `partner_applications`.",
        "priority": PRIORITY_MAP["P0"]
    },
    {
        "id": "PREFLIGHT-003",
        "title": "Pre-flight: –ë–æ—Ç—ã –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω—ã",
        "description": "–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–π –±–æ—Ç (`bot.py`) –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π.",
        "priority": PRIORITY_MAP["P0"]
    },
    {
        "id": "PREFLIGHT-004",
        "title": "Pre-flight: –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∑–∞–¥–µ–ø–ª–æ–µ–Ω",
        "description": "–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω –∏ –∑–∞–¥–µ–ø–ª–æ–µ–Ω —Å –Ω–æ–≤—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏.",
        "priority": PRIORITY_MAP["P0"]
    },
    {
        "id": "PREFLIGHT-005",
        "title": "Pre-flight: Nha Trang –¥–æ–±–∞–≤–ª–µ–Ω –≤ locations.js",
        "description": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≥–æ—Ä–æ–¥ Nha Trang –¥–æ–±–∞–≤–ª–µ–Ω –≤ `frontend/src/utils/locations.js` –≤ —Å–ø–∏—Å–æ–∫ `PARTNER_CITIES`.",
        "priority": PRIORITY_MAP["P0"]
    },
]


def create_testing_tasks(team_key: str = None, project_id: str = None):
    """
    –°–æ–∑–¥–∞—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Linear
    
    Args:
        team_key: –ö–ª—é—á –∫–æ–º–∞–Ω–¥—ã –≤ Linear (–Ω–∞–ø—Ä–∏–º–µ—Ä, "ENG", "QA")
        project_id: ID –ø—Ä–æ–µ–∫—Ç–∞ –≤ Linear (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    """
    print("üöÄ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Linear...\n")
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–∞
    if not os.getenv("LINEAR_API_KEY"):
        print("‚ùå –û—à–∏–±–∫–∞: LINEAR_API_KEY –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è")
        print("   –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á –≤ .env —Ñ–∞–π–ª: LINEAR_API_KEY=your_key_here")
        return
    
    # –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
    teams_result = get_teams()
    if teams_result["success"]:
        print("üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:")
        for team in teams_result["teams"]:
            print(f"   - {team['key']}: {team['name']} (ID: {team['id']})")
        print()
    
    # –°–æ–∑–¥–∞—ë–º Pre-flight checks
    print("üìù –°–æ–∑–¥–∞–Ω–∏–µ Pre-flight Checks...")
    preflight_results = []
    for check in PREFLIGHT_CHECKS:
        result = create_linear_task(
            title=check["title"],
            description=check["description"],
            team_key=team_key,
            priority=check["priority"],
            project_id=project_id
        )
        preflight_results.append((check["id"], result))
        if result["success"]:
            print(f"   ‚úÖ {check['id']}: {result['identifier']} - {check['title']}")
        else:
            print(f"   ‚ùå {check['id']}: –û—à–∏–±–∫–∞ - {result.get('error', 'Unknown error')}")
        time.sleep(0.5)  # –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
    
    print()
    
    # –°–æ–∑–¥–∞—ë–º —Ç–µ—Å—Ç-–∫–µ–π—Å—ã
    print("üìù –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç-–∫–µ–π—Å–æ–≤...")
    test_results = []
    
    # –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –≤—ã–≤–æ–¥–∞
    by_priority = {"P0": [], "P1": [], "P2": []}
    for test in TEST_CASES:
        if test["priority"] == 1:
            by_priority["P0"].append(test)
        elif test["priority"] == 2:
            by_priority["P1"].append(test)
        else:
            by_priority["P2"].append(test)
    
    for priority_label, tests in [("P0 (–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ)", by_priority["P0"]),
                                   ("P1 (–í–∞–∂–Ω—ã–µ)", by_priority["P1"]),
                                   ("P2 (–û–±—ã—á–Ω—ã–µ)", by_priority["P2"])]:
        print(f"\n   {priority_label}:")
        for test in tests:
            result = create_linear_task(
                title=test["title"],
                description=test["description"],
                team_key=team_key,
                priority=test["priority"],
                project_id=project_id
            )
            test_results.append((test["id"], result))
            if result["success"]:
                print(f"      ‚úÖ {test['id']}: {result['identifier']} - {test['title']}")
            else:
                print(f"      ‚ùå {test['id']}: –û—à–∏–±–∫–∞ - {result.get('error', 'Unknown error')}")
            time.sleep(0.5)
    
    # –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    print("\n" + "="*60)
    print("üìä –ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê")
    print("="*60)
    
    preflight_success = sum(1 for _, r in preflight_results if r["success"])
    test_success = sum(1 for _, r in test_results if r["success"])
    
    print(f"\n‚úÖ Pre-flight Checks: {preflight_success}/{len(PREFLIGHT_CHECKS)} —Å–æ–∑–¥–∞–Ω–æ")
    print(f"‚úÖ –¢–µ—Å—Ç-–∫–µ–π—Å—ã: {test_success}/{len(TEST_CASES)} —Å–æ–∑–¥–∞–Ω–æ")
    print(f"‚úÖ –í—Å–µ–≥–æ: {preflight_success + test_success}/{len(PREFLIGHT_CHECKS) + len(TEST_CASES)}")
    
    if preflight_success + test_success < len(PREFLIGHT_CHECKS) + len(TEST_CASES):
        print("\n‚ö†Ô∏è  –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∑–∞–¥–∞—á–∏ –Ω–µ –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—à–∏–±–∫–∏ –≤—ã—à–µ.")
    
    print("\nüéâ –ì–æ—Ç–æ–≤–æ! –ó–∞–¥–∞—á–∏ —Å–æ–∑–¥–∞–Ω—ã –≤ Linear.")


if __name__ == "__main__":
    import sys
    
    # –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å team_key –∏ project_id —á–µ—Ä–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
    team_key = sys.argv[1] if len(sys.argv) > 1 else None
    project_id = sys.argv[2] if len(sys.argv) > 2 else None
    
    if team_key:
        print(f"üìå –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞: {team_key}")
    if project_id:
        print(f"üìå –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ–µ–∫—Ç: {project_id}")
    print()
    
    create_testing_tasks(team_key=team_key, project_id=project_id)
