# üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –£—Å–ª—É–≥–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –≤ –∞–¥–º–∏–Ω-–±–æ—Ç–µ

**–î–∞—Ç–∞:** 22 –æ–∫—Ç—è–±—Ä—è 2025  
**–ü—Ä–æ–±–ª–µ–º–∞:** –£—Å–ª—É–≥–∏, —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞–º–∏, –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é, –Ω–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –≤ –∞–¥–º–∏–Ω-–±–æ—Ç–µ  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

## üîç –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –°–∏–º–ø—Ç–æ–º—ã:
1. –ü–∞—Ä—Ç–Ω—ë—Ä —Å–æ–∑–¥–∞—ë—Ç —É—Å–ª—É–≥—É —á–µ—Ä–µ–∑ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–π –±–æ—Ç
2. –ü–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "‚úÖ –£—Å–ª—É–≥–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é!"
3. –ê–¥–º–∏–Ω –Ω–∞–∂–∏–º–∞–µ—Ç "‚ú® –ú–æ–¥–µ—Ä–∞—Ü–∏—è –£—Å–ª—É–≥" –≤ –∞–¥–º–∏–Ω-–±–æ—Ç–µ
4. –í–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "‚úÖ –ù–æ–≤—ã—Ö —É—Å–ª—É–≥ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –Ω–µ—Ç"

### –ü—Ä–∏—á–∏–Ω–∞:
–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É—Å–ª—É–≥–∏ **–Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–æ—Å—å –ø–æ–ª–µ `status: 'Pending'`**, –ø–æ—ç—Ç–æ–º—É:
- –£—Å–ª—É–≥–∞ —Å–æ—Ö—Ä–∞–Ω—è–ª–∞—Å—å –≤ –ë–î –±–µ–∑ —Å—Ç–∞—Ç—É—Å–∞ (–∏–ª–∏ —Å `NULL`)
- –ó–∞–ø—Ä–æ—Å `WHERE status = 'Pending'` –Ω–µ –Ω–∞—Ö–æ–¥–∏–ª —ç—Ç–∏ —É—Å–ª—É–≥–∏
- –ê–¥–º–∏–Ω-–±–æ—Ç –Ω–µ –º–æ–≥ –∏—Ö –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –º–æ–≥–ª–∞ –≤–æ–∑–Ω–∏–∫–∞—Ç—å –æ—à–∏–±–∫–∞ Foreign Key, –µ—Å–ª–∏ –ø–∞—Ä—Ç–Ω—ë—Ä –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª –≤ —Ç–∞–±–ª–∏—Ü–µ `partners`.

---

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. –ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–π –±–æ—Ç (`bot.py`)

**–°—Ç—Ä–æ–∫–∞ 485-488:**
```python
# –ë–´–õ–û:
TEMP_DATA[chat_id] = {'partner_chat_id': str(chat_id)}

# –°–¢–ê–õ–û:
TEMP_DATA[chat_id] = {
    'partner_chat_id': str(chat_id),
    'status': 'Pending'  # –Ø–≤–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–µ–ø–µ—Ä—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É—Å–ª—É–≥–∏ —Å—Ä–∞–∑—É –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å `Pending`.

---

### 2. –ú–µ–Ω–µ–¥–∂–µ—Ä –ë–î (`supabase_manager.py`)

**–ú–µ—Ç–æ–¥ `add_service()` (—Å—Ç—Ä–æ–∫–∏ 629-655):**

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**

1. **–ì–∞—Ä–∞–Ω—Ç–∏—è –Ω–∞–ª–∏—á–∏—è —Å—Ç–∞—Ç—É—Å–∞:**
```python
if 'status' not in service_data:
    service_data['status'] = 'Pending'
```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ Foreign Key:**
```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ partners
check = self.client.from_('partners').select('chat_id')
    .eq('chat_id', partner_chat_id).limit(1).execute()
if not check.data:
    # –°–æ–∑–¥–∞—ë–º –∑–∞–ø–∏—Å—å –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    self.ensure_partner_record(partner_chat_id)
```

3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```python
logging.info(f"Service '{service_data.get('title')}' added successfully for partner {partner_chat_id}")
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 
- –°—Ç–∞—Ç—É—Å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –¥–∞–∂–µ –µ—Å–ª–∏ –∑–∞–±—ã–ª–∏ –≤ bot.py
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –¥–ª—è —Å–æ–±–ª—é–¥–µ–Ω–∏—è FK
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

### 3. –ê–¥–º–∏–Ω-–±–æ—Ç (`admin_bot.py`)

**–î–æ–±–∞–≤–ª–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤—ã—Ö —É—Å–ª—É–≥–∞—Ö:**

#### –ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

1. **–ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è (—Å—Ç—Ä–æ–∫–∞ 50):**
```python
_notified_pending_service_ids: set[int] = set()
```

2. **–§—É–Ω–∫—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (—Å—Ç—Ä–æ–∫–∏ 216-239):**
```python
async def _notify_admins_about_service(service_row):
    """–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤—Å–µ–º –∞–¥–º–∏–Ω–∞–º –æ –Ω–æ–≤–æ–π —É—Å–ª—É–≥–µ."""
    # –°–æ–∑–¥–∞—ë—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏ "–û–¥–æ–±—Ä–∏—Ç—å"/"–û—Ç–∫–ª–æ–Ω–∏—Ç—å"
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º –∞–¥–º–∏–Ω–∞–º –∏–∑ ADMIN_CHAT_ID
```

3. **–§–æ–Ω–æ–≤—ã–π –≤–æ—á–µ—Ä (—Å—Ç—Ä–æ–∫–∏ 242-258):**
```python
async def watch_new_service_submissions(poll_interval_sec: int = 30):
    """–ö–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ë–î –Ω–∞ –Ω–æ–≤—ã–µ —É—Å–ª—É–≥–∏."""
    # –ó–∞–≥—Ä—É–∂–∞–µ—Ç —É—Å–ª—É–≥–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º Pending
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ç–µ—Ö, —á—Ç–æ –µ—â—ë –Ω–µ –±—ã–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã
```

4. **–ó–∞–ø—É—Å–∫ –≤–æ—á–µ—Ä–∞ (—Å—Ç—Ä–æ–∫–∞ 334):**
```python
asyncio.create_task(watch_new_service_submissions())
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 
- –ê–¥–º–∏–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —É—Å–ª—É–≥–∞—Ö (–º–∞–∫—Å–∏–º—É–º —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥)
- –ù–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –∑–∞—Ö–æ–¥–∏—Ç—å –≤ "–ú–æ–¥–µ—Ä–∞—Ü–∏—è –£—Å–ª—É–≥"

---

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç—ã:**
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã (Ctrl+C –≤ –∫–∞–∂–¥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)

# –¢–µ—Ä–º–∏–Ω–∞–ª 1:
python bot.py

# –¢–µ—Ä–º–∏–Ω–∞–ª 2:
python client_handler.py

# –¢–µ—Ä–º–∏–Ω–∞–ª 3:
python admin_bot.py
```

2. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞—Ä—Ç–Ω—ë—Ä –æ–¥–æ–±—Ä–µ–Ω (—Å—Ç–∞—Ç—É—Å `Approved`)**

---

### –¢–µ—Å—Ç 1: –°–æ–∑–¥–∞–Ω–∏–µ —É—Å–ª—É–≥–∏

**–®–∞–≥–∏:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–π –±–æ—Ç
2. –ù–∞–∂–º–∏—Ç–µ "üõ†Ô∏è –£—Å–ª—É–≥–∏"
3. –ù–∞–∂–º–∏—Ç–µ "‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —É—Å–ª—É–≥—É"
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:
   - –ù–∞–∑–≤–∞–Ω–∏–µ: `–¢–µ—Å—Ç–æ–≤–∞—è —É—Å–ª—É–≥–∞`
   - –û–ø–∏—Å–∞–Ω–∏–µ: `–û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π —É—Å–ª—É–≥–∏`
   - –°—Ç–æ–∏–º–æ—Å—Ç—å: `100`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –£—Å–ª—É–≥–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é!
–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç –≤–∞—à—É –∑–∞—è–≤–∫—É...
```

---

### –¢–µ—Å—Ç 2: –ê–≤—Ç–æ—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–º–∞–∫—Å–∏–º—É–º —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥):**

–ê–¥–º–∏–Ω –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ:
```
üÜï –ù–æ–≤–∞—è –£—Å–ª—É–≥–∞ –Ω–∞ –ú–æ–¥–µ—Ä–∞—Ü–∏–∏ (ID: 1)
ü§ù –ü–∞—Ä—Ç–Ω–µ—Ä ID: 123456
üíé –ù–∞–∑–≤–∞–Ω–∏–µ: –¢–µ—Å—Ç–æ–≤–∞—è —É—Å–ª—É–≥–∞
üíµ –°—Ç–æ–∏–º–æ—Å—Ç—å: 100 –±–∞–ª–ª–æ–≤
üìù –û–ø–∏—Å–∞–Ω–∏–µ: –û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π —É—Å–ª—É–≥–∏...

[üü¢ –û–¥–æ–±—Ä–∏—Ç—å] [üî¥ –û—Ç–∫–ª–æ–Ω–∏—Ç—å]
```

---

### –¢–µ—Å—Ç 3: –†—É—á–Ω–æ–π –ø—Ä–æ—Å–º–æ—Ç—Ä –≤ –∞–¥–º–∏–Ω-–±–æ—Ç–µ

**–®–∞–≥–∏:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–±–æ—Ç
2. –ù–∞–∂–º–∏—Ç–µ `/start`
3. –ù–∞–∂–º–∏—Ç–µ "‚ú® –ú–æ–¥–µ—Ä–∞—Ü–∏—è –£—Å–ª—É–≥"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
[–°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–π —É—Å–ª—É–≥–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º Pending]

‚è≥ –ó–∞–≥—Ä—É–∂–µ–Ω–æ 1 —É—Å–ª—É–≥ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é.
```

---

### –¢–µ—Å—Ç 4: –û–¥–æ–±—Ä–µ–Ω–∏–µ —É—Å–ª—É–≥–∏

**–®–∞–≥–∏:**

1. –í —Å–æ–æ–±—â–µ–Ω–∏–∏ –æ–± —É—Å–ª—É–≥–µ –Ω–∞–∂–º–∏—Ç–µ "üü¢ –û–¥–æ–±—Ä–∏—Ç—å"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
**–ù–æ–≤–∞—è –£—Å–ª—É–≥–∞ –Ω–∞ –ú–æ–¥–µ—Ä–∞—Ü–∏–∏ (ID: 1)**

**–°–¢–ê–¢–£–°: üü¢ –û–¥–æ–±—Ä–µ–Ω–∞**
```

---

### –¢–µ—Å—Ç 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º

**–®–∞–≥–∏:**

1. –í –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–æ–º –±–æ—Ç–µ –Ω–∞–∂–º–∏—Ç–µ "üõ†Ô∏è –£—Å–ª—É–≥–∏"
2. –ù–∞–∂–º–∏—Ç–µ "üîç –ú–æ–∏ —É—Å–ª—É–≥–∏ (—Å—Ç–∞—Ç—É—Å)"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üìã –í–∞—à–∏ —É—Å–ª—É–≥–∏:

‚úÖ –¢–µ—Å—Ç–æ–≤–∞—è —É—Å–ª—É–≥–∞
   üíé –°—Ç–æ–∏–º–æ—Å—Ç—å: 100 –±–∞–ª–ª–æ–≤ | –°—Ç–∞—Ç—É—Å: Approved
```

---

## üîß –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–π –±–æ—Ç (–ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É—Å–ª—É–≥–∏):
```
INFO - –ü–∞—Ä—Ç–Ω—ë—Ä 123456 —Å–æ–∑–¥–∞—ë—Ç —É—Å–ª—É–≥—É
```

### Supabase Manager (–ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏):
```
INFO - Service '–¢–µ—Å—Ç–æ–≤–∞—è —É—Å–ª—É–≥–∞' added successfully for partner 123456
```

–ò–ª–∏ (–µ—Å–ª–∏ –±—ã–ª–∞ –æ—à–∏–±–∫–∞ FK):
```
ERROR - add_service: partner 123456 not found in 'partners' table (FK)
INFO - Partner record created/updated for 123456
INFO - Service '–¢–µ—Å—Ç–æ–≤–∞—è —É—Å–ª—É–≥–∞' added successfully for partner 123456
```

### –ê–¥–º–∏–Ω-–±–æ—Ç (–∞–≤—Ç–æ—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ):
```
INFO - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–π —É—Å–ª—É–≥–µ 1 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∞–¥–º–∏–Ω—É 999888777
INFO - –ù–æ–≤–∞—è —É—Å–ª—É–≥–∞ 1 –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Å–ø–∏—Å–æ–∫ —É–≤–µ–¥–æ–º–ª—ë–Ω–Ω—ã—Ö
```

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ø—Ä—è–º—É—é –≤ Supabase:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—É—é —É—Å–ª—É–≥—É
SELECT id, partner_chat_id, title, price_points, status 
FROM services 
WHERE title = '–¢–µ—Å—Ç–æ–≤–∞—è —É—Å–ª—É–≥–∞';

-- –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
-- id | partner_chat_id | title            | price_points | status
-- 1  | 123456          | –¢–µ—Å—Ç–æ–≤–∞—è —É—Å–ª—É–≥–∞  | 100          | Pending

-- –ü–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è status –¥–æ–ª–∂–µ–Ω –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –Ω–∞ 'Approved'
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

- [x] –£—Å–ª—É–≥–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [x] –ê–¥–º–∏–Ω –ø–æ–ª—É—á–∞–µ—Ç –∞–≤—Ç–æ—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (–º–∞–∫—Å. 30 —Å–µ–∫)
- [x] –£—Å–ª—É–≥–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ "–ú–æ–¥–µ—Ä–∞—Ü–∏—è –£—Å–ª—É–≥"
- [x] –ö–Ω–æ–ø–∫–∏ "–û–¥–æ–±—Ä–∏—Ç—å"/"–û—Ç–∫–ª–æ–Ω–∏—Ç—å" —Ä–∞–±–æ—Ç–∞—é—Ç
- [x] –°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ –ë–î
- [x] –ü–∞—Ä—Ç–Ω—ë—Ä –≤–∏–¥–∏—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å

---

## üêõ –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: –ê–¥–º–∏–Ω –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –ê–¥–º–∏–Ω-–±–æ—Ç –∑–∞–ø—É—â–µ–Ω?
2. ADMIN_CHAT_ID –≤ .env –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π?
3. –õ–æ–≥–∏ –∞–¥–º–∏–Ω-–±–æ—Ç–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `watch_new_service_submissions`)

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∞–¥–º–∏–Ω-–±–æ—Ç
python admin_bot.py

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
tail -f logs/admin_bot.log
```

---

### –ü—Ä–æ–±–ª–µ–º–∞: –£—Å–ª—É–≥–∞ –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ë–î:**
```sql
SELECT * FROM services WHERE partner_chat_id = 'YOUR_CHAT_ID';
```

–ï—Å–ª–∏ `status` = `NULL`:
```sql
-- –ò—Å–ø—Ä–∞–≤—å—Ç–µ –≤—Ä—É—á–Ω—É—é
UPDATE services SET status = 'Pending' WHERE status IS NULL;
```

---

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ Foreign Key

**–õ–æ–≥:**
```
ERROR - add_service: partner 123456 not found in 'partners' table (FK)
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ:**
–ö–æ–¥ —Å–∞–º —Å–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å—å —á–µ—Ä–µ–∑ `ensure_partner_record()`.

**–†—É—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–µ—Å–ª–∏ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ):**
```sql
INSERT INTO partners (chat_id, name, company_name)
SELECT chat_id, name, company_name 
FROM partner_applications 
WHERE chat_id = '123456';
```

---

## üìù –ò—Ç–æ–≥–∏

### –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —è–≤–Ω—ã–π —Å—Ç–∞—Ç—É—Å `Pending` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É—Å–ª—É–≥–∏
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∞–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ (FK)
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∞–≤—Ç–æ—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∞–º –æ –Ω–æ–≤—ã—Ö —É—Å–ª—É–≥–∞—Ö
4. ‚úÖ –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–∫–∞–∫ —É –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤)
- –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫ FK
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏

**–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞! ‚úÖ**

---

**–í–µ—Ä—Å–∏—è:** 0.8.1  
**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 22.10.2025

