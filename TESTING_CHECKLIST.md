# ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã —Å–≤—è–∑–∏ –∞–∫—Ü–∏–π —Å —É—Å–ª—É–≥–∞–º–∏

## üìã –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### –®–∞–≥ 1: –í—ã–ø–æ–ª–Ω–∏—Ç—å SQL –º–∏–≥—Ä–∞—Ü–∏—é
- [ ] –û—Ç–∫—Ä—ã—Ç—å Supabase Dashboard ‚Üí SQL Editor
- [ ] –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ñ–∞–π–ª `add_promotion_services_relation.sql`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `promotion_services` —Å–æ–∑–¥–∞–Ω–∞:
  ```sql
  SELECT * FROM promotion_services LIMIT 1;
  ```
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–ª–µ `promotion_type` –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ `promotions`:
  ```sql
  SELECT column_name FROM information_schema.columns 
  WHERE table_name = 'promotions' AND column_name = 'promotion_type';
  ```

---

## üß™ –¢–µ—Å—Ç 1: –°–æ–∑–¥–∞–Ω–∏–µ –∞–∫—Ü–∏–∏ —Ç–∏–ø–∞ "–û–±–º–µ–Ω –±–∞–ª–ª–æ–≤"

### –ß–µ—Ä–µ–∑ –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–π –±–æ—Ç:

1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:**
   - [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —É –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –æ–¥–æ–±—Ä–µ–Ω–Ω–∞—è —É—Å–ª—É–≥–∞
   - [ ] –ï—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞—Ç—å —É—Å–ª—É–≥—É –∏ –ø–æ–ª—É—á–∏—Ç—å –æ–¥–æ–±—Ä–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–±–æ—Ç–∞

2. **–°–æ–∑–¥–∞–Ω–∏–µ –∞–∫—Ü–∏–∏:**
   - [ ] –û—Ç–∫—Ä—ã—Ç—å –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–π –±–æ—Ç –≤ Telegram
   - [ ] –í—ã–±—Ä–∞—Ç—å "üéÅ –ú–æ–∏ –∞–∫—Ü–∏–∏" ‚Üí "‚ûï –î–æ–±–∞–≤–∏—Ç—å –∞–∫—Ü–∏—é"
   - [ ] **–®–∞–≥ 1:** –í—ã–±—Ä–∞—Ç—å —Ç–∏–ø –∞–∫—Ü–∏–∏ ‚Üí "üí∏ –û–±–º–µ–Ω –±–∞–ª–ª–æ–≤ –Ω–∞ —É—Å–ª—É–≥–∏"
   - [ ] **–®–∞–≥ 2:** –í–≤–µ—Å—Ç–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–û–±–º–µ–Ω –±–∞–ª–ª–æ–≤ –Ω–∞ –º–∞–Ω–∏–∫—é—Ä")
   - [ ] **–®–∞–≥ 3:** –í–≤–µ—Å—Ç–∏ –æ–ø–∏—Å–∞–Ω–∏–µ
   - [ ] **–®–∞–≥ 4:** –í–≤–µ—Å—Ç–∏ —Ä–∞–∑–º–µ—Ä —Å–∫–∏–¥–∫–∏/–±–æ–Ω—É—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "100 –±–∞–ª–ª–æ–≤")
   - [ ] **–®–∞–≥ 5:** –í–≤–µ—Å—Ç–∏ –¥–∞—Ç—É –æ–∫–æ–Ω—á–∞–Ω–∏—è (–î–î.–ú–ú.–ì–ì–ì–ì, –Ω–∞–ø—Ä–∏–º–µ—Ä: 31.12.2025)
   - [ ] **–®–∞–≥ 6:** –í—ã–±—Ä–∞—Ç—å —É—Å–ª—É–≥–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ (–≤—ã–±—Ä–∞—Ç—å 1-3 —É—Å–ª—É–≥–∏)
   - [ ] **–®–∞–≥ 7:** –£–∫–∞–∑–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–ø–ª–∞—Ç—ã –±–∞–ª–ª–∞–º–∏:
     - [ ] –°—Ç–æ–∏–º–æ—Å—Ç—å —É—Å–ª—É–≥–∏: `100` (–¥–æ–ª–ª–∞—Ä–æ–≤)
     - [ ] –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ–ø–ª–∞—Ç–∞ –±–∞–ª–ª–∞–º–∏: `50` (–¥–æ–ª–ª–∞—Ä–æ–≤)
     - [ ] –ö—É—Ä—Å –æ–±–º–µ–Ω–∞: `1.0` (1 –±–∞–ª–ª = $1)
   - [ ] **–®–∞–≥ 8:** –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–∏–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å)
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∞–∫—Ü–∏—è —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î:**
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∞–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ —Å —Ç–∏–ø–æ–º `points_redemption`:
     ```sql
     SELECT id, title, promotion_type FROM promotions 
     WHERE promotion_type = 'points_redemption' 
     ORDER BY created_at DESC LIMIT 1;
     ```
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–≤—è–∑–∏ —Å–æ–∑–¥–∞–Ω—ã –≤ `promotion_services`:
     ```sql
     SELECT * FROM promotion_services 
     WHERE promotion_id = '[UUID_–ê–ö–¶–ò–ò]';
     ```
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö —É—Å–ª—É–≥ (–¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º)

---

## üß™ –¢–µ—Å—Ç 2: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–∫—Ü–∏–π –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

### –ß–µ—Ä–µ–∑ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª—É–≥–∏ –±–µ–∑ –∞–∫—Ü–∏–∏:**
   - [ ] –û—Ç–∫—Ä—ã—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - [ ] –ü–µ—Ä–µ–π—Ç–∏ –≤ —Ä–∞–∑–¥–µ–ª "–ú–æ–∏ –º–∞—Å—Ç–µ—Ä–∞" (Services)
   - [ ] –ù–∞–π—Ç–∏ —É—Å–ª—É–≥—É, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–π –ù–ï–¢ –∞–∫—Ç–∏–≤–Ω–æ–π –∞–∫—Ü–∏–∏
   - [ ] –û—Ç–∫—Ä—ã—Ç—å —É—Å–ª—É–≥—É
   - [ ] **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–Ω–æ–ø–∫–∞ "üí∏ –û–±–º–µ–Ω—è—Ç—å X –±–∞–ª–ª–æ–≤" **–ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è**
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–∞ "–ü–æ–ª—É—á–∏—Ç—å –∫—ç—à–±—ç–∫ –≤ –±–∞–ª–ª–∞—Ö"

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª—É–≥–∏ —Å –∞–∫—Ü–∏–µ–π:**
   - [ ] –ù–∞–π—Ç–∏ —É—Å–ª—É–≥—É, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–π —Å–æ–∑–¥–∞–Ω–∞ –∞–∫—Ü–∏—è —Ç–∏–ø–∞ `points_redemption`
   - [ ] –û—Ç–∫—Ä—ã—Ç—å —É—Å–ª—É–≥—É
   - [ ] **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "üéÅ –û–±–º–µ–Ω—è—Ç—å –ø–æ –∞–∫—Ü–∏–∏: [–ù–∞–∑–≤–∞–Ω–∏–µ –∞–∫—Ü–∏–∏]"
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–Ω–æ–ø–∫–∞ –≤–µ–¥–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞–∫—Ü–∏–∏ –ø—Ä–∏ –∫–ª–∏–∫–µ

---

## üß™ –¢–µ—Å—Ç 3: –û–±–º–µ–Ω –±–∞–ª–ª–æ–≤ —á–µ—Ä–µ–∑ –∞–∫—Ü–∏—é

### –ß–µ—Ä–µ–∑ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:**
   - [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —É –∫–ª–∏–µ–Ω—Ç–∞ –µ—Å—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –±–∞–ª–∞–Ω—Å –±–∞–ª–ª–æ–≤ (–º–∏–Ω–∏–º—É–º 50 –±–∞–ª–ª–æ–≤)
   - [ ] –ï—Å–ª–∏ –Ω–µ—Ç - –Ω–∞—á–∏—Å–ª–∏—Ç—å –±–∞–ª–ª—ã —á–µ—Ä–µ–∑ –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–π –±–æ—Ç (QR-–∫–æ–¥)

2. **–û–±–º–µ–Ω –±–∞–ª–ª–æ–≤:**
   - [ ] –û—Ç–∫—Ä—ã—Ç—å —É—Å–ª—É–≥—É —Å –∞–∫—Ç–∏–≤–Ω–æ–π –∞–∫—Ü–∏–µ–π
   - [ ] –ù–∞–∂–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É "üéÅ –û–±–º–µ–Ω—è—Ç—å –ø–æ –∞–∫—Ü–∏–∏"
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ—Ç–∫—Ä—ã–ª–∞—Å—å —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–∫—Ü–∏–∏ (`PromotionDetail`)
   - [ ] –í–≤–µ—Å—Ç–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤ –¥–ª—è –æ–ø–ª–∞—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä: 50)
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å—á–µ—Ç:
     - [ ] –°—Ç–æ–∏–º–æ—Å—Ç—å —É—Å–ª—É–≥–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
     - [ ] –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ–ø–ª–∞—Ç–∞ –±–∞–ª–ª–∞–º–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
     - [ ] –î–æ–ø–ª–∞—Ç–∞ –Ω–∞–ª–∏—á–Ω—ã–º–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
   - [ ] –ù–∞–∂–∞—Ç—å "–û–ø–ª–∞—Ç–∏—Ç—å –±–∞–ª–ª–∞–º–∏"
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–æ–∑–¥–∞–Ω QR-–∫–æ–¥ –¥–ª—è –º–∞—Å—Ç–µ—Ä–∞

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ QR-–∫–æ–¥–∞:**
   - [ ] QR-–∫–æ–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç: `PROMOTION:{promotion_id}:{client_id}:{points_to_spend}:{points_value_usd}`
   - [ ] QR-–∫–æ–¥ –º–æ–∂–Ω–æ –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å

---

## üß™ –¢–µ—Å—Ç 4: –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ QR-–∫–æ–¥–∞ –º–∞—Å—Ç–µ—Ä–æ–º

### –ß–µ—Ä–µ–∑ –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–π –±–æ—Ç:

1. **–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ QR-–∫–æ–¥–∞:**
   - [ ] –û—Ç–∫—Ä—ã—Ç—å –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–π –±–æ—Ç
   - [ ] –í—ã–±—Ä–∞—Ç—å "üì± –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥"
   - [ ] –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç–æ–º
   - [ ] **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π:
     - [ ] –ù–∞–∑–≤–∞–Ω–∏–µ –∞–∫—Ü–∏–∏
     - [ ] ID –∫–ª–∏–µ–Ω—Ç–∞
     - [ ] –ë–∞–ª–∞–Ω—Å –∫–ª–∏–µ–Ω—Ç–∞
     - [ ] –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤ –¥–ª—è —Å–ø–∏—Å–∞–Ω–∏—è
     - [ ] –î–æ–ø–ª–∞—Ç–∞ –Ω–∞–ª–∏—á–Ω—ã–º–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
     - [ ] –ö—ç—à–±—ç–∫ (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ–ø–ª–∞—Ç–∞)
   - [ ] –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–Ω–æ–ø–∫–∏ "‚úÖ –û–¥–æ–±—Ä–∏—Ç—å" –∏ "‚ùå –û—Ç–º–µ–Ω–∞"

2. **–û–¥–æ–±—Ä–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:**
   - [ ] –ù–∞–∂–∞—Ç—å "‚úÖ –û–¥–æ–±—Ä–∏—Ç—å"
   - [ ] **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ:
     - [ ] –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ø–∏—Å–∞–Ω–Ω—ã—Ö –±–∞–ª–ª–æ–≤
     - [ ] –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –±–∞–ª–ª–æ–≤ (–µ—Å–ª–∏ –±—ã–ª–∞ –¥–æ–ø–ª–∞—Ç–∞)
     - [ ] –ù–æ–≤—ã–π –±–∞–ª–∞–Ω—Å –∫–ª–∏–µ–Ω—Ç–∞

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î:**
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –≤ —Ç–∞–±–ª–∏—Ü–µ `transactions`:
     ```sql
     SELECT * FROM transactions 
     WHERE client_chat_id = '[CLIENT_ID]' 
     ORDER BY date_time DESC LIMIT 1;
     ```
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å –∫–ª–∏–µ–Ω—Ç–∞:
     ```sql
     SELECT balance FROM users WHERE chat_id = '[CLIENT_ID]';
     ```

---

## üß™ –¢–µ—Å—Ç 5: –°–æ–∑–¥–∞–Ω–∏–µ –∞–∫—Ü–∏–∏ —Ç–∏–ø–∞ "–û–±—ã—á–Ω–∞—è —Å–∫–∏–¥–∫–∞"

### –ß–µ—Ä–µ–∑ –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–π –±–æ—Ç:

1. **–°–æ–∑–¥–∞–Ω–∏–µ –∞–∫—Ü–∏–∏:**
   - [ ] –í—ã–±—Ä–∞—Ç—å —Ç–∏–ø –∞–∫—Ü–∏–∏ ‚Üí "üí∞ –û–±—ã—á–Ω–∞—è —Å–∫–∏–¥–∫–∞"
   - [ ] –ó–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –ø–æ–ª—è (–∑–∞–≥–æ–ª–æ–≤–æ–∫, –æ–ø–∏—Å–∞–Ω–∏–µ, —Å–∫–∏–¥–∫–∞, –¥–∞—Ç–∞)
   - [ ] **–í–∞–∂–Ω–æ:** –®–∞–≥ –≤—ã–±–æ—Ä–∞ —É—Å–ª—É–≥ **–ù–ï –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è**
   - [ ] –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–∏–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å)
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∞–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î:**
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∞–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ —Å —Ç–∏–ø–æ–º `discount`:
     ```sql
     SELECT id, title, promotion_type FROM promotions 
     WHERE promotion_type = 'discount' 
     ORDER BY created_at DESC LIMIT 1;
     ```
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤ `promotion_services` –Ω–µ—Ç —Å–≤—è–∑–µ–π –¥–ª—è —ç—Ç–æ–π –∞–∫—Ü–∏–∏

---

## üß™ –¢–µ—Å—Ç 6: –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –¢–µ—Å—Ç 6.1: –°–æ–∑–¥–∞–Ω–∏–µ –∞–∫—Ü–∏–∏ –±–µ–∑ —É—Å–ª—É–≥
- [ ] –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è —Å–æ–∑–¥–∞—Ç—å –∞–∫—Ü–∏—é —Ç–∏–ø–∞ `points_redemption` –±–µ–∑ –≤—ã–±–æ—Ä–∞ —É—Å–ª—É–≥
- [ ] **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –°–∏—Å—Ç–µ–º–∞ —Ç—Ä–µ–±—É–µ—Ç –≤—ã–±—Ä–∞—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —É—Å–ª—É–≥—É

### –¢–µ—Å—Ç 6.2: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–ª–æ–≤
- [ ] –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –æ–±–º–µ–Ω—è—Ç—å –±–æ–ª—å—à–µ –±–∞–ª–ª–æ–≤, —á–µ–º –µ—Å—Ç—å –Ω–∞ –±–∞–ª–∞–Ω—Å–µ
- [ ] **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–ª–æ–≤"

### –¢–µ—Å—Ç 6.3: –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –æ–ø–ª–∞—Ç—ã
- [ ] –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –æ–ø–ª–∞—Ç–∏—Ç—å –±–∞–ª–ª–∞–º–∏ –±–æ–ª—å—à–µ, —á–µ–º `max_points_payment`
- [ ] **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ –æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å—É–º–º–µ –æ–ø–ª–∞—Ç—ã

### –¢–µ—Å—Ç 6.4: –ò—Å—Ç–µ–∫—à–∞—è –∞–∫—Ü–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å –∞–∫—Ü–∏—é —Å –¥–∞—Ç–æ–π –æ–∫–æ–Ω—á–∞–Ω–∏—è –≤ –ø—Ä–æ—à–ª–æ–º
- [ ] –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É –∞–∫—Ü–∏—é
- [ ] **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ê–∫—Ü–∏—è –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö

### –¢–µ—Å—Ç 6.5: –ù–µ–∞–∫—Ç–∏–≤–Ω–∞—è –∞–∫—Ü–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å –∞–∫—Ü–∏—é –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `is_active = false` –≤ –ë–î
- [ ] –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É –∞–∫—Ü–∏—é
- [ ] **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ê–∫—Ü–∏—è –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö

---

## üß™ –¢–µ—Å—Ç 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π –ë–î

### –ß–µ—Ä–µ–∑ SQL Editor:

1. **–§—É–Ω–∫—Ü–∏—è get_promotions_for_service:**
   - [ ] –í—ã–ø–æ–ª–Ω–∏—Ç—å:
     ```sql
     SELECT * FROM get_promotions_for_service('[UUID_–£–°–õ–£–ì–ò]');
     ```
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –∞–∫—Ü–∏–∏
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–∫—Ü–∏–∏ —Å —Ç–∏–ø–æ–º `points_redemption`

2. **–§—É–Ω–∫—Ü–∏—è get_services_for_promotion:**
   - [ ] –í—ã–ø–æ–ª–Ω–∏—Ç—å:
     ```sql
     SELECT * FROM get_services_for_promotion('[UUID_–ê–ö–¶–ò–ò]');
     ```
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤—Å–µ —É—Å–ª—É–≥–∏, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ –∞–∫—Ü–∏–∏
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–µ –∏ –∞–∫—Ç–∏–≤–Ω—ã–µ —É—Å–ª—É–≥–∏

3. **–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ promotion_services_view:**
   - [ ] –í—ã–ø–æ–ª–Ω–∏—Ç—å:
     ```sql
     SELECT * FROM promotion_services_view LIMIT 10;
     ```
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üß™ –¢–µ—Å—Ç 8: –ü—Ä–æ–≤–µ—Ä–∫–∞ API endpoints

### –¢–µ—Å—Ç 8.1: Endpoint /api/redeem (DEPRECATED)
- [ ] –û—Ç–ø—Ä–∞–≤–∏—Ç—å POST –∑–∞–ø—Ä–æ—Å –Ω–∞ `/api/redeem` —Å –¥–∞–Ω–Ω—ã–º–∏ —É—Å–ª—É–≥–∏
- [ ] **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ 400 —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–∫—Ü–∏–∏

### –¢–µ—Å—Ç 8.2: Endpoint /api/redeem-promotion
- [ ] –û—Ç–ø—Ä–∞–≤–∏—Ç—å POST –∑–∞–ø—Ä–æ—Å –Ω–∞ `/api/redeem-promotion` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- [ ] **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è QR-–∫–æ–¥ –¥–ª—è –º–∞—Å—Ç–µ—Ä–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ –æ—Ç–≤–µ—Ç–µ

---

## üß™ –¢–µ—Å—Ç 9: –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–≤—è–∑–µ–π

### –¢–µ—Å—Ç 9.1: –û–¥–Ω–∞ –∞–∫—Ü–∏—è - –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Å–ª—É–≥
- [ ] –°–æ–∑–¥–∞—Ç—å –∞–∫—Ü–∏—é —Ç–∏–ø–∞ `points_redemption`
- [ ] –ü—Ä–∏–≤—è–∑–∞—Ç—å –∫ –Ω–µ–π 3 —Ä–∞–∑–Ω—ã–µ —É—Å–ª—É–≥–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ë–î, —á—Ç–æ –≤—Å–µ 3 —Å–≤—è–∑–∏ —Å–æ–∑–¥–∞–Ω—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –¥–ª—è –∫–∞–∂–¥–æ–π –∏–∑ —ç—Ç–∏—Ö —É—Å–ª—É–≥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —ç—Ç–∞ –∞–∫—Ü–∏—è

### –¢–µ—Å—Ç 9.2: –û–¥–Ω–∞ —É—Å–ª—É–≥–∞ - –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–∫—Ü–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å 2 —Ä–∞–∑–Ω—ã–µ –∞–∫—Ü–∏–∏ —Ç–∏–ø–∞ `points_redemption`
- [ ] –ü—Ä–∏–≤—è–∑–∞—Ç—å –æ–±–µ –∫ –æ–¥–Ω–æ–π —É—Å–ª—É–≥–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:
   - [ ] –û—Ç–∫—Ä—ã—Ç—å —É—Å–ª—É–≥—É
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –∞–∫—Ü–∏—è
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É –≤—ã–±–æ—Ä–∞ –∞–∫—Ü–∏–∏ (–¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –ø–µ—Ä–≤–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è)

---

## üß™ –¢–µ—Å—Ç 10: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –¢–µ—Å—Ç 10.1: –ë–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤—è–∑–µ–π
- [ ] –°–æ–∑–¥–∞—Ç—å –∞–∫—Ü–∏—é –∏ –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫ –Ω–µ–π 10+ —É—Å–ª—É–≥
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ `get_services_for_promotion`
- [ ] **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ (< 1 —Å–µ–∫—É–Ω–¥—ã)

### –¢–µ—Å—Ç 10.2: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∞–∫—Ü–∏–∏ –¥–ª—è —É—Å–ª—É–≥–∏
- [ ] –°–æ–∑–¥–∞—Ç—å 5+ –∞–∫—Ü–∏–π –¥–ª—è –æ–¥–Ω–æ–π —É—Å–ª—É–≥–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ `get_promotions_for_service`
- [ ] **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ (< 1 —Å–µ–∫—É–Ω–¥—ã)

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç

### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- [ ] SQL –º–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –∞–∫—Ü–∏–∏ —Ç–∏–ø–∞ `points_redemption` —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –í—ã–±–æ—Ä —É—Å–ª—É–≥ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ê–∫—Ü–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –¥–ª—è —É—Å–ª—É–≥ –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- [ ] –û–±–º–µ–Ω –±–∞–ª–ª–æ–≤ —á–µ—Ä–µ–∑ –∞–∫—Ü–∏—é —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] QR-–∫–æ–¥ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏ —Å–∫–∞–Ω–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ë–∞–ª–∞–Ω—Å –∫–ª–∏–µ–Ω—Ç–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –∞–∫—Ü–∏–∏ —Ç–∏–ø–∞ `discount` —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –§—É–Ω–∫—Ü–∏–∏ –ë–î —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–≤—è–∑–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (–µ—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã)

1. **–ü—Ä–æ–±–ª–µ–º–∞:** [–û–ø–∏—Å–∞–Ω–∏–µ]
   - **–®–∞–≥–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è:** [–®–∞–≥–∏]
   - **–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:** [–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å]
   - **–§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:** [–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç]
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** [–í—ã—Å–æ–∫–∏–π/–°—Ä–µ–¥–Ω–∏–π/–ù–∏–∑–∫–∏–π]

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- –í—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥–µ
- –ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —Ç–µ—Å—Ç–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ–∂–∏–¥–∞–µ–º–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
- –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –≤–∞–∂–Ω—ã—Ö —à–∞–≥–æ–≤ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –ó–∞–ø–∏—Å—ã–≤–∞–π—Ç–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

**–î–∞—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:** _______________  
**–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫:** _______________  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** [ ] –£—Å–ø–µ—à–Ω–æ / [ ] –¢—Ä–µ–±—É—é—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
