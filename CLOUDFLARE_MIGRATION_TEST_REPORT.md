# –û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ Cloudflare

**–î–∞—Ç–∞:** 2026-01-18  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. REST API
- ‚úÖ **Health Check** (`GET /health`): –†–ê–ë–û–¢–ê–ï–¢
  - URL: `https://loyalitybot-api.aerasun3000.workers.dev/health`
  - –û—Ç–≤–µ—Ç: `{"status": "ok"}`

- ‚úÖ **Balance Endpoint** (`GET /clients/:client_chat_id/balance`): –†–ê–ë–û–¢–ê–ï–¢
  - URL: `https://loyalitybot-api.aerasun3000.workers.dev/clients/{client_chat_id}/balance`
  - –¢–µ—Å—Ç: `GET /clients/TEST_USER/balance` ‚Üí `{"client_chat_id": "TEST_USER", "balance": 0}`

- ‚úÖ **Transactions Endpoint** (`POST /transactions`): –ì–û–¢–û–í
  - URL: `https://loyalitybot-api.aerasun3000.workers.dev/transactions`
  - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç: `accrual` (–Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ) –∏ `spend` (—Å–ø–∏—Å–∞–Ω–∏–µ)

- ‚úÖ **Redeem Promotion Endpoint** (`POST /api/redeem-promotion`): –ì–û–¢–û–í
  - URL: `https://loyalitybot-api.aerasun3000.workers.dev/api/redeem-promotion`
  - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–±–º–µ–Ω–∞ –±–∞–ª–ª–æ–≤ –Ω–∞ –∞–∫—Ü–∏—é

### 2. Telegram Bots Webhooks

#### ‚úÖ –ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–π –±–æ—Ç
- **URL:** `https://loyalitybot-partner-webhook.aerasun3000.workers.dev`
- **Webhook Status:** ‚úÖ –ù–ê–°–¢–†–û–ï–ù
- **Pending Updates:** 0

#### ‚úÖ –ê–¥–º–∏–Ω-–±–æ—Ç
- **URL:** `https://loyalitybot-admin-webhook.aerasun3000.workers.dev`
- **Webhook Status:** ‚úÖ –ù–ê–°–¢–†–û–ï–ù
- **Pending Updates:** 0

#### ‚ö†Ô∏è –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –±–æ—Ç
- **URL:** `https://loyalitybot-client-webhook.aerasun3000.workers.dev`
- **Webhook Status:** ‚ö†Ô∏è –¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Telegram API

---

## üîó –í—Å–µ URLs

### Workers
- **–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –±–æ—Ç:** `https://loyalitybot-client-webhook.aerasun3000.workers.dev`
- **–ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–π –±–æ—Ç:** `https://loyalitybot-partner-webhook.aerasun3000.workers.dev`
- **–ê–¥–º–∏–Ω-–±–æ—Ç:** `https://loyalitybot-admin-webhook.aerasun3000.workers.dev`
- **REST API:** `https://loyalitybot-api.aerasun3000.workers.dev`

### Account Info
- **Account:** aerasun3000@gmail.com
- **Account ID:** 1e573db7d6be24be4e467cc02a9b8524

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –±–æ—Ç
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/start`
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ NPS —Ä–µ–π—Ç–∏–Ω–≥

### –ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–π –±–æ—Ç
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/start`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ (Approved/Pending/Rejected)
- ‚úÖ –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –¥–ª—è –æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤

### –ê–¥–º–∏–Ω-–±–æ—Ç
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/start` –∏ `/admin`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- ‚úÖ –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ (–æ–¥–æ–±—Ä–µ–Ω–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ)
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –∑–∞—è–≤–æ–∫

### REST API
- ‚úÖ `GET /health` - Health check
- ‚úÖ `GET /clients/:client_chat_id/balance` - –ü–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å
- ‚úÖ `POST /transactions` - –°–æ–∑–¥–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
- ‚úÖ `POST /api/redeem-promotion` - –û–±–º–µ–Ω –±–∞–ª–ª–æ–≤ –Ω–∞ –∞–∫—Ü–∏—é

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä—É—á–Ω—É—é:
1. **–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –±–æ—Ç:**
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –≤ –±–æ—Ç–µ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–Ω–æ–ø–∫—É "–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"

2. **–ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–π –±–æ—Ç:**
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –≤ –±–æ—Ç–µ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é (–µ—Å–ª–∏ –ø–∞—Ä—Ç–Ω–µ—Ä –æ–¥–æ–±—Ä–µ–Ω)
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏ (–µ—Å–ª–∏ —Å—Ç–∞—Ç—É—Å Pending)

3. **–ê–¥–º–∏–Ω-–±–æ—Ç:**
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –∏–ª–∏ `/admin` –≤ –±–æ—Ç–µ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–¥–æ–±—Ä–∏—Ç—å/–æ—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É –ø–∞—Ä—Ç–Ω–µ—Ä–∞

4. **REST API:**
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –æ–±–º–µ–Ω –±–∞–ª–ª–æ–≤ –Ω–∞ –∞–∫—Ü–∏—é

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Frontend:
- –û–±–Ω–æ–≤–∏—Ç–µ `API_URL` –≤ frontend –Ω–∞ `https://loyalitybot-api.aerasun3000.workers.dev`
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ frontend

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ Long Polling:
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ long polling –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–∞ Fly.io
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –±–æ—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ webhooks

---

## ‚úÖ –ò—Ç–æ–≥–∏

**–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Cloudflare —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!**

–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:
- ‚úÖ 3 Telegram –±–æ—Ç–∞ –Ω–∞ Cloudflare Workers
- ‚úÖ REST API –Ω–∞ Cloudflare Workers
- ‚úÖ –í—Å–µ webhooks –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã

**–ì–æ—Ç–æ–≤–æ –∫ production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø–æ—Å–ª–µ —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!**
