#!/usr/bin/env python3
"""
–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –≤ Linear –¥–ª—è TON –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–∫—ç—à–±—ç–∫ Off-chain + –∫–æ–º–∏—Å—Å–∏–∏ On-chain)
"""

import os
import sys
from dotenv import load_dotenv
from linear_task_creator import create_linear_task
from update_linear_tasks_descriptions import create_task_description

load_dotenv()

# –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–æ–º–∞–Ω–¥—É
TEAM_KEY = os.getenv("LINEAR_TEAM_KEY", None)  # –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å "ENG" –∏–ª–∏ –¥—Ä—É–≥—É—é –∫–æ–º–∞–Ω–¥—É


def create_all_tasks():
    """–°–æ–∑–¥–∞—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏ –¥–ª—è TON –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏"""
    
    tasks = [
        {
            "title": "–≠—Ç–∞–ø 1.1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –¥–ª—è –º—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç–∏ –∫—ç—à–±—ç–∫–∞",
            "priority": 2,  # High
            "description": create_task_description(
                context_problem="–°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –≤–∞–ª—é—Ç–∞—Ö (VND, RUB, USD –∏ –¥—Ä.), –Ω–æ —Å–µ–π—á–∞—Å –∫—ç—à–±—ç–∫-–±–∞–ª–ª—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –±–µ–∑ —É—á–µ—Ç–∞ –≤–∞–ª—é—Ç—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.",
                context_situation="–£ –Ω–∞—Å —É–∂–µ –µ—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è currency –≤ transactions –∏ currency_exchange_rates, –Ω–æ –Ω—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –æ–Ω–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.",
                context_why="–ë–µ–∑ —É—á–µ—Ç–∞ –≤–∞–ª—é—Ç—ã –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ –Ω–∞—á–∏—Å–ª—è—Ç—å –∫—ç—à–±—ç–∫-–±–∞–ª–ª—ã –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω.",
                goal_what="–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤–∞–ª—é—Ç –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–∏—Ç—å –∏—Ö. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ currency —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ transactions –ø—Ä–∏ –∫–∞–∂–¥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.",
                goal_why="–ß—Ç–æ–±—ã –∫—ç—à–±—ç–∫-–±–∞–ª–ª—ã –Ω–∞—á–∏—Å–ª—è–ª–∏—Å—å —Å —É—á–µ—Ç–æ–º –≤–∞–ª—é—Ç—ã, –≤ –∫–æ—Ç–æ—Ä–æ–π —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä.",
                goal_benefits="–ü–∞—Ä—Ç–Ω–µ—Ä—ã –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω –±—É–¥—É—Ç –ø–æ–ª—É—á–∞—Ç—å —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–µ –±–∞–ª–ª—ã. –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–Ω–µ—Ç –≥–æ—Ç–æ–≤–æ–π –∫ –º—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç–∏.",
                steps=[
                    {
                        "title": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏",
                        "action": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏–∏ create_currency_exchange_rates.sql –∏ add_currency_to_transactions.sql –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –≤ Supabase",
                        "check": "–í—ã–ø–æ–ª–Ω–∏—Ç—å SELECT –≤ Supabase Dashboard: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ç–∞–±–ª–∏—Ü—ã currency_exchange_rates –∏ –ø–æ–ª—è currency –≤ transactions"
                    },
                    {
                        "title": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤",
                        "action": "–£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤ currency_exchange_rates –µ—Å—Ç—å –∫—É—Ä—Å—ã –¥–ª—è VND, RUB, KZT, KGS, AED",
                        "check": "SELECT * FROM currency_exchange_rates WHERE to_currency = 'USD'"
                    },
                    {
                        "title": "–û–±–Ω–æ–≤–∏—Ç—å supabase_manager.py –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è currency",
                        "action": "–í –º–µ—Ç–æ–¥–µ record_transaction –∏ execute_transaction –¥–æ–±–∞–≤–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ currency –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥–æ—Ä–æ–¥–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–∞",
                        "check": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–ª–µ currency –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ"
                    },
                    {
                        "title": "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ",
                        "action": "–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –≤–∞–ª—é—Ç –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ currency —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è",
                        "check": "–í –ë–î transactions –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ currency (VND, RUB, USD –∏ —Ç.–¥.)"
                    }
                ],
                tech_details={
                    "files": [
                        {"path": "migrations/create_currency_exchange_rates.sql", "description": "–ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç"},
                        {"path": "migrations/add_currency_to_transactions.sql", "description": "–ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è currency –≤ transactions"},
                        {"path": "migrations/insert_initial_exchange_rates.sql", "description": "–ù–∞—á–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç"},
                        {"path": "supabase_manager.py", "description": "–ú–µ—Ç–æ–¥ record_transaction –∏ execute_transaction"},
                        {"path": "currency_utils.py", "description": "–£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–∞–ª—é—Ç–∞–º–∏"}
                    ],
                    "apis": ["Supabase API"],
                    "env_vars": []
                },
                success_criteria=[
                    "–¢–∞–±–ª–∏—Ü–∞ currency_exchange_rates —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞",
                    "–ü–æ–ª–µ currency –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ transactions",
                    "–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ currency –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏",
                    "–¢–µ—Å—Ç–æ–≤—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π currency"
                ]
            )
        },
        {
            "title": "–≠—Ç–∞–ø 1.2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–∞ –∫—ç—à–±—ç–∫-–±–∞–ª–ª–æ–≤ —Å —É—á–µ—Ç–æ–º –≤–∞–ª—é—Ç—ã",
            "priority": 2,
            "description": create_task_description(
                context_problem="–°–µ–π—á–∞—Å –∫—ç—à–±—ç–∫-–±–∞–ª–ª—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –±–µ–∑ —É—á–µ—Ç–∞ –≤–∞–ª—é—Ç—ã. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ –ø–∞—Ä—Ç–Ω–µ—Ä –∏–∑ –ù—è—á–∞–Ω–≥–∞ (VND) –∏ –∏–∑ –ù—å—é-–ô–æ—Ä–∫–∞ (USD) –ø–æ–ª—É—á–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –±–∞–ª–ª—ã –∑–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å—É–º–º—ã, —á—Ç–æ –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ.",
                context_situation="–£ –Ω–∞—Å –µ—Å—Ç—å –º–µ—Ç–æ–¥ _calculate_accrual_points, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –±–∞–ª–ª—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ raw_amount, –Ω–æ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –≤–∞–ª—é—Ç—É. –ë–∞–ª–ª—ã –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –∏ –Ω–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –¥–µ–Ω—å–≥–∏.",
                context_why="–ö—ç—à–±—ç–∫-–±–∞–ª–ª—ã - —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤–æ–≤–ª–µ—á–µ–Ω–∏—è, –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã —Å—Ç–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∫—É–ø–∫–∏ –≤ –≤–∞–ª—é—Ç–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –±—ã—Ç—å —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–º–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –≤–∞–ª—é—Ç.",
                goal_what="–û–±–Ω–æ–≤–∏—Ç—å —Ä–∞—Å—á–µ—Ç –∫—ç—à–±—ç–∫-–±–∞–ª–ª–æ–≤ —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∏ —É—á–∏—Ç—ã–≤–∞–ª–∏ –≤–∞–ª—é—Ç—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –ë–∞–ª–ª—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –∏ –ù–ï –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ –¥–µ–Ω—å–≥–∏ - —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–ø–∏—Å–∞–Ω–∏—è –Ω–∞ –ø–æ–∫—É–ø–∫–∏.",
                goal_why="–ß—Ç–æ–±—ã –ø–∞—Ä—Ç–Ω–µ—Ä—ã –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω –ø–æ–ª—É—á–∞–ª–∏ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–µ –±–∞–ª–ª—ã, –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å—É–º–º–µ –ø–æ–∫—É–ø–∫–∏ –≤ –∏—Ö –≤–∞–ª—é—Ç–µ.",
                goal_benefits="–ß–µ—Å—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –±–∞–ª–ª–æ–≤ –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –≤–∞–ª—é—Ç—ã. –ë–∞–ª–ª—ã –æ—Å—Ç–∞—é—Ç—Å—è –ø—Ä–æ—Å—Ç—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –≤–æ–≤–ª–µ—á–µ–Ω–∏—è –±–µ–∑ —É—Å–ª–æ–∂–Ω–µ–Ω–∏—è.",
                steps=[
                    {
                        "title": "–û–±–Ω–æ–≤–∏—Ç—å _calculate_accrual_points",
                        "action": "–î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä currency –∏ —É—á–∏—Ç—ã–≤–∞—Ç—å –µ–≥–æ –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ. –ë–∞–ª–ª—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –∫–∞–∫ –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç —Å—É–º–º—ã –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –≤–∞–ª—é—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5% –æ—Ç 500.000‚Ç´ = 25.000 –±–∞–ª–ª–æ–≤, –Ω–µ –≤ USD)",
                        "check": "–ú–µ—Ç–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç currency –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ –≤ —Ä–∞—Å—á–µ—Ç–∞—Ö"
                    },
                    {
                        "title": "–û–±–Ω–æ–≤–∏—Ç—å execute_transaction",
                        "action": "–ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å currency –≤ _calculate_accrual_points",
                        "check": "–ü—Ä–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏ –±–∞–ª–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–∞–ª—é—Ç–∞"
                    },
                    {
                        "title": "–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤—ã–≤–æ–¥–∞",
                        "action": "–£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –Ω–µ—Ç —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –≤—ã–≤–æ–¥–∞ –∫—ç—à–±—ç–∫-–±–∞–ª–ª–æ–≤. –û–Ω–∏ –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ —Å–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ –ø–æ–∫—É–ø–∫–∏.",
                        "check": "–í –∫–æ–¥–µ –Ω–µ—Ç –º–µ—Ç–æ–¥–æ–≤ —Ç–∏–ø–∞ withdraw_points –∏–ª–∏ convert_points_to_money"
                    },
                    {
                        "title": "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ",
                        "action": "–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –≤–∞–ª—é—Ç",
                        "check": "–ë–∞–ª–ª—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ: 5% –æ—Ç —Å—É–º–º—ã –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –≤–∞–ª—é—Ç–µ"
                    }
                ],
                tech_details={
                    "files": [
                        {"path": "supabase_manager.py", "description": "–ú–µ—Ç–æ–¥ _calculate_accrual_points –∏ execute_transaction"}
                    ],
                    "apis": [],
                    "env_vars": []
                },
                success_criteria=[
                    "–ë–∞–ª–ª—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è —Å —É—á–µ—Ç–æ–º –≤–∞–ª—é—Ç—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏",
                    "–ë–∞–ª–ª—ã –ù–ï –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ USD –ø—Ä–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏",
                    "–ë–∞–ª–ª—ã –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Å–ø–∏—Å–∞—Ç—å –Ω–∞ –ø–æ–∫—É–ø–∫–∏, –Ω–µ–ª—å–∑—è –≤—ã–≤–µ—Å—Ç–∏"
                ]
            )
        },
        {
            "title": "–≠—Ç–∞–ø 2.1: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ partner_revenue_share –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è USD",
            "priority": 1,  # Urgent
            "description": create_task_description(
                context_problem="Revenue Share —Å–µ–π—á–∞—Å —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è, –Ω–æ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç USD —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç. –≠—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –≤—ã–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ TON, —Ç–∞–∫ –∫–∞–∫ –≤—Å–µ –∫–æ–º–∏—Å—Å–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –æ–¥–Ω–æ–π –≤–∞–ª—é—Ç–µ (USD) –ø–µ—Ä–µ–¥ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π –≤ TON.",
                context_situation="–£ –Ω–∞—Å –µ—Å—Ç—å partner_revenue_share.py –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç Revenue Share, –Ω–æ –ø–æ–ª–µ amount_usd –º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∏–ª–∏ –Ω–µ –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è. –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ Revenue Share –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ USD –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è.",
                context_why="–í—Å–µ –∫–æ–º–∏—Å—Å–∏–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ USD –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è. –ü—Ä–∏ –≤—ã–ø–ª–∞—Ç–µ —á–µ—Ä–µ–∑ TON –º—ã –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º USD ‚Üí TON –ø–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º—É –∫—É—Ä—Å—É.",
                goal_what="–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ amount_usd –≤ partner_revenue_share (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç) –∏ –æ–±–Ω–æ–≤–∏—Ç—å —Ä–∞—Å—á–µ—Ç Revenue Share —á—Ç–æ–±—ã –≤—Å–µ —Å—É–º–º—ã –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å –≤ USD –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏.",
                goal_why="–ß—Ç–æ–±—ã Revenue Share –±—ã–ª–∏ –≤ –µ–¥–∏–Ω–æ–π –≤–∞–ª—é—Ç–µ (USD) –∏ –≥–æ—Ç–æ–≤—ã –∫ –≤—ã–ø–ª–∞—Ç–µ —á–µ—Ä–µ–∑ TON.",
                goal_benefits="–ï–¥–∏–Ω–∞—è –≤–∞–ª—é—Ç–∞ –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–∏—Å—Å–∏–π. –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ TON –≤—ã–ø–ª–∞—Ç–∞–º.",
                steps=[
                    {
                        "title": "–°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è amount_usd",
                        "action": "–°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é migrations/add_usd_to_revenue_share.sql –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—è amount_usd –µ—Å–ª–∏ –µ–≥–æ –µ—â–µ –Ω–µ—Ç",
                        "check": "ALTER TABLE partner_revenue_share ADD COLUMN IF NOT EXISTS amount_usd"
                    },
                    {
                        "title": "–û–±–Ω–æ–≤–∏—Ç—å _get_system_revenue",
                        "action": "–û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–æ–¥ —á—Ç–æ–±—ã –æ–Ω –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–ª –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ USD –∏—Å–ø–æ–ª—å–∑—É—è convert_currency –∏–∑ currency_utils",
                        "check": "–ú–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—É–º–º—É –≤ USD –ø–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π"
                    },
                    {
                        "title": "–û–±–Ω–æ–≤–∏—Ç—å _calculate_and_store_revenue_share",
                        "action": "–°–æ—Ö—Ä–∞–Ω—è—Ç—å amount_usd –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–∏ –≤ partner_revenue_share",
                        "check": "–í –ë–î partner_revenue_share –ø–æ–ª–µ amount_usd –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è USD —Å—É–º–º–æ–π"
                    },
                    {
                        "title": "–ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö",
                        "action": "–ï—Å–ª–∏ –µ—Å—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ –±–µ–∑ amount_usd, —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –∏—Ö (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)",
                        "check": "–í—Å–µ –∑–∞–ø–∏—Å–∏ –≤ partner_revenue_share –∏–º–µ—é—Ç amount_usd"
                    }
                ],
                tech_details={
                    "files": [
                        {"path": "partner_revenue_share.py", "description": "–ú–µ—Ç–æ–¥—ã _get_system_revenue –∏ _calculate_and_store_revenue_share"},
                        {"path": "currency_utils.py", "description": "–§—É–Ω–∫—Ü–∏—è convert_currency"},
                        {"path": "migrations/add_usd_to_revenue_share.sql", "description": "–ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è amount_usd"}
                    ],
                    "apis": ["Supabase API"],
                    "env_vars": []
                },
                success_criteria=[
                    "–ü–æ–ª–µ amount_usd –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ partner_revenue_share",
                    "Revenue Share —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤ USD —Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π",
                    "amount_usd —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–∏",
                    "–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)"
                ]
            )
        },
        {
            "title": "–≠—Ç–∞–ø 2.2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ referral_rewards –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è USD",
            "priority": 1,
            "description": create_task_description(
                context_problem="–†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏ (L1/L2/L3) —Å–µ–π—á–∞—Å —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ referral_rewards –∫–∞–∫ points (–±–∞–ª–ª—ã), –Ω–æ –¥–ª—è –≤—ã–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ TON –Ω—É–∂–Ω—ã —Å—É–º–º—ã –≤ USD. –ö–æ–º–∏—Å—Å–∏–∏ –¥–æ–ª–∂–Ω—ã –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ USD –ø—Ä–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏.",
                context_situation="–£ –Ω–∞—Å –µ—Å—Ç—å referral_calculator.py –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∏—Å—Å–∏–∏, –∏ –æ–Ω–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ referral_rewards. –ù–æ —Å–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–ª–µ points –≤–º–µ—Å—Ç–æ amount_usd. –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å amount_usd –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å USD —Å—É–º–º—ã –¥–ª—è –∫–æ–º–∏—Å—Å–∏–π.",
                context_why="–í—Å–µ –∫–æ–º–∏—Å—Å–∏–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ USD –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –≤—ã–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ TON. –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏ - —ç—Ç–æ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–µ–Ω—å–≥–∏, –Ω–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –±–∞–ª–ª—ã.",
                goal_what="–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ amount_usd –≤ referral_rewards, –æ–±–Ω–æ–≤–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–º–∏—Å—Å–∏–π —á—Ç–æ–±—ã –æ–Ω–∏ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –≤ USD (–Ω–µ –≤ points). –ö–æ–º–∏—Å—Å–∏–∏ —É–∂–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ USD –≤ referral_calculator, –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å.",
                goal_why="–ß—Ç–æ–±—ã —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏ –±—ã–ª–∏ –≥–æ—Ç–æ–≤—ã –∫ –≤—ã–ø–ª–∞—Ç–µ —á–µ—Ä–µ–∑ TON –≤ –µ–¥–∏–Ω–æ–π –≤–∞–ª—é—Ç–µ (USD).",
                goal_benefits="–ï–¥–∏–Ω–∞—è –≤–∞–ª—é—Ç–∞ –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∫–æ–º–∏—Å—Å–∏–π. –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ TON –≤—ã–ø–ª–∞—Ç–∞–º.",
                steps=[
                    {
                        "title": "–°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è amount_usd –≤ referral_rewards",
                        "action": "–°–æ–∑–¥–∞—Ç—å migrations/add_usd_to_referral_rewards.sql –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è amount_usd, currency, status –∏ –¥—Ä—É–≥–∏—Ö –ø–æ–ª–µ–π –¥–ª—è TON",
                        "check": "ALTER TABLE referral_rewards ADD COLUMN IF NOT EXISTS amount_usd"
                    },
                    {
                        "title": "–û–±–Ω–æ–≤–∏—Ç—å _apply_commission_distribution",
                        "action": "–ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∫–æ–º–∏—Å—Å–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å amount_usd –≤–º–µ—Å—Ç–æ points. reward_type –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 'commission_l1', 'commission_l2', 'commission_l3'",
                        "check": "–ö–æ–º–∏—Å—Å–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å amount_usd (USD —Å—É–º–º–∞), –Ω–µ points"
                    },
                    {
                        "title": "–£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∫–æ–º–∏—Å—Å–∏–∏ —É–∂–µ –≤ USD",
                        "action": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ referral_calculator.calculate_commissions —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å USD (purchase.amount –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ USD)",
                        "check": "–í process_referral_transaction_bonuses raw_amount –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ USD –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä"
                    },
                    {
                        "title": "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ",
                        "action": "–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –∫–æ–º–∏—Å—Å–∏–π –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ amount_usd —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è",
                        "check": "–í referral_rewards –∑–∞–ø–∏—Å–∏ —Å reward_type 'commission_*' –∏–º–µ—é—Ç amount_usd –≤ USD"
                    }
                ],
                tech_details={
                    "files": [
                        {"path": "supabase_manager.py", "description": "–ú–µ—Ç–æ–¥ _apply_commission_distribution –∏ process_referral_transaction_bonuses"},
                        {"path": "referral_calculator.py", "description": "–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∫–æ–º–∏—Å—Å–∏–π"},
                        {"path": "migrations/add_usd_to_referral_rewards.sql", "description": "–ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è amount_usd –≤ referral_rewards"}
                    ],
                    "apis": ["Supabase API"],
                    "env_vars": []
                },
                success_criteria=[
                    "–ü–æ–ª–µ amount_usd –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ referral_rewards",
                    "–†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å amount_usd (USD)",
                    "reward_type –¥–ª—è –∫–æ–º–∏—Å—Å–∏–π: 'commission_l1', 'commission_l2', 'commission_l3'",
                    "–ö–æ–º–∏—Å—Å–∏–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ USD –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º"
                ]
            )
        },
        {
            "title": "–≠—Ç–∞–ø 3.1: –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î –¥–ª—è TON –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏",
            "priority": 1,
            "description": create_task_description(
                context_problem="–î–ª—è –≤—ã–ø–ª–∞—Ç –∫–æ–º–∏—Å—Å–∏–π —á–µ—Ä–µ–∑ TON –Ω—É–∂–Ω—ã —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è TON —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, –∞–¥—Ä–µ—Å–æ–≤ –∫–æ—à–µ–ª—å–∫–æ–≤ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –∏ –∫—É—Ä—Å–æ–≤ TON/USD. –°–µ–π—á–∞—Å —Ç–∞–∫–∏—Ö —Ç–∞–±–ª–∏—Ü –Ω–µ—Ç.",
                context_situation="–£ –Ω–∞—Å –µ—Å—Ç—å partner_revenue_share –∏ referral_rewards, –Ω–æ –Ω–µ—Ç —Ç–∞–±–ª–∏—Ü—ã ton_payments –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö TON –≤—ã–ø–ª–∞—Ç. –¢–∞–∫–∂–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –¥–ª—è TON –≤ partners.",
                context_why="–ë–µ–∑ —ç—Ç–∏—Ö —Ç–∞–±–ª–∏—Ü –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å TON –≤—ã–ø–ª–∞—Ç—ã, —Ö—Ä–∞–Ω–∏—Ç—å –∞–¥—Ä–µ—Å–∞ –∫–æ—à–µ–ª—å–∫–æ–≤ –∏ –∫—É—Ä—Å—ã TON/USD. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ –∏ –∞—É–¥–∏—Ç–∞.",
                goal_what="–°–æ–∑–¥–∞—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏: —Ç–∞–±–ª–∏—Ü—É ton_payments, –ø–æ–ª—è –¥–ª—è TON –≤ partners, —Ç–∞–±–ª–∏—Ü—É ton_exchange_rates –¥–ª—è –∫—É—Ä—Å–æ–≤ TON/USD.",
                goal_why="–ß—Ç–æ–±—ã —Å–∏—Å—Ç–µ–º–∞ –º–æ–≥–ª–∞ —Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –æ TON –≤—ã–ø–ª–∞—Ç–∞—Ö –∏ –∫–æ—à–µ–ª—å–∫–∞—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤.",
                goal_benefits="–ü–æ–ª–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å TON –≤—ã–ø–ª–∞—Ç. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –•—Ä–∞–Ω–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤ TON/USD.",
                steps=[
                    {
                        "title": "–°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è ton_payments",
                        "action": "–°–æ–∑–¥–∞—Ç—å migrations/create_ton_payments_table.sql —Å–æ –≤—Å–µ–º–∏ –ø–æ–ª—è–º–∏ –∏–∑ –¢–ó: partner_chat_id, amount_usd, amount_nano, ton_tx_hash, status –∏ —Ç.–¥.",
                        "check": "–¢–∞–±–ª–∏—Ü–∞ ton_payments —Å–æ–∑–¥–∞–Ω–∞ —Å–æ –≤—Å–µ–º–∏ –ø–æ–ª—è–º–∏"
                    },
                    {
                        "title": "–°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è TON –ø–æ–ª–µ–π –≤ partners",
                        "action": "–°–æ–∑–¥–∞—Ç—å migrations/add_ton_to_partners.sql –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è ton_wallet_address, payment_method, ton_payments_enabled",
                        "check": "–ü–æ–ª—è –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ partners"
                    },
                    {
                        "title": "–°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è ton_exchange_rates",
                        "action": "–°–æ–∑–¥–∞—Ç—å migrations/create_ton_exchange_rates_table.sql –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫—É—Ä—Å–æ–≤ TON/USD",
                        "check": "–¢–∞–±–ª–∏—Ü–∞ ton_exchange_rates —Å–æ–∑–¥–∞–Ω–∞"
                    },
                    {
                        "title": "–°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è —Å–≤—è–∑–µ–π TON –≤ partner_revenue_share",
                        "action": "–î–æ–±–∞–≤–∏—Ç—å ton_payment_id, ton_tx_hash –≤ partner_revenue_share",
                        "check": "–ü–æ–ª—è –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏ –µ—Å—Ç—å –∏–Ω–¥–µ–∫—Å –Ω–∞ ton_tx_hash"
                    },
                    {
                        "title": "–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏",
                        "action": "–í—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ Supabase Dashboard",
                        "check": "–í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∏ –ø–æ–ª—è —Å–æ–∑–¥–∞–Ω—ã, –∏–Ω–¥–µ–∫—Å—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã"
                    }
                ],
                tech_details={
                    "files": [
                        {"path": "migrations/create_ton_payments_table.sql", "description": "–¢–∞–±–ª–∏—Ü–∞ –¥–ª—è TON –≤—ã–ø–ª–∞—Ç"},
                        {"path": "migrations/add_ton_to_partners.sql", "description": "TON –ø–æ–ª—è –≤ partners"},
                        {"path": "migrations/create_ton_exchange_rates_table.sql", "description": "–¢–∞–±–ª–∏—Ü–∞ –∫—É—Ä—Å–æ–≤ TON/USD"},
                        {"path": "migrations/add_ton_to_revenue_share.sql", "description": "TON –ø–æ–ª—è –≤ partner_revenue_share"}
                    ],
                    "apis": ["Supabase API"],
                    "env_vars": []
                },
                success_criteria=[
                    "–¢–∞–±–ª–∏—Ü–∞ ton_payments —Å–æ–∑–¥–∞–Ω–∞ —Å–æ –≤—Å–µ–º–∏ –ø–æ–ª—è–º–∏",
                    "–ü–æ–ª—è –¥–ª—è TON –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ partners",
                    "–¢–∞–±–ª–∏—Ü–∞ ton_exchange_rates —Å–æ–∑–¥–∞–Ω–∞",
                    "TON –ø–æ–ª—è –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ partner_revenue_share –∏ referral_rewards",
                    "–í—Å–µ –∏–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã"
                ]
            )
        },
        {
            "title": "–≠—Ç–∞–ø 3.2: –°–æ–∑–¥–∞–Ω–∏–µ TON Payment Service",
            "priority": 1,
            "description": create_task_description(
                context_problem="–î–ª—è –≤—ã–ø–ª–∞—Ç –∫–æ–º–∏—Å—Å–∏–π —á–µ—Ä–µ–∑ TON –Ω—É–∂–µ–Ω —Å–µ—Ä–≤–∏—Å –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å TON —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å USD –≤ TON –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.",
                context_situation="–£ –Ω–∞—Å –Ω–µ—Ç –º–æ–¥—É–ª—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å TON –±–ª–æ–∫—á–µ–π–Ω–æ–º. –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å ton_payment_service.py –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TON SDK (pytonlib –∏–ª–∏ ton-python) –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.",
                context_why="–ë–µ–∑ —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–ª–∞—á–∏–≤–∞—Ç—å –∫–æ–º–∏—Å—Å–∏–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º —á–µ—Ä–µ–∑ TON. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã.",
                goal_what="–°–æ–∑–¥–∞—Ç—å ton_payment_service.py —Å –º–µ—Ç–æ–¥–∞–º–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ TON —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ USD‚ÜíTON, –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É—Ä—Å–∞ TON/USD –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–ø–ª–∞—Ç.",
                goal_why="–ß—Ç–æ–±—ã —Å–∏—Å—Ç–µ–º–∞ –º–æ–≥–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–ª–∞—á–∏–≤–∞—Ç—å –∫–æ–º–∏—Å—Å–∏–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º —á–µ—Ä–µ–∑ TON –±–ª–æ–∫—á–µ–π–Ω.",
                goal_benefits="–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã–ø–ª–∞—Ç—ã –∫–æ–º–∏—Å—Å–∏–π. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TON –±–ª–æ–∫—á–µ–π–Ω–æ–º. –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –≤—ã–ø–ª–∞—Ç.",
                steps=[
                    {
                        "title": "–í—ã–±—Ä–∞—Ç—å TON SDK",
                        "action": "–í—ã–±—Ä–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É: pytonlib, ton-python –∏–ª–∏ toncenter API. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è pytonlib –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ—à–µ–ª—å–∫–∞–º–∏.",
                        "check": "–†–µ—à–µ–Ω–æ –∫–∞–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ requirements.txt"
                    },
                    {
                        "title": "–°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É TONPaymentService",
                        "action": "–°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å TONPaymentService —Å __init__, –º–µ—Ç–æ–¥–∞–º–∏ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ TON –∫–ª–∏–µ–Ω—Ç–∞",
                        "check": "–ö–ª–∞—Å—Å —Å–æ–∑–¥–∞–Ω, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å supabase_manager –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∏–∑ env"
                    },
                    {
                        "title": "–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å get_ton_exchange_rate",
                        "action": "–ú–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É—Ä—Å–∞ TON/USD –∏–∑ –ë–î –∏–ª–∏ –≤–Ω–µ—à–Ω–µ–≥–æ API (Binance/CoinGecko)",
                        "check": "–ú–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –∫—É—Ä—Å TON/USD"
                    },
                    {
                        "title": "–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å usd_to_ton",
                        "action": "–ú–µ—Ç–æ–¥ –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ USD —Å—É–º–º—ã –≤ TON (—Å —É—á–µ—Ç–æ–º –Ω–∞–Ω–æ—Ç–æ–Ω–æ–≤)",
                        "check": "–ú–µ—Ç–æ–¥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç USD –≤ –Ω–∞–Ω–æ—Ç–æ–Ω—ã"
                    },
                    {
                        "title": "–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å send_ton_payment",
                        "action": "–ú–µ—Ç–æ–¥ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ TON —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –∞–¥—Ä–µ—Å. –î–æ–ª–∂–µ–Ω –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –∫–ª—é—á–æ–º, –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤ –±–ª–æ–∫—á–µ–π–Ω –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å tx_hash",
                        "check": "–ú–µ—Ç–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç tx_hash"
                    },
                    {
                        "title": "–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å process_revenue_share_payment",
                        "action": "–ú–µ—Ç–æ–¥ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–ø–ª–∞—Ç—ã Revenue Share: –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø–∏—Å—å –∏–∑ partner_revenue_share, –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç USD‚ÜíTON, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç",
                        "check": "–ú–µ—Ç–æ–¥ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—ã–ø–ª–∞—Ç—É –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å—ã –≤ –ë–î"
                    },
                    {
                        "title": "–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å process_referral_commissions_batch",
                        "action": "–ú–µ—Ç–æ–¥ –¥–ª—è –≤—ã–ø–ª–∞—Ç—ã –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –∫–æ–º–∏—Å—Å–∏–π –ø–∞—Ä—Ç–Ω–µ—Ä–∞ (–µ—Å–ª–∏ —Å—É–º–º–∞ >= –ø–æ—Ä–æ–≥–∞)",
                        "check": "–ú–µ—Ç–æ–¥ —Å—É–º–º–∏—Ä—É–µ—Ç pending –∫–æ–º–∏—Å—Å–∏–∏ –∏ –≤—ã–ø–ª–∞—á–∏–≤–∞–µ—Ç –µ—Å–ª–∏ >= min_amount_usd"
                    },
                    {
                        "title": "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ testnet",
                        "action": "–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –º–µ—Ç–æ–¥—ã –Ω–∞ TON testnet —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –∫–æ—à–µ–ª—å–∫–∞–º–∏",
                        "check": "–í—Å–µ –º–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ testnet, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è"
                    }
                ],
                tech_details={
                    "files": [
                        {"path": "ton_payment_service.py", "description": "–°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å TON –±–ª–æ–∫—á–µ–π–Ω–æ–º"}
                    ],
                    "apis": [
                        "TON Blockchain API",
                        "Binance API (–¥–ª—è –∫—É—Ä—Å–∞ TON/USD)",
                        "CoinGecko API (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –¥–ª—è –∫—É—Ä—Å–∞)"
                    ],
                    "env_vars": [
                        {"name": "TON_WALLET_ADDRESS", "description": "–ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã"},
                        {"name": "TON_WALLET_SEED", "description": "Seed —Ñ—Ä–∞–∑–∞ –∫–æ—à–µ–ª—å–∫–∞ (–ö–†–ò–¢–ò–ß–ù–û: –≤ —Å–µ–∫—Ä–µ—Ç–∞—Ö!)"},
                        {"name": "TON_NETWORK", "description": "mainnet –∏–ª–∏ testnet"},
                        {"name": "TON_API_KEY", "description": "API –∫–ª—é—á –¥–ª—è TON Center (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)"}
                    ]
                },
                success_criteria=[
                    "TONPaymentService —Å–æ–∑–¥–∞–Ω –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è",
                    "–ú–µ—Ç–æ–¥—ã get_ton_exchange_rate –∏ usd_to_ton —Ä–∞–±–æ—Ç–∞—é—Ç",
                    "–ú–µ—Ç–æ–¥ send_ton_payment –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–∞ testnet",
                    "–ú–µ—Ç–æ–¥—ã process_revenue_share_payment –∏ process_referral_commissions_batch —Ä–∞–±–æ—Ç–∞—é—Ç",
                    "–í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ ton_payments"
                ]
            )
        },
        {
            "title": "–≠—Ç–∞–ø 3.3: –°–æ–∑–¥–∞–Ω–∏–µ TON Exchange Rate Updater",
            "priority": 3,  # Medium
            "description": create_task_description(
                context_problem="–ö—É—Ä—Å TON/USD –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è. –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ USD‚ÜíTON –ø—Ä–∏ –≤—ã–ø–ª–∞—Ç–∞—Ö –Ω—É–∂–µ–Ω –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –∫—É—Ä—Å. –°–µ–π—á–∞—Å –µ–≥–æ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –≤—Ä—É—á–Ω—É—é.",
                context_situation="–£ –Ω–∞—Å –±—É–¥–µ—Ç —Ç–∞–±–ª–∏—Ü–∞ ton_exchange_rates, –Ω–æ –Ω–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—É—Ä—Å–∞ –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.",
                context_why="–ê–∫—Ç—É–∞–ª—å–Ω—ã–π –∫—É—Ä—Å TON/USD –∫—Ä–∏—Ç–∏—á–µ–Ω –¥–ª—è —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã—Ö –≤—ã–ø–ª–∞—Ç. –ï—Å–ª–∏ –∫—É—Ä—Å —É—Å—Ç–∞—Ä–µ–ª, –ø–∞—Ä—Ç–Ω–µ—Ä—ã –ø–æ–ª—É—á–∞—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—É–º–º—É.",
                goal_what="–°–æ–∑–¥–∞—Ç—å ton_exchange_rate_updater.py –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –∫—É—Ä—Å TON/USD –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö API (Binance –∏–ª–∏ CoinGecko) –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ –ë–î.",
                goal_why="–ß—Ç–æ–±—ã –∫—É—Ä—Å TON/USD –≤—Å–µ–≥–¥–∞ –±—ã–ª –∞–∫—Ç—É–∞–ª—å–Ω—ã–º –∏ –≤—ã–ø–ª–∞—Ç—ã –±—ã–ª–∏ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–º–∏.",
                goal_benefits="–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞. –°–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–µ –≤—ã–ø–ª–∞—Ç—ã. –ù–µ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –≤—Ä—É—á–Ω—É—é.",
                steps=[
                    {
                        "title": "–°–æ–∑–¥–∞—Ç—å ton_exchange_rate_updater.py",
                        "action": "–°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å —Å —Ñ—É–Ω–∫—Ü–∏–µ–π update_ton_exchange_rate –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É—Ä—Å–∞ –∏–∑ Binance API",
                        "check": "–ú–æ–¥—É–ª—å —Å–æ–∑–¥–∞–Ω, —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç –∫—É—Ä—Å TON/USDT –∏–∑ Binance"
                    },
                    {
                        "title": "–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î",
                        "action": "–§—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∫—É—Ä—Å –≤ ton_exchange_rates, –æ–±–Ω–æ–≤–ª—è—Ç—å effective_until –¥–ª—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∫—É—Ä—Å–∞",
                        "check": "–ö—É—Ä—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏"
                    },
                    {
                        "title": "–î–æ–±–∞–≤–∏—Ç—å fallback –Ω–∞ CoinGecko",
                        "action": "–ï—Å–ª–∏ Binance –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CoinGecko API",
                        "check": "–ï—Å—Ç—å –¥–≤–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∫—É—Ä—Å–∞ —Å fallback"
                    },
                    {
                        "title": "–°–æ–∑–¥–∞—Ç—å cron –∑–∞–¥–∞—á—É",
                        "action": "–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∑–∞–ø—É—Å–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—É—Ä—Å–∞ —Ä–∞–∑ –≤ —á–∞—Å (—á–µ—Ä–µ–∑ Fly.io Cron Jobs –∏–ª–∏ –¥—Ä—É–≥–æ–π scheduler)",
                        "check": "–ö—É—Ä—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑ –≤ —á–∞—Å"
                    },
                    {
                        "title": "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ",
                        "action": "–ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫—É—Ä—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è",
                        "check": "–ö—É—Ä—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î"
                    }
                ],
                tech_details={
                    "files": [
                        {"path": "ton_exchange_rate_updater.py", "description": "–ú–æ–¥—É–ª—å –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—É—Ä—Å–∞ TON/USD"}
                    ],
                    "apis": [
                        "Binance API (https://api.binance.com/api/v3/ticker/price?symbol=TONUSDT)",
                        "CoinGecko API (https://api.coingecko.com/api/v3/simple/price?ids=the-open-network&vs_currencies=usd)"
                    ],
                    "env_vars": []
                },
                success_criteria=[
                    "–ú–æ–¥—É–ª—å –ø–æ–ª—É—á–∞–µ—Ç –∫—É—Ä—Å TON/USD –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö API",
                    "–ö—É—Ä—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ ton_exchange_rates",
                    "–ï—Å—Ç—å fallback –Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫",
                    "–ù–∞—Å—Ç—Ä–æ–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Ä–∞–∑ –≤ —á–∞—Å"
                ]
            )
        },
        {
            "title": "–≠—Ç–∞–ø 4: –°–æ–∑–¥–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –≤—ã–ø–ª–∞—Ç",
            "priority": 2,
            "description": create_task_description(
                context_problem="–ö–æ–º–∏—Å—Å–∏–∏ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –≤ –ë–î, –Ω–æ –≤—ã–ø–ª–∞—Ç—ã –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é. –ù—É–∂–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã–ø–ª–∞—Ç Revenue Share (–µ–∂–µ–º–µ—Å—è—á–Ω–æ) –∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –∫–æ–º–∏—Å—Å–∏–π (–ø–æ –ø–æ—Ä–æ–≥—É –∏–ª–∏ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ).",
                context_situation="–£ –Ω–∞—Å –µ—Å—Ç—å TONPaymentService, –Ω–æ –Ω–µ—Ç —Å–∫—Ä–∏–ø—Ç–∞ –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—ã–ø–ª–∞—Ç—ã.",
                context_why="–ë–µ–∑ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—ã–ø–ª–∞—Ç—ã, —á—Ç–æ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ—à–∏–±–∫–∞–º.",
                goal_what="–°–æ–∑–¥–∞—Ç—å cron_payout_processor.py –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—ã–ø–ª–∞—Ç—ã Revenue Share (–µ–∂–µ–º–µ—Å—è—á–Ω–æ) –∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –∫–æ–º–∏—Å—Å–∏–π (–ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é).",
                goal_why="–ß—Ç–æ–±—ã –≤—ã–ø–ª–∞—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏–ª–∏—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ–∑ —É—á–∞—Å—Ç–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.",
                goal_benefits="–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã–ø–ª–∞—Ç—ã. –ú–µ–Ω—å—à–µ —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã. –°–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤—ã–ø–ª–∞—Ç—ã –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º.",
                steps=[
                    {
                        "title": "–°–æ–∑–¥–∞—Ç—å cron_payout_processor.py",
                        "action": "–°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ process_monthly_revenue_share_payouts –∏ process_referral_commissions_payouts",
                        "check": "–ú–æ–¥—É–ª—å —Å–æ–∑–¥–∞–Ω —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–ø–ª–∞—Ç"
                    },
                    {
                        "title": "–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å process_monthly_revenue_share_payouts",
                        "action": "–§—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞: 1) –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∞—Å—á–µ—Ç Revenue Share –∑–∞ –ø—Ä–æ—à–ª—ã–π –º–µ—Å—è—Ü –µ—Å–ª–∏ –µ—â–µ –Ω–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–æ, 2) –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ approved –≤—ã–ø–ª–∞—Ç—ã, 3) –î–ª—è –∫–∞–∂–¥–æ–π –≤—ã–ø–ª–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ TON –∫–æ—à–µ–ª—å–∫–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ TONPaymentService",
                        "check": "–§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ approved Revenue Share –≤—ã–ø–ª–∞—Ç—ã"
                    },
                    {
                        "title": "–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å process_referral_commissions_payouts",
                        "action": "–§—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞: 1) –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ —Å pending –∫–æ–º–∏—Å—Å–∏—è–º–∏, 2) –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É–º–º—É –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã—Ö –∫–æ–º–∏—Å—Å–∏–π, 3) –ï—Å–ª–∏ >= $10 (–ø–æ—Ä–æ–≥) ‚Üí –≤—ã–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ TONPaymentService",
                        "check": "–§—É–Ω–∫—Ü–∏—è –≤—ã–ø–ª–∞—á–∏–≤–∞–µ—Ç –∫–æ–º–∏—Å—Å–∏–∏ –µ—Å–ª–∏ —Å—É–º–º–∞ >= –ø–æ—Ä–æ–≥–∞"
                    },
                    {
                        "title": "–î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫",
                        "action": "–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è. –û—à–∏–±–∫–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –¥—Ä—É–≥–∏—Ö –≤—ã–ø–ª–∞—Ç.",
                        "check": "–õ–æ–≥–∏ –ø–∏—à—É—Ç—Å—è, –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è gracefully"
                    },
                    {
                        "title": "–ù–∞—Å—Ç—Ä–æ–∏—Ç—å cron –∑–∞–¥–∞—á–∏",
                        "action": "–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∑–∞–ø—É—Å–∫: Revenue Share - 1-–≥–æ —á–∏—Å–ª–∞ –º–µ—Å—è—Ü–∞, —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ - –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –∏–ª–∏ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ",
                        "check": "Cron –∑–∞–¥–∞—á–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ Fly.io –∏–ª–∏ –¥—Ä—É–≥–æ–º scheduler"
                    },
                    {
                        "title": "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ",
                        "action": "–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ testnet",
                        "check": "–í—ã–ø–ª–∞—Ç—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ testnet"
                    }
                ],
                tech_details={
                    "files": [
                        {"path": "cron_payout_processor.py", "description": "–ú–æ–¥—É–ª—å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã–ø–ª–∞—Ç"}
                    ],
                    "apis": [],
                    "env_vars": []
                },
                success_criteria=[
                    "–ú–æ–¥—É–ª—å —Å–æ–∑–¥–∞–Ω —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã–ø–ª–∞—Ç",
                    "Revenue Share –≤—ã–ø–ª–∞—á–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ 1-–≥–æ —á–∏—Å–ª–∞",
                    "–†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏ –≤—ã–ø–ª–∞—á–∏–≤–∞—é—Ç—Å—è –ø–æ –ø–æ—Ä–æ–≥—É –∏–ª–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é",
                    "–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è",
                    "Cron –∑–∞–¥–∞—á–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã"
                ]
            )
        },
        {
            "title": "–≠—Ç–∞–ø 5: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Telegram Bot –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤",
            "priority": 3,
            "description": create_task_description(
                context_problem="–ü–∞—Ä—Ç–Ω–µ—Ä–∞–º –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å–≤–æ–π TON –∫–æ—à–µ–ª–µ–∫ –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ TON –≤—ã–ø–ª–∞—Ç —á–µ—Ä–µ–∑ –±–æ—Ç–∞. –°–µ–π—á–∞—Å —Ç–∞–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–µ—Ç.",
                context_situation="–£ –Ω–∞—Å –µ—Å—Ç—å –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–π –±–æ—Ç (partner_bot.py –∏–ª–∏ admin_bot.py), –Ω–æ –Ω–µ—Ç –∫–æ–º–∞–Ω–¥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å TON –∫–æ—à–µ–ª—å–∫–∞–º–∏.",
                context_why="–ü–∞—Ä—Ç–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ª–µ–≥–∫–æ —É–∫–∞–∑–∞—Ç—å —Å–≤–æ–π TON –∫–æ—à–µ–ª–µ–∫ –∏ —É–≤–∏–¥–µ—Ç—å —Å—Ç–∞—Ç—É—Å —Å–≤–æ–∏—Ö –∫–æ–º–∏—Å—Å–∏–π –∏ –≤—ã–ø–ª–∞—Ç.",
                goal_what="–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤ –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–π –±–æ—Ç: /ton_wallet_set, /ton_wallet_info, /ton_payments_enable, /pending_commissions, /request_payout.",
                goal_why="–ß—Ç–æ–±—ã –ø–∞—Ä—Ç–Ω–µ—Ä—ã –º–æ–≥–ª–∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–∏–º–∏ TON –≤—ã–ø–ª–∞—Ç–∞–º–∏ —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±–æ—Ç–∞.",
                goal_benefits="–£–¥–æ–±—Å—Ç–≤–æ –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤. –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ TON –∫–æ—à–µ–ª—å–∫–∞. –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∫–æ–º–∏—Å—Å–∏–π.",
                steps=[
                    {
                        "title": "–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É /ton_wallet_set",
                        "action": "–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è TON –∫–æ—à–µ–ª—å–∫–∞. –ù—É–∂–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∞–¥—Ä–µ—Å–∞ TON –∫–æ—à–µ–ª—å–∫–∞.",
                        "check": "–ü–∞—Ä—Ç–Ω–µ—Ä –º–æ–∂–µ—Ç —É–∫–∞–∑–∞—Ç—å –∫–æ—à–µ–ª–µ–∫ —á–µ—Ä–µ–∑ /ton_wallet_set <address>"
                    },
                    {
                        "title": "–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É /ton_wallet_info",
                        "action": "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º TON –∫–æ—à–µ–ª—å–∫–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤—ã–ø–ª–∞—Ç",
                        "check": "–ö–æ–º–∞–Ω–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ –∏ —Å—Ç–∞—Ç—É—Å TON –≤—ã–ø–ª–∞—Ç"
                    },
                    {
                        "title": "–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–ø–ª–∞—Ç–∞–º–∏",
                        "action": "/ton_payments_enable –∏ /ton_payments_disable –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è TON –≤—ã–ø–ª–∞—Ç",
                        "check": "–ü–∞—Ä—Ç–Ω–µ—Ä –º–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å/–≤—ã–∫–ª—é—á–∞—Ç—å TON –≤—ã–ø–ª–∞—Ç—ã"
                    },
                    {
                        "title": "–î–æ–±–∞–≤–∏—Ç—å /pending_commissions",
                        "action": "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏ (Revenue Share + —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ) –≤ USD –∏ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç –≤ TON",
                        "check": "–ö–æ–º–∞–Ω–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—É–º–º—É pending –∫–æ–º–∏—Å—Å–∏–π"
                    },
                    {
                        "title": "–î–æ–±–∞–≤–∏—Ç—å /request_payout",
                        "action": "–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä—É –∑–∞–ø—Ä–æ—Å–∏—Ç—å –≤—ã–ø–ª–∞—Ç—É –µ—Å–ª–∏ –Ω–∞–∫–æ–ø–∏–ª–æ—Å—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ (>= –ø–æ—Ä–æ–≥–∞)",
                        "check": "–ü–∞—Ä—Ç–Ω–µ—Ä –º–æ–∂–µ—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç—å –≤—ã–ø–ª–∞—Ç—É –µ—Å–ª–∏ —Å—É–º–º–∞ >= $10"
                    },
                    {
                        "title": "–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é TON –∞–¥—Ä–µ—Å–æ–≤",
                        "action": "–§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∞ TON –∞–¥—Ä–µ—Å–∞ (EQ... —Ñ–æ—Ä–º–∞—Ç)",
                        "check": "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º"
                    },
                    {
                        "title": "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ",
                        "action": "–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã —Å —Ç–µ—Å—Ç–æ–≤—ã–º –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º",
                        "check": "–í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ"
                    }
                ],
                tech_details={
                    "files": [
                        {"path": "partner_bot.py", "description": "–ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–π –±–æ—Ç (–∏–ª–∏ admin_bot.py)"},
                        {"path": "ton_payment_service.py", "description": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–º–∏—Å—Å–∏—è—Ö"}
                    ],
                    "apis": ["Telegram Bot API"],
                    "env_vars": []
                },
                success_criteria=[
                    "–í—Å–µ –∫–æ–º–∞–Ω–¥—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç",
                    "TON –∞–¥—Ä–µ—Å–∞ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è",
                    "–ü–∞—Ä—Ç–Ω–µ—Ä—ã –º–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ TON –≤—ã–ø–ª–∞—Ç",
                    "–ü–∞—Ä—Ç–Ω–µ—Ä—ã –≤–∏–¥—è—Ç —Å–≤–æ–∏ pending –∫–æ–º–∏—Å—Å–∏–∏"
                ]
            )
        }
    ]
    
    print("üöÄ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –≤ Linear –¥–ª—è TON –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏...\n")
    
    created_count = 0
    failed_count = 0
    
    for task in tasks:
        print(f"üìù –°–æ–∑–¥–∞—é –∑–∞–¥–∞—á—É: {task['title']}")
        
        result = create_linear_task(
            title=task['title'],
            description=task['description'],
            team_key=TEAM_KEY,
            priority=task['priority']
        )
        
        if result['success']:
            print(f"   ‚úÖ –°–æ–∑–¥–∞–Ω–∞: {result['identifier']} - {result['url']}\n")
            created_count += 1
        else:
            print(f"   ‚ùå –û—à–∏–±–∫–∞: {result['error']}\n")
            failed_count += 1
    
    print("=" * 60)
    print(f"‚úÖ –°–æ–∑–¥–∞–Ω–æ –∑–∞–¥–∞—á: {created_count}")
    if failed_count > 0:
        print(f"‚ùå –û—à–∏–±–æ–∫: {failed_count}")
    print("=" * 60)


if __name__ == "__main__":
    create_all_tasks()
