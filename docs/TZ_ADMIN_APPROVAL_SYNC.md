# –¢–ó: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ–¥–æ–±—Ä–µ–Ω–∏—è –∑–∞—è–≤–æ–∫ –º–µ–∂–¥—É –∞–¥–º–∏–Ω–∞–º–∏

## 1. –¶–µ–ª—å

–ü—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ –≤—Ö–æ–¥—è—â–µ–π –∑–∞—è–≤–∫–∏ –æ–¥–Ω–∏–º –∞–¥–º–∏–Ω–æ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∞–¥–º–∏–Ω—ã –¥–æ–ª–∂–Ω—ã:
1. **–í–∏–¥–µ—Ç—å**, —á—Ç–æ –∑–∞—è–≤–∫–∞ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ (–ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –ø—Ä–æ—Å–º–æ—Ç—Ä–µ —Å–ø–∏—Å–∫–∞ –∏–ª–∏ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É)
2. **–ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ** –æ —Ç–æ–º, —á—Ç–æ –∑–∞—è–≤–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ –¥—Ä—É–≥–∏–º –∞–¥–º–∏–Ω–æ–º

## 2. –û–±–ª–∞—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

**–¢–∏–ø –∑–∞—è–≤–æ–∫:** –ó–∞—è–≤–∫–∏ –Ω–∞ –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–æ (`partner_applications`).

> –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¢–ó –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –Ω–∞: —É—Å–ª—É–≥–∏ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤ (`services`), UGC, B2B-—Å–¥–µ–ª–∫–∏ –∏ —Ç.–ø. ‚Äî –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ–º—É –∑–∞–ø—Ä–æ—Å—É.

## 3. –¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

- –°–ø–∏—Å–æ–∫ ¬´–ó–∞—è–≤–∫–∏ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é¬ª (`admin_partners_pending`) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ `status === 'pending'`.
- –ö–∞–∂–¥—ã–π –∞–¥–º–∏–Ω –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–Ω–æ–ø–∫–∞–º–∏ ¬´–û–¥–æ–±—Ä–∏—Ç—å¬ª / ¬´–û—Ç–∫–ª–æ–Ω–∏—Ç—å¬ª.
- –ü—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏:
  - –°–æ–æ–±—â–µ–Ω–∏–µ **—É –∞–¥–º–∏–Ω–∞, –Ω–∞–∂–∞–≤—à–µ–≥–æ –∫–Ω–æ–ø–∫—É**, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è (–¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è ¬´–°–¢–ê–¢–£–°: –û–¥–æ–±—Ä–µ–Ω–∞/–û—Ç–∫–ª–æ–Ω–µ–Ω–∞¬ª).
  - –°–æ–æ–±—â–µ–Ω–∏—è **—É –¥—Ä—É–≥–∏—Ö –∞–¥–º–∏–Ω–æ–≤** –Ω–µ –º–µ–Ω—è—é—Ç—Å—è ‚Äî –æ–Ω–∏ –æ—Å—Ç–∞—é—Ç—Å—è —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏.
  - –ü–∞—Ä—Ç–Ω—ë—Ä –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–æ–º –±–æ—Ç–µ.

**–ü—Ä–æ–±–ª–µ–º—ã:**
1. –î—Ä—É–≥–æ–π –∞–¥–º–∏–Ω –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –Ω–∞–∂–∞—Ç—å ¬´–û–¥–æ–±—Ä–∏—Ç—å¬ª –Ω–∞ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–π –∑–∞—è–≤–∫–µ.
2. –î—Ä—É–≥–∏–µ –∞–¥–º–∏–Ω—ã –Ω–µ —É–∑–Ω–∞—é—Ç, —á—Ç–æ –∑–∞—è–≤–∫–∞ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞, –ø–æ–∫–∞ –Ω–µ –æ–±–Ω–æ–≤—è—Ç —Å–ø–∏—Å–æ–∫.

## 4. –¢—Ä–µ–±—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

### 4.1. –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –æ–¥–æ–±—Ä–µ–Ω–∏—è

–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ ¬´–û–¥–æ–±—Ä–∏—Ç—å¬ª –∏–ª–∏ ¬´–û—Ç–∫–ª–æ–Ω–∏—Ç—å¬ª:
- –ü–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ –≤ –ë–î.
- –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å —É–∂–µ –Ω–µ `pending`:
  - –û–±–Ω–æ–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —É –Ω–∞–∂–∞–≤—à–µ–≥–æ –∞–¥–º–∏–Ω–∞: ¬´–ó–∞—è–≤–∫–∞ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ (–æ–¥–æ–±—Ä–µ–Ω–∞/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∞ –¥—Ä—É–≥–∏–º –∞–¥–º–∏–Ω–æ–º)¬ª.
  - –£–±—Ä–∞—Ç—å –∫–Ω–æ–ø–∫–∏ –∏–ª–∏ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ ¬´‚óÄÔ∏è –ù–∞–∑–∞–¥¬ª.
  - –ù–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ë–î –∏ –Ω–µ —Å–ª–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä—É.

### 4.2. –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å, –≤–∏–¥–∏–º–∞—è –≤—Å–µ–º –∞–¥–º–∏–Ω–∞–º

–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –æ–¥–æ–±—Ä–µ–Ω–∏–∏ –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ –∑–∞—è–≤–∫–∏ ‚Äî **–æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –æ–±—â–∏–π —á–∞—Ç**, —á—Ç–æ–±—ã –≤—Å–µ –∞–¥–º–∏–Ω—ã –≤–∏–¥–µ–ª–∏ –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ.

**–í–∞—Ä–∏–∞–Ω—Ç A (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π): –æ–±—â–∏–π —á–∞—Ç –∞–¥–º–∏–Ω–æ–≤**

- –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `ADMIN_GROUP_CHAT_ID` ‚Äî ID Telegram-–≥—Ä—É–ø–ø—ã –∏–ª–∏ –∫–∞–Ω–∞–ª–∞, –∫—É–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω –∞–¥–º–∏–Ω—Å–∫–∏–π –±–æ—Ç.
- –ü—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å **–æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ** –≤ —ç—Ç–æ—Ç —á–∞—Ç.
- –í—Å–µ –∞–¥–º–∏–Ω—ã –≤ –≥—Ä—É–ø–ø–µ –≤–∏–¥—è—Ç –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.

**–í–∞—Ä–∏–∞–Ω—Ç B (fallback): –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è**

- –ï—Å–ª–∏ `ADMIN_GROUP_CHAT_ID` –Ω–µ –∑–∞–¥–∞–Ω ‚Äî —Ä–∞—Å—Å—ã–ª–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–∞–∂–¥–æ–º—É –∞–¥–º–∏–Ω—É –∏–∑ `ADMIN_CHAT_ID` (–∫—Ä–æ–º–µ —Ç–æ–≥–æ, –∫—Ç–æ –≤—ã–ø–æ–ª–Ω–∏–ª –¥–µ–π—Å—Ç–≤–∏–µ).

**–§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è:**
```
üìã –ó–∞—è–≤–∫–∞ –Ω–∞ –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞

ID: {chat_id}
–ö–æ–º–ø–∞–Ω–∏—è: {company_name}
–°—Ç–∞—Ç—É—Å: –û–¥–æ–±—Ä–µ–Ω–∞ / –û—Ç–∫–ª–æ–Ω–µ–Ω–∞
–û–±—Ä–∞–±–æ—Ç–∞–ª: –∞–¥–º–∏–Ω {chat_id_–∞–¥–º–∏–Ω–∞}
```

### 4.3. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å–ø–∏—Å–∫–∞

- –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ ¬´–ó–∞—è–≤–∫–∏ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é¬ª –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞—è–≤–∫–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `pending`.
- –£–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏ –≤ —Å–ø–∏—Å–æ–∫ –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç ‚Äî —Ç–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è.

## 5. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### 5.1. –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|------|-----------|
| `cloudflare/workers/admin-webhook/handlers/partners.js` | –õ–æ–≥–∏–∫–∞ –≤ `handlePartnerApproval` –∏ `updatePartnerStatus` |

### 5.2. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `updatePartnerStatus`

- –ü–µ—Ä–µ–¥ PATCH: –∑–∞–ø—Ä–æ—Å–∏—Ç—å —Ç–µ–∫—É—â—É—é –∑–∞—è–≤–∫—É –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å `status`.
- –ï—Å–ª–∏ `status !== 'pending'`: –≤–µ—Ä–Ω—É—Ç—å `{ success: false, alreadyProcessed: true, currentStatus }`.
- –ï—Å–ª–∏ `status === 'pending'`: –≤—ã–ø–æ–ª–Ω–∏—Ç—å PATCH –∫–∞–∫ —Å–µ–π—á–∞—Å.

### 5.3. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `handlePartnerApproval`

1. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–ª—É—á–∞–π `alreadyProcessed`:
   - –û–±–Ω–æ–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ: ¬´–ó–∞—è–≤–∫–∞ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ (–æ–¥–æ–±—Ä–µ–Ω–∞/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∞)¬ª.
   - –£–±—Ä–∞—Ç—å –∫–Ω–æ–ø–∫–∏.
   - `answerCallbackQuery` —Å —Ç–µ–∫—Å—Ç–æ–º ¬´–£–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞¬ª.

2. –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏:
   - –í—ã–∑–≤–∞—Ç—å `notifyOtherAdmins(env, adminWhoActedChatId, partnerApplication, newStatus)`.
   - –ü–µ—Ä–µ–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏ –∏ chat_id –∞–¥–º–∏–Ω–∞, –≤—ã–ø–æ–ª–Ω–∏–≤—à–µ–≥–æ –¥–µ–π—Å—Ç–≤–∏–µ.

### 5.4. –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `notifyOtherAdmins`

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –µ—Å–ª–∏ –∑–∞–¥–∞–Ω `ADMIN_GROUP_CHAT_ID` ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É. –ò–Ω–∞—á–µ ‚Äî –≤ –ª–∏—á–∫—É –∫–∞–∂–¥–æ–º—É –∞–¥–º–∏–Ω—É (–∫—Ä–æ–º–µ —Ç–æ–≥–æ, –∫—Ç–æ –Ω–∞–∂–∞–ª).

```js
async function notifyOtherAdmins(env, adminWhoActedChatId, application, newStatus) {
  const statusText = newStatus === 'Approved' ? '–û–¥–æ–±—Ä–µ–Ω–∞' : '–û—Ç–∫–ª–æ–Ω–µ–Ω–∞';
  const text = `üìã –ó–∞—è–≤–∫–∞ –Ω–∞ –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞\n\nID: ${application.chat_id}\n–ö–æ–º–ø–∞–Ω–∏—è: ${application.company_name || '‚Äî'}\n–°—Ç–∞—Ç—É—Å: ${statusText}\n–û–±—Ä–∞–±–æ—Ç–∞–ª: –∞–¥–º–∏–Ω ${adminWhoActedChatId}`;

  // –í–∞—Ä–∏–∞–Ω—Ç A: –æ–±—â–∏–π —á–∞—Ç ‚Äî –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ, –≤–∏–¥–Ω–æ –≤—Å–µ–º
  const groupChatId = (env.ADMIN_GROUP_CHAT_ID || '').trim();
  if (groupChatId) {
    try {
      await sendTelegramMessage(env.ADMIN_BOT_TOKEN, groupChatId, text);
    } catch (e) {
      logError('notifyOtherAdmins', e, { groupChatId });
    }
    return;
  }

  // –í–∞—Ä–∏–∞–Ω—Ç B: –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–∞–∂–¥–æ–º—É –∞–¥–º–∏–Ω—É
  const adminIds = (env.ADMIN_CHAT_ID || '').split(',').map(id => String(id.trim())).filter(Boolean);
  for (const adminChatId of adminIds) {
    if (adminChatId === String(adminWhoActedChatId)) continue;
    try {
      await sendTelegramMessage(env.ADMIN_BOT_TOKEN, adminChatId, text);
    } catch (e) {
      logError('notifyOtherAdmins', e, { adminChatId });
    }
  }
}
```

### 5.5. –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è ¬´–∫—Ç–æ –æ–¥–æ–±—Ä–∏–ª¬ª

- `excludingChatId` = `callbackQuery.message.chat.id` ‚Äî —ç—Ç–æ chat_id –∞–¥–º–∏–Ω–∞, –Ω–∞–∂–∞–≤—à–µ–≥–æ –∫–Ω–æ–ø–∫—É.
- –í —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏ –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å ¬´–û–±—Ä–∞–±–æ—Ç–∞–ª: –∞–¥–º–∏–Ω {chat_id}¬ª –∏–ª–∏, –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –≤ –ë–î —Ç–∞–±–ª–∏—Ü—ã –∞–¥–º–∏–Ω–æ–≤ —Å –∏–º–µ–Ω–∞–º–∏, ‚Äî –∏–º—è. –ù–∞ –ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ chat_id.

### 5.6. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|----------|
| `ADMIN_GROUP_CHAT_ID` | (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ID –≥—Ä—É–ø–ø—ã/–∫–∞–Ω–∞–ª–∞ Telegram. –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—É. –ü—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ ‚Äî –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —ç—Ç–æ—Ç —á–∞—Ç, –≤–∏–¥–∏–º–æ–µ –≤—Å–µ–º –∞–¥–º–∏–Ω–∞–º. |
| `ADMIN_CHAT_ID` | –°–ø–∏—Å–æ–∫ chat_id –∞–¥–º–∏–Ω–æ–≤ (comma-separated). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ –∏ –¥–ª—è –ª–∏—á–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, –µ—Å–ª–∏ `ADMIN_GROUP_CHAT_ID` –Ω–µ –∑–∞–¥–∞–Ω. |

**–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å ID –≥—Ä—É–ø–ø—ã:** –¥–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É, –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É, –æ—Ç–∫—Ä—ã—Ç—å `https://api.telegram.org/bot<TOKEN>/getUpdates` ‚Äî –≤ –æ—Ç–≤–µ—Ç–µ –±—É–¥–µ—Ç `chat.id` (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ –¥–ª—è –≥—Ä—É–ø–ø).

## 6. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ edge-cases

1. **–û–±—â–∏–π —á–∞—Ç:** –ø—Ä–∏ –∑–∞–¥–∞–Ω–Ω–æ–º `ADMIN_GROUP_CHAT_ID` —Å–æ–æ–±—â–µ–Ω–∏–µ —É—Ö–æ–¥–∏—Ç –≤ –≥—Ä—É–ø–ø—É ‚Äî –≤—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –≤–∏–¥—è—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ.
2. **–û–¥–∏–Ω –∞–¥–º–∏–Ω:** –µ—Å–ª–∏ `ADMIN_CHAT_ID` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∞ –∏ –≥—Ä—É–ø–ø–∞ –Ω–µ –∑–∞–¥–∞–Ω–∞ ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥—Ä—É–≥–∏–º –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è.
3. **–û—à–∏–±–∫–∏ Telegram API:** –ø—Ä–∏ —Å–±–æ–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å, –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫.
4. **–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ:** —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∏ –ø—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏, –∏ –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏.

## 7. –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- [ ] –í `updatePartnerStatus`: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞, –≤–æ–∑–≤—Ä–∞—Ç `alreadyProcessed` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- [ ] –í `handlePartnerApproval`: –æ–±—Ä–∞–±–æ—Ç–∫–∞ `alreadyProcessed` (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, —Å–Ω—è—Ç–∏–µ –∫–Ω–æ–ø–æ–∫)
- [ ] –§—É–Ω–∫—Ü–∏—è `notifyOtherAdmins` –≤ `partners.js` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: `ADMIN_GROUP_CHAT_ID` ‚Üí –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
- [ ] –í—ã–∑–æ–≤ `notifyOtherAdmins` –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –æ–¥–æ–±—Ä–µ–Ω–∏–∏/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å `ADMIN_GROUP_CHAT_ID` –≤ wrangler.toml (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π) –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∏ –¥–µ–ø–ª–æ–µ
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –≥—Ä—É–ø–ø–∞ —Å –∞–¥–º–∏–Ω–∞–º–∏ ‚Äî –æ–¥–æ–±—Ä–µ–Ω–∏–µ ‚Üí –≤—Å–µ –≤–∏–¥—è—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø–µ
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –≤—Ç–æ—Ä–æ–π –∞–¥–º–∏–Ω –Ω–∞–∂–∏–º–∞–µ—Ç ¬´–û–¥–æ–±—Ä–∏—Ç—å¬ª –Ω–∞ —É–∂–µ –æ–¥–æ–±—Ä–µ–Ω–Ω–æ–π ‚Äî –≤–∏–¥–∏—Ç ¬´–£–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞¬ª

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2025-02-25
