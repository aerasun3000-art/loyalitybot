# ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –±–æ—Ç–∞-–ø–æ—Å—Ä–µ–¥–Ω–∏–∫–∞

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

**–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –†–∞–∑–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ä–∞–∑–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –æ—Ç–∫—Ä—ã—Ç—å –ø–µ—Ä–µ–ø–∏—Å–∫—É —Å–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º. –ü—Ä—è–º–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–µ—Ä–µ–ø–∏—Å–∫–∏ —á–µ—Ä–µ–∑ `tg.openTelegramLink()` –∏–ª–∏ `tg.openLink()` —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ –∏–∑-–∑–∞:
- –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è Telegram Web App
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π iframe
- –†–∞–∑–ª–∏—á–∏–π –≤ –≤–µ—Ä—Å–∏—è—Ö Telegram –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- –û—à–∏–±–æ–∫ "–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ë–æ—Ç –∫–∞–∫ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫ (–ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±—Ö–æ–¥–∏—Ç –ø—Ä–æ–±–ª–µ–º—É)

**–í–º–µ—Å—Ç–æ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø—Ä—è–º–æ–π –ø–µ—Ä–µ–ø–∏—Å–∫–∏** ‚Üí **–û—Ç–∫—Ä—ã–≤–∞–µ–º –±–æ—Ç–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `/start contact_<base64_data>`**

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ö–ª–∏–µ–Ω—Ç –Ω–∞–∂–∏–º–∞–µ—Ç "–ù–∞–ø–∏—Å–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É"** –≤ Web App
2. **–§–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ** (partner_chat_id, client_chat_id, service_title, message_text)
3. **–î–∞–Ω–Ω—ã–µ –∫–æ–¥–∏—Ä—É—é—Ç—Å—è –≤ base64** –∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `/start` –ø–∞—Ä–∞–º–µ—Ç—Ä
4. **–û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±–æ—Ç** —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `contact_<base64_data>`
5. **–ë–æ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å:**
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ë–î
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä—É
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π "üí¨ –û—Ç–∫—Ä—ã—Ç—å –ø–µ—Ä–µ–ø–∏—Å–∫—É"
6. **–í—Å—è –ø–µ—Ä–µ–ø–∏—Å–∫–∞** –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ä–∞–∑–¥–µ–ª–µ "–ú–æ–∏ —Å–æ–æ–±—â–µ–Ω–∏—è" –≤ –±–æ—Ç–µ

## üìù –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–±—Ö–æ–¥–∏—Ç –ø—Ä–æ–±–ª–µ–º—É –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫—ç—à–∞ Web App
- –†–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∏—è –ø—Ä—è–º–æ–π –ø–µ—Ä–µ–ø–∏—Å–∫–∏

### ‚úÖ –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å
- –ë–æ—Ç –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–µ–Ω (–Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç username –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- –°–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î –¥–∞–∂–µ –µ—Å–ª–∏ –ø–∞—Ä—Ç–Ω—ë—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- –ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏ –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞

### ‚úÖ –£–¥–æ–±—Å—Ç–≤–æ
- –í—Å—è –ø–µ—Ä–µ–ø–∏—Å–∫–∞ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ (–≤ –±–æ—Ç–µ)
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–∞—Ä—Ç–Ω—ë—Ä—É —á–µ—Ä–µ–∑ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–æ–≥–æ –±–æ—Ç–∞
- –ö–ª–∏–µ–Ω—Ç –≤–∏–¥–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏ –º–æ–∂–µ—Ç –æ—Ç–∫—Ä—ã—Ç—å –ø–µ—Ä–µ–ø–∏—Å–∫—É

### ‚úÖ –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –≤–µ—Ä—Å–∏—è–º–∏ Telegram
- –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–µ—Ä—Å–∏–∏ Telegram Web App
- –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–µ—Ç–æ–¥–æ–≤ `openTelegramLink`/`openLink`
- –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `/start` –ø–∞—Ä–∞–º–µ—Ç—Ä

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§—Ä–æ–Ω—Ç–µ–Ω–¥ (`Services.jsx`)

```javascript
// –§–æ—Ä–º–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ—Ä–µ–∑ –±–æ—Ç–∞
const contactData = {
  action: 'contact_specialist',
  partner_chat_id: selectedService.partner_chat_id,
  client_chat_id: chatId,
  service_title: serviceTitle,
  service_id: selectedService.id || null,
  partner_name: partnerName,
  message_text: `–•–æ—á—É –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —É—Å–ª—É–≥—É "${serviceTitle}"`,
  timestamp: Date.now()
}

// –ö–æ–¥–∏—Ä—É–µ–º –≤ base64
const contactDataBase64 = btoa(JSON.stringify(contactData))

// –û—Ç–∫—Ä—ã–≤–∞–µ–º –±–æ—Ç–∞
const botLink = `https://t.me/loyalitybot?start=contact_${contactDataBase64}`
tg.openTelegramLink(botLink)
```

### –ë—ç–∫–µ–Ω–¥ (`client_handler.py`)

```python
# –û–±—Ä–∞–±–æ—Ç–∫–∞ /start contact_<base64>
if start_param.startswith('contact_'):
    # –î–µ–∫–æ–¥–∏—Ä—É–µ–º base64
    data_part = start_param.replace('contact_', '')
    qr_data_json = base64.b64decode(data_part).decode('utf-8')
    qr_data = json.loads(qr_data_json)
    
    if qr_data.get('action') == 'contact_specialist':
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ë–î
        message_id = sm.save_message(...)
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä—É
        partner_bot.send_message(partner_chat_id, ...)
        
        # –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º –∫–ª–∏–µ–Ω—Ç—É —Å –∫–Ω–æ–ø–∫–æ–π
        client_bot.send_message(chat_id, ..., reply_markup=markup)
```

## üöÄ –ù–æ–≤—ã–π URL

**URL:** `https://frontend-9o8vkm98d-alekseis-projects-3b6bffb8.vercel.app`

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ **–ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º** - —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- ‚úÖ **–ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –ø–µ—Ä–µ–ø–∏—Å–∫–∏** - –≤—Å—ë —á–µ—Ä–µ–∑ –±–æ—Ç–∞
- ‚úÖ **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å** - —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î
- ‚úÖ **–£–¥–æ–±—Å—Ç–≤–æ** - –≤—Å—è –ø–µ—Ä–µ–ø–∏—Å–∫–∞ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- ‚úÖ **–ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–µ—Ä—Å–∏–π Telegram** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `/start`

## üìã –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –ù–∞–∂–º–∏—Ç–µ "üöÄ –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
3. –í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É
4. –ù–∞–∂–º–∏—Ç–µ "–ù–∞–ø–∏—Å–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É"
5. **–î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è –±–æ—Ç** —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
6. –ù–∞–∂–º–∏—Ç–µ "üí¨ –û—Ç–∫—Ä—ã—Ç—å –ø–µ—Ä–µ–ø–∏—Å–∫—É" –≤ –±–æ—Ç–µ
7. **–î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –ø–µ—Ä–µ–ø–∏—Å–∫–∞** —Å–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º

## üéØ –ü–æ—á–µ–º—É —ç—Ç–æ –ª—É—á—à–µ

1. **–ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫—ç—à–∞** - –∫–∞–∂–¥—ã–π —Ä–∞–∑ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±–æ—Ç —Å –Ω–æ–≤—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º
2. **–ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç username** - –Ω–µ –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –ø—Ä—è–º—É—é –ø–µ—Ä–µ–ø–∏—Å–∫—É
3. **–†–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ** - –æ–¥–∏–Ω–∞–∫–æ–≤–æ –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –∏ –≤–µ—Ä—Å–∏—è—Ö Telegram
4. **–ù–∞–¥—ë–∂–Ω–æ** - —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î
5. **–£–¥–æ–±–Ω–æ** - –≤—Å—è –ø–µ—Ä–µ–ø–∏—Å–∫–∞ –≤ –±–æ—Ç–µ, –Ω–µ –Ω—É–∂–Ω–æ –∏—Å–∫–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- Username –±–æ—Ç–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `loyalitybot` (–∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å –≤ –∫–æ–¥–µ)
- –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å `/start` –∫–æ–º–∞–Ω–¥—ã
- –°–∏—Å—Ç–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –ë–î –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞

