(self.modernJsonp=self.modernJsonp||[]).push([["29215"],{447264:function(e,l,i){var n,t,a,s,r,o,d;i.r(l),i.d(l,{default:()=>c});let p={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"inviteCode"}],kind:"Fragment",metadata:null,name:"UnauthCloseupInviteUpsellQuery",selections:[{alias:null,args:t=[{kind:"Variable",name:"inviteCode",variableName:"inviteCode"}],concreteType:null,kind:"LinkedField",name:"v3GetInviteCodeQuery",plural:!1,selections:[a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"InviteCode",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sender",plural:!1,selections:[s={alias:null,args:null,kind:"ScalarField",name:"firstName",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null}],storageKey:null}],type:"InviteCodeResponse",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"UnauthCloseupInviteUpsellQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"v3GetInviteCodeQuery",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"InviteCode",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sender",plural:!1,selections:[s,r,o,d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},d],storageKey:null}],type:"InviteCodeResponse",abstractKey:null}],storageKey:null}]},params:{id:"4610a8b7fe41310eb2db231b8c1171930d91f797fbc7fd321ec6682cb48a3711",metadata:{},name:"UnauthCloseupInviteUpsellQuery",operationKind:"query",text:null}};p.hash="04834691a929e56b42c6699e90a97155";let c=p},659546:function(e,l,i){i.r(l),i.d(l,{default:()=>f});var n=i(686659),t=i(667294),a=i(20256),s=i(790810),r=i(351736),o=i(289935),d=i(24246),p=i(609252),c=i(774838),u=i(564377),_=i(865043),h=i(739405),m=i(74972),g=i(785893);function f({accessibilityModalLabel:e,align:l="center",allowClickAndDrag:i,allowScroll:f=!1,cancelButtonBackgroundColor:x,customizedHeading:w,children:y,closeOnOutsideClick:b=!0,footer:v,heading:j,isOpen:k,mobileAccessibilityCloseIconLabel:P,mobileHeadingSize:z,mobileHideCloseIcon:C,mobileIsFooter:A,mobileIsFullscreen:I,mobileIsFullpage:S,mobileIsSlideUp:T,onDismiss:Z,shouldMoveCancelButtonRight:U=!1,subHeading:R,type:L,zIndex:E,mobileCancelButtonPaddingTop:M,mobileCancelButtonPaddingRight:F,mobileTopOffset:B}){(0,t.useEffect)(()=>{(0,n.Z)("MobileModal","/app/packages/gestaltExtensions/Modal/MobileModal.tsx")},[]);let O=(0,d.Z)(),{isRTL:N}=(0,c.B)(),W=(0,t.useRef)(null),[H,Q]=(0,t.useState)(!1),{setAppFocusState:D}=(0,m.G)(),G=(0,h.ZP)(),J=(0,r.vs)();(0,t.useEffect)(()=>(W.current=(0,s.Z)(()=>{W.current&&Q(!0)}),()=>{"undefined"!=typeof window&&Object.prototype.hasOwnProperty.call(window,"cancelAnimationFrame")&&W.current&&(window.cancelAnimationFrame(W.current),W.current=null)}),[]),(0,t.useEffect)(()=>(k?(p.Z.pause(),D(!1),(0,_.My)(`mweb_unauth.mobile_modal.${L||"unknown_type"}.did_mount.is_open.true`)):(p.Z.resume(),D(!0)),()=>{k&&(p.Z.resume(),D(!0),(0,_.My)(`mweb_unauth.mobile_modal.${L||"unknown_type"}.did_mount.is_open.false`))}),[D,k]),(0,t.useEffect)(()=>{let e=k&&!f;return e&&(()=>{if(document.body){let{body:{style:e}}=document;e.overflow="hidden",e.touchAction="none"}})(),()=>{e&&(()=>{if(document.body){let{body:{style:e}}=document;e.overflow="visible",e.touchAction="auto"}})()}},[k,f]);let K=()=>S?"fullpage":I?"fullscreen":"euPrompt"===L?"euPrompt":"tablet"===G?"tablet":A?"footer":"signup"===L?"signup":"repinPage"===L?"repinPage":void 0;if(!k)return null;let X=P&&!C;return(0,g.jsx)(u.Z,{allowClickAndDrag:i,children:(0,g.jsx)(a.mh,{children:(0,g.jsxs)(a.xu,{"aria-label":e,display:"inlineBlock",height:"100%",position:"relative",role:"dialog",zIndex:E||o.ZM,children:[(0,g.jsx)(a.iP,{accessibilityLabel:O.bt("Маска модального окна регистрации для мобильных устройств", "Mobile Signup Modal Mask", "mweb.signup_modal.mask", undefined, true),dataTestId:"mobile-modal-mask-overlay",onTap:({event:e})=>{e.clientX&&e.clientY&&(0,_.tj)(`mweb_unauth.mobile_modal.wash_tap.${L||"unknown_type"}.with_dismissal`,{x:e.clientX,y:e.clientY}),b&&Z()},tapStyle:"none",children:(0,g.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, .5)",touchAction:"none",transitionProperty:"opacity",transitionTimingFunction:"ease-out"}},height:"100%",left:!0,position:"fixed",top:!0,width:"100%",zIndex:E||o.ZM})}),(0,g.jsxs)(a.xu,{color:"default",dangerouslySetInlineStyle:T?(0,o.Vf)({isFullscreen:I,isTablet:"tablet"===G,isShowing:H,isRelatedInterestsModal:"related_interests_modal"===L,isDarkMode:J}):{...(0,o.JN)({isDarkMode:J,variant:K()}),__style:{...(0,o.JN)({isDarkMode:J,variant:K()}).__style,transform:((0,o.JN)({isDarkMode:J,variant:K()}).__style?.transform||"")+(()=>{if(!B||T||!(()=>{if("undefined"==typeof window)return!1;let e=Math.max(window.visualViewport?.width||0,window.innerWidth,document.documentElement.clientWidth),l=Math.max(window.visualViewport?.height||0,window.innerHeight,document.documentElement.clientHeight);return e<=380||l<=760})())return"";let e=Math.min(1,(Math.max(window.visualViewport?.width||0,window.innerWidth,document.documentElement.clientWidth)-12)/380,(Math.max(window.visualViewport?.height||0,window.innerHeight,document.documentElement.clientHeight)-12)/600);return e=Math.max(.8,e),` scale(${e})`})()}},"data-test-id":"mobile-signup-mask",position:"fixed",zIndex:E||o.ZM,children:[(0,g.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:x||"rgba(0, 0, 0, 0)"}},children:(0,g.jsxs)(a.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:U?"end":"start",width:"100%",children:[X&&!U&&(0,g.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{paddingTop:M??void 0,paddingRight:F??void 0}},"data-test-id":"mobile-modal-cancel-button",padding:2,children:(0,g.jsx)(a.hU,{accessibilityLabel:P,icon:"cancel",iconColor:J?"subtle":"darkGray",onClick:Z,padding:4,size:"lg"})}),j?(0,g.jsx)(a.kC.Item,{flex:"grow",children:(0,g.jsx)(a.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:(0,g.jsxs)(a.xu,{dangerouslySetInlineStyle:{__style:P&&!C?{marginRight:N?-10:50,marginLeft:N?50:-10,paddingTop:16}:{paddingTop:16}},"data-test-id":"mobile-modal-heading",children:[I?j:(0,g.jsx)(a.xv,{align:l,size:z||"400",weight:"bold",children:j}),R?(0,g.jsx)(a.xv,{align:l,children:R}):null]})})}):null,w&&(0,g.jsx)(a.kC.Item,{flex:"grow",children:(0,g.jsx)(a.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:w})}),X&&U&&(0,g.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{paddingLeft:2,paddingTop:M??2,paddingBottom:2,paddingRight:F??void 0}},"data-test-id":"mobile-modal-cancel-button",children:(0,g.jsx)(a.hU,{accessibilityLabel:P,icon:"cancel",iconColor:J?"subtle":"darkGray",onClick:Z,padding:4,size:"lg"})})]})}),(0,g.jsxs)(a.xu,{overflow:"auto",children:[y,v]})]})]})})})}},923298:function(e,l,i){i.d(l,{Z:()=>a});var n=i(818244),t=i(233550);let a=()=>{let e=(0,n.g)(),l=(0,t.l)();return i=>{let{mobileOptions:n,desktopOptions:t,reason:a,attributionLabel:s,pinId:r,savePinImageUrl:o}=i;e?e.showDesktopSignupModal({signupFlow:t?.modalType==="login"?{type:"login"}:{type:"signup"},reason:a,attributionLabel:s,savePinId:r,savePinImageUrl:o,...t?.modalOptions}):l&&l.showMobileSignupModal({reason:a,attributionLabel:s,headingType:n?.headingType??"none",pinId:r,savePinImageUrl:o})}}},148387:function(e,l,i){i.d(l,{Z:()=>b});var n=i(686659),t=i(667294),a=i(230201),s=i(501010),r=i(774838),o=i(415316),d=i(248481),p=i(214879),c=i(575820),u=i(378199),_=i(767415);let h="http://play.google.com/store/apps/details?id=com.pinterest",m=["access_token","new_password","new_password_confirm","password","next"],g=(e,l)=>l?(0,c.ru)(e,{invite_code:l}):e,f=(e,l,i)=>{if("ios"===l&&"string"==typeof e&&e.startsWith("discover/article/")){let l=e.split("/")[2];e=`discover_article/${l}/?is_deeplink=1`}return("string"==typeof e&&"shopping/"===e&&(e="?is_deeplink=1"),"string"==typeof e)?g(e,i):"ios"===l||"ipad"===l?g(e.iOS,i):"android"===l?g(e.android,i):null};var x=i(785893);function w({children:e,invite_code:l}){let{isAuthenticated:i,isBot:n,unauthId:t,userAgent:{platform:o,raw:g}}=(0,r.B)(),{logContextEvent:x}=(0,a.u)(),{checkExperiment:w}=(0,s.Z)();return e(async(e,a,s)=>{x({component:14347,element:13582,event_type:700,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:a}}),(({isAuthenticated:e,checkExperiment:l,deeplinkUri:i,fallbackUrl:n,invite_code:t,logContextEvent:a,platform:s,redirectToLite:r,unauthId:o,userAgent:d,app_upsell_type:g})=>{if(a?.({component:14347,element:13582,event_type:701,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:g}}),i){let x=(({deeplinkUri:e,invite_code:l,platform:i,fallbackUrl:n,unauthId:t,app_upsell_type:a,checkExperiment:s})=>{let r=(0,u.ZP)(),o=r.length>0&&"android"===i&&s?.("ap_android_landing_signals_deeplink_feature_gate").group==="enabled"?r.map(({pageType:e,...l})=>l).slice(0,10):null;return{deeplink_path:f(e,i,l),current_page_url:(0,c.Gw)("undefined"!=typeof window?window.location.href:"",m),install_id:t,utm_source:140,utm_medium:2152,app_upsell_type:a,...n?{af_r:n}:null,...o?{landing_signals:JSON.stringify({unauth_visited_pages:o})}:null}})({isAuthenticated:e,deeplinkUri:i,fallbackUrl:n,invite_code:t,platform:s,unauthId:o,userAgent:d,app_upsell_type:g,checkExperiment:l});if((0,_.nP)("mweb.deeplink",{sampleRate:1,tags:{platform:s}}),t&&(0,_.nP)("mweb.deeplink.invite_code",{sampleRate:1}),(0,_.nP)("mweb.deeplink.unauthId",{sampleRate:1,tags:{withUnauthId:!!o}}),r){(0,_.nP)("mweb.deeplink.lite_link",{sampleRate:1}),a?.({component:14347,element:13582,event_type:14540,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:g}});let e=(({unauthId:e,app_upsell_type:l})=>({referrer:encodeURI((0,c.XP)({utm_source:"mweb",utm_medium:"upsell",utm_campaign:"twa",utm_content:e,app_upsell_type:l}))}))({unauthId:o,app_upsell_type:g});window.location.href=(0,c.ru)("http://play.google.com/store/apps/details?id=com.pinterest.twa",e)}else if("android"===s){let e=(({deeplinkUri:e,invite_code:l,platform:i,unauthId:n,app_upsell_type:t,checkExperiment:a})=>{let s=(0,u.ZP)(),r=s.length>0&&"android"===i&&a?.("ap_android_landing_signals_deeplink_feature_gate").group==="enabled"&&a?.("ap_android_landing_signals_deeplink_playstore_gate").group==="enabled"?s.map(({pageType:e,...l})=>l).slice(0,10):null,o=JSON.stringify({deeplink_path:f(e,i,l),current_page_url:(0,c.Gw)("undefined"!=typeof window?window.location.href:"",m),install_id:n,...r?{landing_signals:{unauth_visited_pages:r}}:null});return{referrer:(0,c.XP)({utm_source:"mweb",utm_medium:"upsell",utm_content:o,app_upsell_type:t})}})({deeplinkUri:i,invite_code:t,platform:s,unauthId:o,app_upsell_type:g,checkExperiment:l});(0,p.v)()?(0,p.Z)().then(l=>{if(l.length>0){let e=window.location.href.endsWith("/login")?window.location.href.replace("/login","string"==typeof i?i:i.android):window.location.href,l=(0,c.ru)(e,x);a?.({component:14347,element:13582,event_type:703,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:g,...x.landing_signals?{landing_signals:x.landing_signals}:null}}),window.open(l)||a?.({component:14347,element:13582,event_type:702,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:g}})}else a?.({component:14347,element:13582,event_type:14538,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:g,...x.landing_signals?{landing_signals:x.landing_signals}:null}}),window.location.href=(0,c.ru)(h,e)}).catch(()=>{(0,_.nP)("mweb_android.deeplink.playStore.error",{sampleRate:1})}):(a?.({component:14347,element:13582,event_type:14538,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:g,...x.landing_signals?{landing_signals:x.landing_signals}:null}}),window.location.href=(0,c.ru)(h,e))}else{if((0,_.nP)("mweb.deeplink.appsflyer_link",{sampleRate:1}),"ios"===s&&"undefined"!=typeof window&&window.location.href.includes("show_yip_modal")){window.location.href=(0,c.ru)("https://pinterest.com/pinterest-predicts",x);return}a?.({component:14347,element:13582,event_type:14539,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:g}}),window.location.href=(0,c.ru)("https://pinterest.onelink.me/TVSr/21e04bfd",x)}}})({isAuthenticated:i,checkExperiment:w,deeplinkUri:e,fallbackUrl:s,invite_code:l,logContextEvent:x,platform:o,redirectToLite:(0,d.Rp)({isBot:n,platform:o,userAgent:g}),unauthId:t,userAgent:g,app_upsell_type:a})})}let y=e=>{(0,t.useEffect)(()=>{(0,n.Z)("DeepLinkNavigator","/app/www/DeepLinkNavigator.tsx")},[]);let l=(0,o.u)();return(0,x.jsx)(w,{...e,invite_code:l})};y.displayName="DeepLinkNavigator";let b=y},310758:function(e,l,i){i.d(l,{Z:()=>r});var n=i(686659),t=i(667294),a=i(20256),s=i(785893);function r({children:e,onMouseEnter:l,onMouseLeave:i,onTouch:r,rounding:o,fullWidth:d=!1,pressState:p="none",accessibilityLabel:c,role:u,dataTestId:_}){(0,t.useEffect)(()=>{(0,n.Z)("LegacyTapArea","/app/www/LegacyTapArea.tsx")},[]);let h=(Array.isArray(p)?p:[p]).includes("compress");return(0,s.jsx)(a.iP,{accessibilityLabel:c,dataTestId:_,fullWidth:d,onMouseEnter:l&&(({event:e})=>l(e)),onMouseLeave:i&&(({event:e})=>i(e)),onTap:r&&(({event:e})=>r(e)),role:u,rounding:o,tapStyle:h?"compress":"none",children:e})}},878243:function(e,l,i){i.d(l,{Z:()=>g});var n=i(686659),t=i(667294),a=i(312048),s=i(230201),r=i(746868),o=i(774838),d=i(865043),p=i(736328),c=i(136142),u=i(874288),_=i(148387),h=i(767415),m=i(785893);function g({children:e,componentType:l,app_upsell_type:i,isShown:g=!0}){(0,t.useEffect)(()=>{(0,n.Z)("AppUpsellController","/app/www/appupsell/AppUpsellController.tsx")},[]);let f=(0,a.TH)(),{flushContextEvents:x,logContextEvent:w}=(0,s.u)(),{viewType:y,viewParameter:b}=(0,r.SU)(),v=(0,p.Z)(),{userAgent:{platform:j}}=(0,o.B)();(0,t.useEffect)(()=>{v({action:"view",item:"download-button",within:i})},[f,i,v]);let k=(0,t.useRef)(!1);(0,t.useEffect)(()=>{g&&y&&202!==y?(w({component:l||13106,element:10308,event_type:9976,view_type:y,view_parameter:b,aux_data:{app_upsell_type:i,app_upsell_is_dupe:k.current}}),k.current=!0):(0,h.nP)("webapp.track_app_upsell_viewed_invalid_parameters",{sampleRate:1,tags:{component:l,view_type:y,view_parameter:b,app_upsell_type:i,app_upsell_is_dupe:k.current}})},[y,b,l,i,w,g]);let P=(0,u.Z)();return(0,t.useEffect)(()=>{P||(0,d.My)(`mweb.app_upsell.forbidden_upsell.${i}`)},[P,i]),(0,m.jsx)(_.Z,{children:n=>e({handleOpenApp:e=>{v({action:"click",item:"download-button",within:i}),(0,d.NC)("press_open_app",!0),w({component:l||13106,element:10308,event_type:102,view_type:y||202,view_parameter:b,aux_data:{app_upsell_type:i}}),w({component:l||13106,element:10308,event_type:9977,view_type:y||202,view_parameter:b,aux_data:{app_upsell_type:i}}),x(),n&&(w({component:l||13106,element:10308,event_type:1701,view_type:y||202,view_parameter:b,aux_data:{app_upsell_type:i}}),n(e?.deepLinkUri??(0,c.Z)(f,"android"===j),i))}})})}},281269:function(e,l,i){i.d(l,{Z:()=>T});var n=i(686659),t=i(667294),a=i(312048),s=i(20256),r=i(659546),o=i(24246),d=i(216975),p=i(173874),c=i(774838),u=i(661376),_=i(865043),h=i(575820),m=i(739405),g=i(893957),f=i(878243),x=i(538937),w=i(227277),y=i(889998),b=i(420464),v=i(248481),j=i(228612),k=i(305375),P=i(520803),z=i(785893);let C=({description:e,handleDismiss:l,heading:i,i18n:n,appUpsellType:t,ctaText:a})=>(0,z.jsx)(f.Z,{app_upsell_type:t,componentType:14155,children:({handleOpenApp:t})=>(0,z.jsxs)(s.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:[(0,z.jsx)(s.xu,{paddingY:2,children:(0,z.jsx)(s.X6,{align:"center",size:"400",children:i})}),(0,z.jsx)(s.xu,{width:246,children:(0,z.jsx)(s.xv,{align:"center",size:"300",children:e})}),(0,z.jsxs)(s.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{display:"grid"}},justifyContent:"center",marginTop:5,children:[(0,z.jsx)(s.xu,{marginBottom:2,width:246,children:(0,z.jsx)(s.zx,{color:"red",fullWidth:!0,onClick:()=>{(0,w.Z)(),t()},size:"lg",text:a||n.bt("Открыть приложение", "Open app", "mweb.auth.referred_app_upsell.open_app", undefined, true)})}),(0,z.jsx)(s.zx,{color:"gray",fullWidth:!0,onClick:()=>{l()},size:"lg",text:n.bt("Продолжить в браузере", "Continue in browser", "mweb.auth.referred_app_upsell.continue", undefined, true)})]})]})}),A=({handleDismiss:e,i18n:l,iconSize:i,appUpsellType:n})=>(0,z.jsxs)(s.xu,{alignItems:"center",bottom:!0,color:"light",direction:"column",display:"flex",left:!0,paddingX:5,position:"fixed",right:!0,top:!0,zIndex:new s.Ry(5),children:[(0,z.jsx)(s.xu,{"data-test-id":"referred-app-upsell-dismiss-button",left:!0,padding:4,position:"absolute",top:!0,children:(0,z.jsx)(s.hU,{accessibilityLabel:l.bt("Отмена", "Cancel", "mweb.auth.referred_app_upsell.close_modal_label", undefined, true),icon:"cancel",onClick:e,size:"sm"})}),(0,z.jsxs)(s.xu,{direction:"column",display:"flex",height:"100%",justifyContent:"center",margin:"auto",maxWidth:440,children:[(0,z.jsx)(s.xu,{display:"flex",justifyContent:"center",paddingY:2,children:(0,z.jsx)(s.JO,{accessibilityLabel:l.bt("Логотип", "Logo", "mweb.auth.referred_app_upsell.logo", undefined, true),color:"primary",icon:"pinterest",size:i})}),(0,z.jsx)(C,{appUpsellType:n,description:l.bt("Сохраняйте идеи, общайтесь с друзьями и обретайте вдохновение", "Save ideas, interact with friends, and get inspired", "mweb.auth.referred_app_upsell.description1", undefined, true),handleDismiss:e,heading:l.bt("В приложении Pinterest работать удобнее", "Pinterest is better in the app", "mweb.auth.referred_app_upsell.heading1", undefined, true),i18n:l})]})]}),I=({backgroundImageUrl:e,handleDismiss:l,heroImage:i,i18n:n,multipleImages:t,appUpsellType:a})=>(0,z.jsxs)(s.xu,{alignItems:"center",bottom:!0,color:"light",direction:"column",display:"flex",left:!0,paddingX:5,position:"fixed",right:!0,top:!0,zIndex:new s.Ry(5),children:[(0,z.jsx)(s.xu,{height:319,position:"absolute",top:!0,width:"100%",zIndex:new s.Ry(2),children:(0,z.jsx)(s.Ee,{alt:n.bt("Изображение предложения по поводу приложения", "App upsell image", "mweb.auth.referred_app_upsell.image", undefined, true),fit:"cover",naturalHeight:1,naturalWidth:1,src:e})}),(0,z.jsxs)(s.xu,{alignItems:"center",bottom:!0,color:"light",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(12px)"}},direction:"column",display:"flex",left:!0,paddingX:5,position:"absolute",right:!0,top:!0,zIndex:new s.Ry(3),children:[(0,z.jsx)(s.xu,{color:"default",dangerouslySetInlineStyle:{__style:{background:"transparent"}},"data-test-id":"referred-app-upsell-dismiss-button",left:!0,padding:4,position:"absolute",top:!0,children:(0,z.jsx)(s.hU,{accessibilityLabel:n.bt("Отмена", "Cancel", "mweb.auth.referred_app_upsell.close_modal_label", undefined, true),icon:"cancel",onClick:l,size:"sm"})}),(0,z.jsxs)(s.xu,{direction:"column",display:"flex",height:"100%",justifyContent:"center",margin:"auto",maxWidth:440,children:[(0,z.jsx)(s.kC,{justifyContent:"center",children:i}),(0,z.jsx)(C,{appUpsellType:a,description:t?n.bt("Сохраняйте эти идеи, получайте похожие рекомендации и т. д.", "Save these ideas, get similar recs, and more", "mweb.auth.referred_app_upsell.description2", undefined, true):n.bt("Сохраняйте идеи, получайте похожие рекомендации и т. д.", "Save this idea, get similar recs, and more", "mweb.auth.referred_app_upsell.description5", undefined, true),handleDismiss:l,heading:n.bt("В приложении Pinterest лучше", "It's better in the Pinterest app", "mweb.auth.referred_app_upsell.heading1", undefined, true),i18n:n})]})]})]}),S=({pinUrl:e,i18n:l})=>(0,z.jsx)(s.xu,{height:235,marginBottom:6,overflow:"hidden",rounding:4,width:176,children:(0,z.jsx)(s.Ee,{alt:l.bt("Изображение предложения по поводу приложения", "App upsell image", "mweb.auth.referred_app_upsell.image", undefined, true),fit:"cover",naturalHeight:1,naturalWidth:1,src:e})});function T({onDismiss:e,viewParameter:l,viewType:i}){(0,t.useEffect)(()=>{(0,n.Z)("ReferredAppUpsell","/app/www/appupsell/ReferredAppUpsell.tsx")},[]);let T=(0,o.Z)(),Z=(0,m.Wb)(),{isBot:U,userAgent:{platform:R,raw:L}}=(0,c.B)(),E=(0,v.Rp)({isBot:U,platform:R,userAgent:L}),{trackAppUpsellDismiss:M}=(0,y.Z)(),F=Z?60:32,B=(0,P.Z)(),O=(0,a.TH)(),{invite_code:N}=(0,h.mB)(O.search),{appUpsellType:W,uiType:H}=(0,x.C)();(0,g.Z)(()=>{(0,_.My)(`mweb.referred_app_upsell_view.${H}`)});let Q=()=>{M({appUpsellType:W,viewType:i,viewParameter:l,component:14155,element:10308}),(0,w.Z)(),e()},D=B.params.id??"",{data:G}=(0,u.Z)(D?{name:"PinResource",options:{field_set_key:"detailed",id:D}}:null),J=(0,j.S6)()(D),{username:K,slug:X}=(0,k.Z)(),{data:$}=(0,u.Z)(K&&X?{name:"BoardResource",options:{username:(0,h.Jx)(K),slug:(0,h.Jx)(unescape(X||"")),field_set_key:"detailed"}}:null);if("full"===H){let e="",l=null,i=!1;if((0,p.L6)(O)&&(e=(G??J)?.images?.orig?.url||"",l=(0,z.jsx)(S,{i18n:T,pinUrl:e})),(0,p.am)(O)&&$&&$.images&&$.images["474x"])if($.images["474x"].length>2){e=$.images["474x"][0].url||"";let n=$.images["474x"][1].url||"",t=$.images["474x"][2].url||"";i=!0,l=(0,z.jsx)(s.xu,{marginBottom:7,children:(0,z.jsxs)(s.kC,{children:[(0,z.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{borderTopLeftRadius:"16px",borderBottomLeftRadius:"16px",marginRight:"1px"}},height:117,overflow:"hidden",width:117,children:(0,z.jsx)(s.Ee,{alt:T.bt("Изображение предложения по поводу приложения", "App upsell image", "mweb.auth.referred_app_upsell.image", undefined, true),fit:"cover",naturalHeight:1,naturalWidth:1,src:e})}),(0,z.jsxs)(s.kC,{direction:"column",children:[(0,z.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{borderTopRightRadius:"16px",marginBottom:"1px"}},height:59,overflow:"hidden",width:57,children:(0,z.jsx)(s.Ee,{alt:T.bt("Изображение предложения по поводу приложения", "App upsell image", "mweb.auth.referred_app_upsell.image", undefined, true),fit:"cover",naturalHeight:1,naturalWidth:1,src:n})}),(0,z.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{borderBottomRightRadius:"16px"}},height:57,overflow:"hidden",width:58,children:(0,z.jsx)(s.Ee,{alt:T.bt("Изображение предложения по поводу приложения", "App upsell image", "mweb.auth.referred_app_upsell.image", undefined, true),fit:"cover",naturalHeight:1,naturalWidth:1,src:t})})]})]})})}else $.images["474x"].length>0&&(e=$.images["474x"][0].url||"",l=(0,z.jsx)(S,{i18n:T,pinUrl:e}));return e?(0,z.jsx)(I,{appUpsellType:W,backgroundImageUrl:e,handleDismiss:Q,heroImage:l,i18n:T,multipleImages:i}):(0,z.jsx)(A,{appUpsellType:W,handleDismiss:Q,i18n:T,iconSize:F,upsellAppIsAndroidLiteApp:E})}if("inline"===H){let e=(0,z.jsx)(s.xu,{color:"light",padding:1,rounding:1,children:(0,z.jsx)(s.JO,{accessibilityLabel:T.bt("Логотип Pinterest", "Pinterest logo", "AppUpsellFooter.icon", undefined, true),color:"primary",icon:"pinterest",inline:!0,size:28})}),l=T.bt("В приложении лучше", "It's better in the app", "mweb.auth.referred_app_upsell.heading3", undefined, true),i=T.bt("Получайте похожие рекомендации и не только", "Get similar recs and more", "mweb.auth.referred_app_upsell.description4", undefined, true);return W.endsWith("social-referred")&&N&&(l=(0,z.jsx)(b.UseCloseupInviteQuery,{variables:{inviteCode:N},children:e=>(0,d.nk)(T.bt("Пользователь {{ invitee }} поделился с вами этой идеей", "{{ invitee }} shared this idea", "mweb.auth.referred_app_upsell.heading5", undefined, true),{invitee:e.v3GetInviteCodeQuery?.__typename==="InviteCodeResponse"?e.v3GetInviteCodeQuery?.data?.sender?.firstName:""})}),i=T.bt("Откройте приложение, чтобы увидеть больше", "Open app to discover more", "mweb.auth.referred_app_upsell.description6", undefined, true),N&&(e=(0,z.jsx)(b.UseCloseupInviteQuery,{variables:{inviteCode:N},children:e=>(0,z.jsx)(s.xu,{height:48,overflow:"hidden",rounding:6,width:48,children:e.v3GetInviteCodeQuery?.__typename==="InviteCodeResponse"&&e.v3GetInviteCodeQuery.data?.sender?.imageMediumUrl&&(0,z.jsx)(s.Ee,{alt:T.bt("Изображение профиля в приложении Upsell", "App upsell profile image", "mweb.auth.referred_app_upsell.image1", undefined, true),fit:"cover",naturalHeight:1,naturalWidth:1,src:e.v3GetInviteCodeQuery.data.sender.imageMediumUrl})})}))),(0,z.jsx)(f.Z,{app_upsell_type:W,children:({handleOpenApp:n})=>(0,z.jsx)(s.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"#F1F1F1"}},direction:"row",display:"flex",height:74,padding:4,width:"100%",zIndex:new s.Ry(99999),children:(0,z.jsx)(s.iP,{onTap:()=>{(0,w.Z)(),n()},children:(0,z.jsxs)(s.kC,{alignItems:"center",direction:"row",justifyContent:"start",width:"100%",children:[e,(0,z.jsxs)(s.xu,{flex:"grow",marginStart:4,children:[(0,z.jsx)(s.xu,{marginBottom:1,children:(0,z.jsx)(s.xv,{children:l})}),(0,z.jsx)(s.xv,{weight:"bold",children:i})]}),(0,z.jsx)(s.xu,{"data-test-id":"referred-app-upsell-dismiss-button",children:(0,z.jsx)(s.hU,{accessibilityLabel:"cancel",icon:"cancel",onClick:({event:e})=>{Q(),e.preventDefault(),e.stopPropagation()},size:"sm"})})]})})})})}{let e=T.bt("В приложении Pinterest работать удобнее", "Pinterest is better in the app", "mweb.auth.referred_app_upsell.heading3", undefined, true);return W.endsWith("social-referred")&&N&&(e=(0,z.jsx)(b.UseCloseupInviteQuery,{variables:{inviteCode:N},children:e=>(0,d.nk)(T.bt("Присоединяйтесь к пользователю {{ invitee }} в Pinterest", "Join {{ invitee }} on Pinterest", "mweb.auth.referred_app_upsell.heading4", undefined, true),{invitee:e.v3GetInviteCodeQuery?.__typename==="InviteCodeResponse"?e.v3GetInviteCodeQuery?.data?.sender?.firstName:""})})),(0,z.jsx)(r.default,{accessibilityModalLabel:T.bt("модальное окно", "modal", "mweb.auth.referred_app_upsell.modal_label", undefined, true),closeOnOutsideClick:!1,isOpen:!0,mobileHideCloseIcon:!0,onDismiss:()=>{},type:"app_upsell_v1",zIndex:new s.Ry(101),children:(0,z.jsxs)(s.xu,{"data-test-id":"appUpsell-iframe",padding:2,children:[(0,z.jsx)(s.xu,{display:"inlineBlock",position:"absolute",children:(0,z.jsx)(s.xu,{"data-test-id":"referred-app-upsell-dismiss-button",marginStart:1,marginTop:1,children:(0,z.jsx)(s.hU,{accessibilityLabel:T.bt("закрыть", "close", "mweb.auth.referred_app_upsell.close", undefined, true),icon:"cancel",onClick:Q,size:"sm"})})}),(0,z.jsxs)(s.xu,{marginBottom:5,marginTop:8,paddingX:2,children:[(0,z.jsx)(s.xu,{display:"flex",justifyContent:"center",paddingY:3,children:(0,z.jsx)(s.JO,{accessibilityLabel:T.bt("Логотип", "Logo", "mweb.auth.referred_app_upsell.logo", undefined, true),color:"primary",icon:"pinterest",size:F})}),(0,z.jsx)(C,{appUpsellType:W,description:T.bt("Сохраняйте идеи, общайтесь с друзьями и обретайте вдохновение", "Save ideas, interact with friends, and get inspired", "mweb.auth.referred_app_upsell.description3", undefined, true),handleDismiss:Q,heading:e,i18n:T})]})]})})}}},136142:function(e,l,i){i.d(l,{Z:()=>t});var n=i(173874);function t(e,l){return"/"===e.pathname?"/":(0,n.am)(e)&&l?`board/${e.pathname.substr(1)}`:e.pathname.substr(1)}},227277:function(e,l,i){i.d(l,{Z:()=>r});var n=i(4533),t=i(15881),a=i(34550),s=i(418282);function r(){let e=(0,a.M0)();e.setItem(n.Li,Date.now()),e.getItem(n.O7)||e.setItem(n.O7,Date.now()),(0,s.Nl)().setItem(t.JO,!0)}},889998:function(e,l,i){i.d(l,{Z:()=>t});var n=i(230201);function t(){let{logContextEvent:e}=(0,n.u)();return{trackAppUpsellDismiss:({appUpsellType:l,viewType:i,viewParameter:n,component:t,element:a})=>{e({event_type:10220,view_type:i??202,view_parameter:n,component:t,element:a,aux_data:{app_upsell_type:l}})}}}},420464:function(e,l,i){i.r(l),i.d(l,{UseCloseupInviteQuery:()=>j,default:()=>k});var n,t=i(686659),a=i(667294),s=i(167912),r=i(20256),o=i(825605),d=i(415316),p=i(319226),c=i(24246),u=i(923298),_=i(736328),h=i(310758),m=i(767415),g=i(785893);function f({isStoryPin:e,inviteText:l,inviterFirstName:i,isThinnerStyle:n,username:s}){(0,a.useEffect)(()=>{(0,t.Z)("SocialText","/app/www/pages/duplo/SocialText.tsx")},[]);let o=(0,_.Z)(),d=l.split(i);return(0,g.jsx)(r.xu,{children:(0,g.jsx)(h.Z,{onTouch:()=>{(0,m.nP)("mweb_social_unauth.closeup.social_text_click")},pressState:"none",children:(0,g.jsxs)(r.kC,{direction:"row",gap:{row:1,column:0},children:[(0,g.jsx)(r.xv,{inline:!0,size:"300",children:d[0]}),e?(0,g.jsx)(r.xv,{inline:!0,size:"300",weight:"bold",children:(0,g.jsx)(r.rU,{href:"/"+s,onClick:()=>{o({action:"click",item:"invite-profiler"})},target:"blank",children:i})}):(0,g.jsx)(r.xv,{inline:!0,size:n?"200":"300",weight:n?"normal":"bold",children:(0,g.jsx)(r.rU,{href:"/"+s,onClick:()=>{o({action:"click",item:"invite-profiler-not-story"})},target:"blank",children:i})}),(0,g.jsx)(r.xv,{inline:!0,size:n?"200":"300",children:d[1]})]})})})}function x({inviter:e,socialContextBannerStyle:l,setShouldShowSocialUpsellBanner:i}){(0,a.useEffect)(()=>{(0,t.Z)("SocialContextBanner","/app/www/pages/duplo/SocialContextBanner.tsx")},[]);let{shouldShowSignupUpsellText:n,isDismissible:s}=l,o=(0,c.Z)(),{username:d}=e,m=e.imageMediumUrl,x=e.firstName,w=(0,u.Z)(),y=(0,_.Z)();return(0,g.jsx)(r.kC,{alignItems:"center",justifyContent:s?"center":"start",children:(0,g.jsx)(r.xu,{children:(0,g.jsx)(r.iP,{fullHeight:!0,onTap:()=>{y({action:"click",item:"close-button",within:"social-banner"}),w({reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"tap_desktop_unauth_social_context_banner",desktopOptions:{modalType:"signup",modalOptions:{source:"defaultSource",container:"pinWash"}}})},children:(0,g.jsxs)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(233, 228, 255, 0.9)"}},direction:"row",display:"flex",height:44,marginBottom:6,marginStart:2*!s,marginTop:2,paddingX:s?4:2,paddingY:4,position:s?"static":"absolute",rounding:"pill",top:!0,width:s?1012:void 0,zIndex:new r.Ry(1),children:[(0,g.jsx)(r.xu,{marginBottom:8,marginEnd:1,marginTop:8,width:32,children:(0,g.jsx)(h.Z,{onTouch:e=>{e.stopPropagation(),d&&window.open("/"+d),y({action:"click",item:"user-rep",within:"social-banner"})},pressState:"none",children:m?.includes("default")?(0,g.jsx)(r.JO,{accessibilityLabel:"pinterest logo",color:"default",icon:"pinterest",size:24}):(0,g.jsx)(p.qE,{name:x,size:"fit",src:m??void 0})})}),(0,g.jsxs)(r.kC,{direction:"row",flex:"grow",children:[(0,g.jsx)(f,{inviterFirstName:x,inviteText:n?(o.bt("Пользователь {{ name }} поделился с вами этой идеей.", "{{ name }} shared this idea.", "pin.closeup.long_banner.desktop.shareNotification", undefined, true)).replace("{{ name }}",x):(o.bt("Пользователь {{ name }} поделился с вами этой идеей ", "{{ name }} shared this idea ", "pin.closeup.banner.desktop.shareNotification", undefined, true)).replace("{{ name }}",x),isStoryPin:!1,isThinnerStyle:n,username:d}),n&&(0,g.jsx)(r.xu,{marginEnd:2,marginStart:1,children:(0,g.jsx)(r.xv,{inline:!0,size:"200",weight:"bold",children:o.bt("Зарегистрируйтесь, чтобы присоединиться", "Sign up to join them", "pin.header.social_context_dweb", undefined, true)})})]}),s&&(0,g.jsx)(r.hU,{accessibilityLabel:"cancel",icon:"cancel",onClick:({event:e})=>{e.stopPropagation(),y({action:"dismiss",item:"close-button",within:"social-banner"}),i?.(!1)},size:"sm"})]})})})})}var w=i(878243),y=i(874288);function b({inviter:{imageMediumUrl:e,username:l,firstName:i},isStoryPin:n}){(0,a.useEffect)(()=>{(0,t.Z)("SocialContextHeader","/app/www/pages/duplo/SocialContextHeader.tsx")},[]);let s=(0,c.Z)(),o=()=>(0,m.nP)("mweb_social_unauth.closeup.avatar_click"),d=(0,y.Z)(),u=(0,_.Z)(),x=(s.bt("Пользователь {{ name }} поделился с вами этой идеей.", "{{ name }} shared this idea", "pin.closeup.header.shareNotification", undefined, true)).replace("{{ name }}",l),b="undefined"!=typeof window&&window.innerWidth<360,v=l.length>25,j=(0,g.jsx)(h.Z,{pressState:"none",children:(0,g.jsxs)(r.kC,{alignItems:"center",gap:4,justifyContent:"start",minHeight:80,children:[(0,g.jsx)(r.xu,{marginBottom:4,marginStart:0,marginTop:4,width:48,children:(0,g.jsx)(h.Z,{onTouch:o,pressState:"none",children:(0,g.jsx)(p.qE,{name:i,src:e??void 0})})}),(0,g.jsx)(r.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:(0,g.jsx)(r.xu,{marginStart:0,children:(0,g.jsx)(f,{inviterFirstName:i,inviteText:(s.bt("Пользователь {{ name }} поделился с вами этой идеей", "{{ name }} shared this idea with you", "pin.closeup.header.shareNotification", undefined, true)).replace("{{ name }}",i),isStoryPin:n,isThinnerStyle:!1,username:l})})})]})});return d&&n?(0,g.jsxs)(r.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:"center",minHeight:v?100:80,children:[(0,g.jsx)(r.xu,{marginBottom:4,marginTop:4,width:40,children:(0,g.jsx)(h.Z,{onTouch:o,pressState:"none",children:(0,g.jsx)(p.qE,{name:i,size:"fit",src:e??void 0})})}),(0,g.jsx)(r.kC.Item,{flex:"grow",children:(0,g.jsxs)(r.xu,{alignItems:"center",direction:v?"column":"row",display:"flex",justifyContent:v?"start":"between",padding:3*!!v,children:[(0,g.jsxs)(r.kC,{alignItems:"start",direction:"column",gap:{row:0,column:1},wrap:!b,children:[(0,g.jsx)(r.kC,{children:(0,g.jsxs)(r.xv,{align:v?"center":"start",children:[(0,g.jsx)(r.xv,{inline:!0,weight:"bold",children:(0,g.jsx)(r.rU,{display:"inlineBlock",href:`/${l??""}/`,onClick:()=>{u({action:"click",item:"invite-profiler"})},target:"blank",underline:"hover",children:l})}),x.split(l)[1]]})}),!v&&(0,g.jsx)(r.xv,{size:"100",children:s.bt("Откройте Pinterest, чтобы просмотреть больше идей", "Open Pinterest to see more", "unauth.mweb.shared.banner.edu", undefined, true)})]}),(0,g.jsx)(r.xu,{alignItems:"center",display:"flex",justifyContent:"center",marginTop:3*!!v,minWidth:100*!v,children:(0,g.jsx)(w.Z,{app_upsell_type:"social-context-header",componentType:14161,children:({handleOpenApp:e})=>(0,g.jsx)(r.zx,{onClick:()=>e(),size:"md",text:s.bt("Открыть приложение", "Open app", "unauth.mweb.shared.banner.cta", undefined, true)})})})]})})]}):j}let v=(void 0!==n||(n=i(447264)).hash&&"04834691a929e56b42c6699e90a97155"!==n.hash&&console.error("The definition of 'UnauthCloseupInviteUpsellQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),j=({children:e,variables:l})=>e((0,s.useLazyLoadQuery)(v,l));function k({inviterFirstNameRef:e,isDesktop:l,isStoryPin:i,setShouldShowSocialUpsellBanner:n,socialContextBannerStyle:s}){(0,a.useEffect)(()=>{(0,t.Z)("UnauthCloseupInviteUpsell","/app/www/closeup/duplo/unauth/UnauthCloseupInviteUpsell.tsx")},[]);let p=(0,d.u)();return p?(0,g.jsx)(o.Z,{children:(0,g.jsx)(j,{variables:{inviteCode:p},children:t=>{let{firstName:a,imageMediumUrl:o,username:d}=t.v3GetInviteCodeQuery?.data?.sender??Object.freeze({});return a&&d?(e&&(e.current=a),l?(0,g.jsx)(x,{inviter:{firstName:a,imageMediumUrl:o,username:d},setShouldShowSocialUpsellBanner:n,socialContextBannerStyle:s??{isDismissible:!0,shouldShowSignupUpsellText:!0}}):(0,g.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{boxShadow:"0 1px 0 0 rgba(0, 0, 0, 0.08)"}},marginEnd:-2,marginStart:-2,paddingX:2,children:(0,g.jsx)(b,{inviter:{firstName:a,imageMediumUrl:o,username:d},isStoryPin:!!i})})):null}})}):null}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/29215.ru_RU-d34d1d5b60e665d8.mjs.map