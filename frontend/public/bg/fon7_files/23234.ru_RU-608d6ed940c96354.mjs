(self.modernJsonp=self.modernJsonp||[]).push([["23234"],{583845:function(e,t,i){i.d(t,{Rq:()=>o,Vf:()=>n,jd:()=>r,oy:()=>s});let o=e=>"ios"===e&&(window.devicePixelRatio||1)*window.screen.height==2436,n=28,r=e=>window.innerHeight>=748&&o(e),s=()=>"undefined"!=typeof window&&!!window.navigator&&(/iPad/.test(navigator.platform)||"MacIntel"===navigator.platform&&"ontouchend"in document&&Math.min(window.screen.width,window.screen.height)>=700)},446885:function(e,t,i){i.d(t,{Z:()=>_});var o=i(686659),n=i(667294),r=i(20256),s=i(424367),a=i(351736),l=i(440077),d=i(609252),c=i(178315),u=i(774838),h=i(40763),p=i(785893);function _({children:e,footerConfig:t,headerConfig:i,height:_,hideOnScroll:x,hideOnScrollState:{isHidden:f,updateHiddenState:b},isFooterHidden:g,noPadding:m,paddingX:v,paddingY:w=c.og,type:S,zIndex:y,isStoryPin:j}){let P,A;(0,n.useEffect)(()=>{(0,o.Z)("FixedContent","/app/packages/layout/FixedContent.tsx")},[]);let{headerLimitedOverflow:z,ignoreObstructions:Z,zIndexForGestaltBug:C}=i||{},{appUpsellFooterConfig:I,footerInLego:k,navFooterConfig:B}=t||{},O=!!I,R="header"===S?"top":"bottom",E=(0,a.vs)(),{isRTL:T}=(0,u.B)(),{mWebCloseupRedesignEnabled:L}=(0,s.Z)(),N=(0,n.useRef)(null),H=(0,n.useRef)(null);(0,n.useEffect)(()=>{try{if(!Z){let e=N.current;H.current=z&&e&&Array.isArray(e.children)?e.children[0]:e,H.current instanceof HTMLElement&&d.Z.addObstruction(R,H.current)}}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}return()=>{!Z&&H.current instanceof HTMLElement&&d.Z.removeObstruction(R,H.current)}},[Z,z,R,E]);let F="top"===R?"relative":"fixed",M=m?0:w,D=(_??c.R$)+(i?.overrideTop||0),W=x||B?{transition:k||L?"transform 300ms ease-in-out, opacity 300ms ease-in-out":"transform 200ms linear",...f||g?{transform:`translateY(${"top"===R?-D:D}px)`,opacity:k||L?0:1}:Object.freeze({})}:{},Y=2*!("relative"!==F||i?.noGutter),$=Y?-Y:0,U=E?a.k7:"rgba(255,255,255,.95)";E&&("header"===S?P=-1:A=-1);let J=k?O?void 0:_??c.R$:"100%",X=k?c.KJ:void 0,G=i?.isTranslucent&&U||E?U:l.Wmm,V=i?.isTransparentBackground&&l.Wyp?l.Wyp:G,q=(0,n.useMemo)(()=>({height:"footer"===S&&L?`calc(${J} + env(safe-area-inset-bottom))`:J,...L&&"footer"===S?{paddingBottom:`calc(env(safe-area-inset-bottom) + ${4*(M||0)}px)`}:Object.freeze({})}),[L,J,S,M]),K=(0,h.Z)({skipExpActivation:!0});return(0,p.jsx)(r.xu,{ref:N,bottom:"footer"===S,dangerouslySetInlineStyle:{__style:{top:P,bottomStyle:A,...!y||C?{zIndex:C||1}:Object.freeze({}),...z?{background:"transparent",overflow:"hidden",paddingBottom:c.UB,marginBottom:-c.UB,pointerEvents:"none"}:Object.freeze({}),...i?.hasBorder?{borderBottom:c.dS}:Object.freeze({}),...t?.hasTopShadow?{boxShadow:"0 -2px 4px 1px rgba(0, 0, 0, 0.08)"}:Object.freeze({}),...W}},"data-test-id":S,display:O?"flex":void 0,height:_&&!k?_:void 0,left:!0,marginEnd:k?"auto":$,marginStart:k?"auto":$,onTransitionEnd:()=>{(x||B)&&H.current&&(f||g?d.Z.removeObstruction(R,H.current):d.Z.addObstruction(R,H.current))},position:F,right:!0,top:"header"===S,width:k||"fixed"!==F?void 0:"100%",zIndex:C?void 0:y,children:(0,p.jsx)(r.xu,{alignItems:t?.alignCenter?"center":void 0,dangerouslySetInlineStyle:{__style:{backgroundColor:V,paddingLeft:T||!K||j?void 0:"8px",paddingRight:T&&K&&!j?"8px":void 0,...q,boxShadow:L&&"footer"===S?`0 10px 0 0 ${V}, ${c.KJ}`:X,marginBottom:k&&!B?.docked?16:void 0,...z?{pointerEvents:"auto"}:Object.freeze({}),...i?.useRoundedCorners?{zIndex:5,borderTopRightRadius:17,borderTopLeftRadius:17,borderBottomRightRadius:0,borderBottomLeftRadius:0}:Object.freeze({})}},display:k||t?.alignCenter?"flex":void 0,marginEnd:k?"auto":void 0,marginStart:k?"auto":void 0,paddingX:v||4*("footer"===S&&!m)+Y,paddingY:M,position:"relative",rounding:k&&!B?.docked?"pill":void 0,width:B?B.footerWidth:O?void 0:"100%",children:"function"==typeof e?e({updateHiddenState:b}):e})})}},528630:function(e,t,i){i.d(t,{Z:()=>l});var o=i(686659),n=i(667294),r=i(446885),s=i(763904),a=i(785893);function l({alignCenter:e,appUpsellFooterConfig:t,footerInLego:i,hasTopShadow:l,navFooterConfig:d,...c}){return(0,n.useEffect)(()=>{(0,o.Z)("FixedFooter","/app/packages/layout/FixedFooter.tsx")},[]),(0,a.jsx)(s.Z,{appUpsellFooterConfig:t,hideOnScroll:c.hideOnScroll,navFooterConfig:d?.scrollConfig,children:o=>(0,a.jsx)(r.Z,{...c,footerConfig:{alignCenter:e,appUpsellFooterConfig:t,footerInLego:i,hasTopShadow:l,navFooterConfig:d},hideOnScrollState:o,type:"footer"})})}},271202:function(e,t,i){i.r(t),i.d(t,{default:()=>c});var o=i(686659),n=i(667294),r=i(20256),s=i(178315),a=i(446885),l=i(763904),d=i(785893);function c({hasBorder:e,headerLimitedOverflow:t,ignoreObstructions:i,isTranslucent:c,isTransparentBackground:u,noGutter:h,overrideTop:p,useRoundedCorners:_,zIndexForGestaltBug:x,isStoryPin:f,...b}){(0,n.useEffect)(()=>{(0,o.Z)("FixedHeader","/app/packages/layout/FixedHeader.tsx")},[]);let{noPadding:g,paddingY:m=s.og,zIndex:v}=b;return(0,d.jsx)(r.Le,{height:t?s.LV+2*(g?0:m)*4:void 0,top:p||0,zIndex:v||void 0,children:(0,d.jsx)(l.Z,{hideOnScroll:b.hideOnScroll,children:o=>(0,d.jsx)(a.Z,{...b,headerConfig:{isTranslucent:c,isTransparentBackground:u,headerLimitedOverflow:t,hasBorder:e,ignoreObstructions:i,noGutter:h,overrideTop:p,zIndexForGestaltBug:x,useRoundedCorners:_},hideOnScrollState:o,isStoryPin:f,type:"header"})})})}},763904:function(e,t,i){i.d(t,{Z:()=>s});var o=i(667294),n=i(730448);function r(e,t,i){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class s extends o.Component{constructor(...e){super(...e),r(this,"state",{isHidden:!!this.props.appUpsellFooterConfig||!!this.props.navFooterConfig?.isDockedNavOnPlp}),r(this,"lastScrollPos",0),r(this,"updateHiddenState",e=>{this.reqAnimationId=window.requestAnimationFrame(()=>{this.setState({isHidden:e})})}),r(this,"handleScroll",(0,n.Z)(()=>{let{appUpsellFooterConfig:e,navFooterConfig:t}=this.props,{isHidden:i}=this.state,o=window.scrollY,n=o-this.lastScrollPos,r="none",{scrollHeight:s,clientHeight:a}=document.documentElement||{};Number.isNaN(s)||Number.isNaN(a)||(r=n<0?o<=Math.abs((window.scrollMinY||0)+Math.max(n,20))?"start":"none":o>=(window.scrollMaxY||s-a)-Math.max(n,20)?"end":"none");let l=55*!t?.isModal;e?n>20&&i&&o>=500?e.shouldShowAfterScroll()&&(this.updateHiddenState(!1),t?.onScroll(!1)):(n<-20&&!i||o<=l)&&(this.updateHiddenState(!0),t?.onScroll(!0)):this.props.navFooterConfig?.isDockedNavOnPlp?"start"===r&&!i||o<=l?(this.updateHiddenState(!0),t?.onScroll(!0)):(o>l||"end"===r)&&i&&(this.updateHiddenState(!1),t?.onScroll(!1)):(n<-20||"start"===r)&&i||o<=l?(this.updateHiddenState(!1),t?.onScroll(!1)):(n>20||"end"===r)&&!i&&(this.updateHiddenState(!0),t?.onScroll(!0)),this.lastScrollPos=o},30))}componentDidMount(){try{(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.addEventListener("scroll",this.handleScroll)}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}}componentWillUnmount(){(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.removeEventListener("scroll",this.handleScroll),this.reqAnimationId&&(window.cancelAnimationFrame(this.reqAnimationId),this.reqAnimationId=null)}componentDidUpdate(e){!e.hideOnScroll&&this.props.hideOnScroll||!e.navFooterConfig?.isDockedNavOnPlp&&this.props.navFooterConfig?.isDockedNavOnPlp?(this.updateHiddenState(!0),window.addEventListener("scroll",this.handleScroll)):(e.hideOnScroll&&!this.props.hideOnScroll||e.navFooterConfig?.isDockedNavOnPlp&&!this.props.navFooterConfig?.isDockedNavOnPlp)&&(this.updateHiddenState(!1),window.removeEventListener("scroll",this.handleScroll))}render(){let{children:e,navFooterConfig:t}=this.props,{isHidden:i}=this.state;return e({isHidden:!t?.forceShow&&i,updateHiddenState:this.updateHiddenState})}}},134136:function(e,t,i){i.r(t),i.d(t,{default:()=>u});var o=i(686659),n=i(667294),r=i(20256),s=i(806513),a=i(583845),l=i(873438),d=i(774838),c=i(785893);let u=({children:e,dataLayoutShiftBoundaryId:t,hasFixedHeader:i=!1,hasGutter:u=!0,height:h,showKeychainError:p=!1,useViewport:_=!1})=>{(0,n.useEffect)(()=>{(0,o.Z)("MobilePageContainer","/app/packages/layout/MobilePageContainer.tsx")},[]);let x=(0,d.B)(),f=(0,a.jd)(x.userAgent.platform)?a.Vf:0;return(0,c.jsx)(r.xu,{"data-layout-shift-boundary-id":t||"PageContainer",height:_?`calc(100vh - ${f}px)`:h,paddingX:u?s.D6:void 0,paddingY:i||p?void 0:3,children:(0,c.jsx)(l.C,{value:!!u,children:e})})}},178315:function(e,t,i){i.d(t,{KJ:()=>a,LV:()=>s,R$:()=>o,UB:()=>r,dS:()=>l,og:()=>n});let o=64,n=3,r=100,s=44,a="0px 0px 8px rgba(0, 0, 0, 0.1)",l="1px solid #efefef"},81179:function(e,t,i){i.d(t,{Z:()=>o});function o(e,t){let i;if(e.error){let{httpStatus:o,api_error_code:n,redirectUrl:r}=e.error;(404===o||401===o&&7===n)&&(i={pathname:t?"/ideas/":"/",state:{showError:!0}}),301===o&&r&&(i={pathname:r})}return i}},565649:function(e,t,i){i.d(t,{Z:()=>l});var o=i(312048),n=i(935059),r=i(173874),s=i(81179),a=i(661376);function l(e){let t=(0,o.s0)(),i=(0,o.TH)(),{isAuth:l}=(0,n.Z)(),d=!l&&(0,r.L6)(i),c=(0,a.Z)(e),u=(0,s.Z)(c,d);return u&&t(u.pathname,{replace:!0,state:u.state}),c}},592656:function(e,t,i){i.d(t,{Z:()=>h});var o=i(686659),n=i(667294),r=i(20256),s=i(24246),a=i(271202),l=i(134136),d=i(669692),c=i(254889),u=i(785893);function h(e){(0,n.useEffect)(()=>{(0,o.Z)("BoardSectionCreate","/app/www/boardSection/BoardSectionCreate.tsx")},[]);let t=(0,s.Z)(),{backButtonIcon:i,errorMessage:h,name:p,onNextButtonTouch:_,onNameChange:x,selectedPinIds:f=[],useRoundedCorners:b}=e,g=f.length>0?130:64;return(0,u.jsxs)(l.default,{hasFixedHeader:!0,children:[(0,u.jsxs)(a.default,{height:g,paddingY:3,useRoundedCorners:b,children:[(0,u.jsxs)(r.kC,{alignItems:"center",justifyContent:"between",children:[(0,u.jsx)(c.default,{color:"darkGray",icon:i||"cancel",padding:3,size:"sm"}),(0,u.jsx)(r.X6,{accessibilityLevel:1,size:"300",children:t.bt("Добавить раздел", "Add section", "for add board section page", undefined, true)}),(0,u.jsx)(r.xu,{"data-test-id":"create-section-button",children:(0,u.jsx)(r.zx,{accessibilityLabel:t.bt("Добавить", "Add", "boardSectionCreate.Add.Button.Text", undefined, true),color:"red",disabled:""===p.trim(),onClick:_,size:"lg",text:t.bt("Далее", "Next", "Next button for board section create page", undefined, true)})})]}),f&&(0,u.jsx)(d.Z,{selectedPinIds:f})]}),(0,u.jsx)(r.xu,{"data-test-id":"addSectionName",paddingX:2,paddingY:3,children:(0,u.jsx)(r.nv,{errorMessage:h||"",id:"section-name-input",label:t.bt("Имя", "Name", "boardSectionCreate.TextField.Name.Label", undefined, true),onChange:e=>x(e.event),size:"lg",value:p})})]})}},289817:function(e,t,i){i.d(t,{Z:()=>f});var o=i(686659),n=i(667294),r=i(581722),s=i(20256),a=i(935059),l=i(24246),d=i(661376),c=i(809802),u=i(158502),h=i(214119),p=i(828890),_=i(453799),x=i(785893);function f({excludeBoardId:e,hideSectionPickerList:t,onRepin:i}){var f;(0,n.useEffect)(()=>{(0,o.Z)("RepinBoard","/app/www/boardSection/RepinBoard.tsx")},[]);let b=(0,l.Z)(),g=(0,a.Z)(),m=(f=g.isAuth?g.username:"",(0,d.Z)({name:"BoardsResource",options:u.O.options({username:f,boardOrder:"custom",filterStories:!0,mixPublicSecret:!0})}),(0,r.v9)(e=>(0,h.Z)(e)||[])),[v,w]=(0,n.useState)(null);return m.length>0&&(v&&!t?(0,x.jsx)(_.Z,{boardId:v?.id,repin:(e,t)=>{v&&i(v,t)},showSectionRep:!0}):(0,x.jsxs)(s.xu,{"data-test-id":"board-picker-row-container",children:[(0,x.jsx)(s.xu,{marginTop:3,children:(0,x.jsx)(s.xv,{children:b.bt("Все доски", "All boards", "title for board picker all boards section", undefined, true)})}),(0,x.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:`${c.T}px`}},paddingY:3,children:m.filter(t=>t.id!==e).map(e=>(0,x.jsx)(p.Z,{boardId:e.id,onBoardSelected:o=>((e,o)=>{if(!t&&e&&o)return void w(o);i(o)})(o,e)},e.id))})]}))}},642942:function(e,t,i){i.d(t,{Wx:()=>Z,ZP:()=>I});var o=i(686659),n=i(667294),r=i(581722),s=i(312048),a=i(20256),l=i(924591),d=i(24246),c=i(528630),u=i(271202),h=i(134136),p=i(577356),_=i(809802),x=i(289817),f=i(669692),b=i(310758),g=i(782677),m=i(27399),v=i(660322),w=i(407775);let S=e=>t=>{let{source:i,target:o,pinIds:n}=e;if(t({type:"PINS_MOVE",payload:e}),i.boardlessPins||o.boardId!==i.boardId){let e={board_id:o.boardId,pin_ids:n,section_id:o.sectionId};return m.Z.create("BulkEditResource",e).callUpdate()}if(o.sectionId){let e={section_id:o.sectionId,pins:n},i="BoardSectionEditResource";return m.Z.create(i,e).callUpdate().then(o=>{let n=(0,g.Fv)(o.resource_response.data,w.Z[i]);return t((0,v.XM)(i,e,o,n)),o})}let r={section_id:i.sectionId,pins:n};return m.Z.create("BoardSectionPinsResource",r).callDelete()};var y=i(577348),j=i(254889),P=i(453799),A=i(785893);function z(e,t,i){return e?i.bt("Понятно! Подождите, пока мы перемещаем все эти пины…", "Got it! Hang tight while we move all those Pins...", "Toast message for bulk pins move.", undefined, true):t?i.bt("Сохранено в раздел.", "Saved to section!", " - ", undefined, true):i.bt("Сохранено на доске.", "Saved to board!", " - ", undefined, true)}function Z({onAddNewSection:e,useIconWithBackground:t}){(0,n.useEffect)(()=>{(0,o.Z)("RepinSection","/app/www/boardSection/RepinSection.tsx")},[]);let i=(0,d.Z)();return(0,A.jsx)(c.Z,{alignCenter:t,height:t?_.y:_.T,children:(0,A.jsx)(b.Z,{onTouch:e,pressState:"none",children:(0,A.jsxs)(a.xu,{alignItems:"center","data-test-id":"addSectionButton",display:"flex",padding:+!t,children:[t?(0,A.jsx)(a.xu,{color:"secondary",dangerouslySetInlineStyle:{__style:{padding:"14px"}},rounding:2,children:(0,A.jsx)(a.JO,{accessibilityLabel:i.bt("Кнопка создания доски", "Create board button", "RepinSection.CreateBoard.Button", undefined, true),color:"default",icon:"add",size:20})}):(0,A.jsx)(a.JO,{accessibilityLabel:i.bt("Добавить кнопку раздела", "Add section button", " - ", undefined, true),color:"error",icon:"add-circle",size:38}),t?(0,A.jsx)(a.xu,{marginStart:2,children:(0,A.jsx)(a.xv,{size:"400",weight:"bold",children:i.bt("Добавить раздел", "Add section", "Add new section to Pin to", undefined, true)})}):(0,A.jsx)(a.xu,{marginStart:3,children:(0,A.jsx)(a.xv,{weight:"bold",children:i.bt("Добавить раздел", "Add section", "Add new section to Pin to", undefined, true)})})]})})})}class C extends n.PureComponent{constructor(...e){var t,i,o;super(...e),t="onRepinToBoard",i=e=>{e.section_count?this.props.onRepinToBoardWithSections(e):this.props.repinToOtherBoard(e.id,this.props.i18n)},(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}render(){let{boardId:e,boardSectionId:t,orginalBoardId:i,onAddNewSection:o,repin:n,hideBoardPickerRow:r,selectedPinIds:s,isCollaborative:l}=this.props,d=i===e;return(0,A.jsxs)(h.default,{hasFixedHeader:!0,children:[(0,A.jsxs)(u.default,{hasBorder:!0,height:140,children:[(0,A.jsxs)(a.kC,{alignItems:"center",justifyContent:"start",children:[(0,A.jsx)(a.xu,{column:2,children:(0,A.jsx)(j.default,{})}),(0,A.jsx)(a.xu,{column:8,children:(0,A.jsx)(a.X6,{accessibilityLevel:1,align:"center",size:"300",children:this.props.i18n.bt("Выбрать раздел", "Choose section", "title for section selection in repin flow", undefined, true)})}),(0,A.jsx)(a.xu,{column:2})]}),(0,A.jsx)(f.Z,{selectedPinIds:s})]}),e&&(0,A.jsx)(P.Z,{boardId:e,hideBoardPickerRow:d&&r,originalBoardId:i,repin:n,sectionId:t}),d&&(0,A.jsxs)(a.xu,{children:[!l&&(0,A.jsx)(x.Z,{excludeBoardId:e,hideSectionPickerList:!0,onRepin:this.onRepinToBoard}),(0,A.jsx)(Z,{onAddNewSection:o})]})]})}}let I=function(e){let{inSelectAll:t,pinIds:i,orginalBoardId:o,boardSectionId:n,onRefreshBoardSection:a,url:c}=e,{showToast:u}=(0,p.dI)(),h=(0,d.Z)(),_=(0,s.s0)(),x=(0,r.I0)(),f=async(e,r,s)=>{let d=r&&r.id,h={boardId:o,sectionId:n},p={boardId:e,sectionId:d},f=t?(0,y.Z)({source:h,target:p,excludePinIds:i}):S({source:h,target:p,pinIds:i});o!==e?(await x(f),_(c,{})):(await x(f),a&&await a()),u(({hideToast:e})=>(0,A.jsx)(l.Z,{onHide:e,text:z(t,d,s)}))},b=async(e,r)=>{let s={boardId:o,sectionId:n},a={boardId:e,sectionId:void 0};u(({hideToast:e})=>(0,A.jsx)(l.Z,{onHide:e,text:z(t,void 0,r)})),await x(t?(0,y.Z)({source:s,target:a,excludePinIds:i}):S({source:s,target:a,pinIds:i})),_(-2)};return(0,A.jsx)(C,{...e,i18n:h,repin:f,repinToOtherBoard:b})}},669692:function(e,t,i){i.d(t,{Z:()=>d});var o=i(686659),n=i(667294),r=i(20256),s=i(24246),a=i(228612),l=i(785893);function d({selectedPinIds:e}){(0,n.useEffect)(()=>{(0,o.Z)("SelectedPinsPreview","/app/www/boardSection/SelectedPinsPreview.tsx")},[]);let t=(0,s.Z)(),i=(0,n.useRef)(null),d=(0,a.JC)(),c=(e||[]).map(e=>d[e]).filter(Boolean);(0,n.useEffect)(()=>{let e=i.current;e&&(e.scrollLeft=e.scrollWidth-e.offsetWidth)},[c]);let u=c.map((e,i)=>{let{description:o,images:n}=e,s=n?.["236x"];return(0,l.jsx)(r.xu,{marginEnd:1,children:(0,l.jsx)(r.zd,{height:65,rounding:2,wash:!0,width:50,children:s?.url&&(0,l.jsx)(r.Ee,{alt:!!o?.trim()&&o?.trim()||t.bt("Выбранный пин", "Selected Pin", "SelectedPinsPreview.image.accessibilityLabel", undefined, true),color:e.dominant_color??"",fit:"contain",naturalHeight:s?.height??1,naturalWidth:s?.width??1,src:s.url})})},i)});return(0,l.jsx)(r.xu,{ref:i,display:"flex",marginTop:2,overflow:"scroll",children:u})}},809802:function(e,t,i){i.d(t,{T:()=>o,y:()=>n});let o=70,n=80},908808:function(e,t,i){function o(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function n(e,t){return{type:"SECTION_DELETED",payload:{boardId:e,sectionId:t}}}i.d(t,{HG:()=>n,OQ:()=>r,hd:()=>o});let r=(e,t)=>({type:"BOARD_SECTION_EDIT",payload:t})},987072:function(e,t,i){i.d(t,{Z:()=>c});var o=i(782677),n=i(27399),r=i(660322),s=i(908808),a=i(779686),l=i(407775),d=i(438274);let c=(e,t,i,c)=>u=>{let h={board_id:e,initial_pins:t,name:i},p="BoardSectionResource";return n.Z.create(p,h).callCreate().then(i=>{let n=i.resource_response.data,_=(0,o.Fv)(n,l.Z[p]);return c({event_type:7100,object_id_str:n.id}),u((0,r.XM)(p,h,i,_)),u((0,s.hd)(e,n)),u((0,a.vX)({feedId:e,feedType:d.Z.BOARD_SECTIONS,itemIds:[n.id],itemType:"boardsection"})),t.length&&u({type:"PINS_MOVE",payload:{source:{boardId:e},target:{boardId:e,sectionId:n.id},pinIds:t}}),i})}},577348:function(e,t,i){i.d(t,{Z:()=>n});var o=i(27399);let n=e=>t=>{t({type:"PINS_MOVE_ALL",payload:e});let{source:i,target:n,excludePinIds:r}=e,s={board_id:i.boardId,new_board_id:n.boardId,pin_ids:r,old_section_id:i.sectionId,new_section_id:n.sectionId};return o.Z.create("BulkEditSelectAllResource",s).callUpdate()}},214119:function(e,t,i){i.d(t,{Z:()=>o});let o=(0,i(442279).createSelector)(({users:e,boards:t,session:i})=>{let o=e[i.userId]||null;return Object.keys(t).reduce((e,i)=>{let n=t[i];return!n.archived_by_me_at&&(n.owner?.id===o?.id||n.collaborating_users&&n.collaborating_users.map(({id:e})=>e).includes(o?.id))&&n.cover_images?e.concat([n]):e},[])},e=>e.sort((e,t)=>e?.name?.localeCompare(t?.name??"")??0))},254889:function(e,t,i){i.r(t),i.d(t,{default:()=>m});var o=i(686659),n=i(667294),r=i(581722),s=i(312048),a=i(20256),l=i(4533),d=i(104999),c=i(746868),u=i(351736),h=i(24246),p=i(173874),_=i(34550),x=i(865043),f=i(736328),b=i(739405),g=i(785893);function m({alignIconLeft:e,bgColor:t,color:i,disableRedirect:m=!1,fallbackUrl:v,icon:w="arrow-back",onTouch:S,padding:y,placement:j,shouldUseFallbackUrl:P,size:A="lg",viewParameter:z,viewType:Z,isVisualSearch:C}){(0,n.useEffect)(()=>{(0,o.Z)("BackButton","/app/www/routing/BackButton.tsx")},[]);let I=(0,h.Z)(),k=(0,s.s0)(),B=(0,s.TH)(),O=(0,b.HG)(),R=(0,r.v9)(e=>e.session.isAuthenticated),E=(0,d.Z)(),T=(0,f.Z)(),L=(0,u.vs)(),{viewType:N,viewParameter:H}=(0,c.SU)(),[F,M]=Z?[Z,z]:[N,H],D=()=>{let e=(0,_.M0)().getItem(l.pm);B.key||"/ideas"!==v?(0,x.My)(`pinner_conversion.back_button.${String(e?.[0].pageType)}`):(0,x.My)("pinner_conversion.back_button.no_history"),(0,x.My)(`web_back_button_click.${String(j)}.is_auth_${String(R)}`),T({action:"click",item:"back-button"}),F&&E({view_type:F,view_parameter:M,element:34,event_type:102}),S&&S(),m||((!B.key||B.state&&"redirect"===B.state.referrer||P)&&v?k(v):B.pathname.includes("/password/reset/")&&B.search&&B.search.includes("?nativeShouldDismiss=true")?k("/login/?dismissWebview=true"):k(-1))},W=L?u.t4:"white",Y=(0,p.am)(B)||C||"white"===i;return(0,g.jsx)(a.xu,{"data-test-id":"back-button",children:e?(0,g.jsx)(a.xu,{alignItems:"center",display:"flex",height:48,marginStart:"cancel"===w?-1:-2,width:48,children:(0,g.jsx)(a.hU,{accessibilityLabel:I.bt("Назад", "Back", "navigation button", undefined, true),bgColor:t,icon:w,iconColor:!i&&(!t||["white","lightGray","transparent"].includes(t))?"subtle":i,onClick:D,padding:"auto"!==y?y:2,size:A})}):(0,g.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:O||Y||t?"":W,width:L&&!Y?"fit-content":""}},rounding:"circle",children:(0,g.jsx)(a.hU,{accessibilityLabel:I.bt("Назад", "Back", "navigation button", undefined, true),bgColor:t||O?t:"transparent",icon:w,iconColor:!i&&(!t||["white","lightGray","transparent"].includes(t))?"subtle":i,onClick:D,padding:"auto"!==y?y:2,size:A})})})}},828890:function(e,t,i){i.d(t,{Z:()=>h});var o=i(686659),n=i(667294),r=i(581722),s=i(20256),a=i(24246),l=i(216975),d=i(120100),c=i(842715),u=i(785893);function h({boardId:e,onBoardSelected:t,noArrowIcon:i,showSingleBoardRep:h}){(0,n.useEffect)(()=>{(0,o.Z)("BoardPickerRow","/app/www/save/duplo/BoardPickerRow.tsx")},[]);let p=(0,a.Z)(),_=(0,r.v9)(({boards:e})=>e)[e],x=_?.section_count,f=!!x&&x>0,b=(0,d.Z)(),g=_?.name??"this board";return(0,u.jsx)(s.iP,{accessibilityLabel:(0,l.Wc)(`${p.bt("Выберите {{ boardName }}", "Select {{ boardName }}", "board.picker.row.select.board", undefined, true)}`,{boardName:g}),onTap:b({fn:()=>t(f)}),rounding:2,tapStyle:"compress",children:(0,u.jsx)(c.Z,{boardId:e,noArrowIcon:i,showSingleBoardRep:h})})}},842715:function(e,t,i){i.d(t,{Z:()=>p});var o=i(686659),n=i(667294),r=i(581722),s=i(20256),a=i(319226),l=i(24246),d=i(216975),c=i(380938),u=i(662911),h=i(785893);function p({boardId:e,navigateToBoard:t,noArrowIcon:i,showCollaborators:p,showSingleBoardRep:_,shouldShowPinAndSectionCount:x}){(0,n.useEffect)(()=>{(0,o.Z)("BoardRow","/app/www/save/duplo/BoardRow.tsx")},[]);let f=(0,l.Z)(),b=(0,r.v9)(({boards:e})=>e)[e];if(!b)return null;let g=(b.collaborating_users||[]).map(e=>({name:e.username??"",src:"https://s.pinimg.com/images/user/default_75.png"===e.image_medium_url?"":e.image_medium_url??""})),m=new s.Ry(0),v=b.pin_count,w=b.section_count,S=(0,h.jsx)(n.Fragment,{children:(0,h.jsx)(s.xu,{"data-test-id":w?"boardWithSection":"boardWithoutSection",children:(0,h.jsxs)(s.xu,{alignItems:"center",column:12,"data-test-id":"board-picker-row",display:"flex",marginBottom:4*!!_,rounding:2,children:[(0,h.jsx)(s.xu,{paddingY:2*!_,children:_?(0,h.jsx)(s.xu,{height:48,overflow:"hidden",width:48,children:(0,h.jsx)(s.zd,{height:"100%",rounding:2,width:"100%",children:(0,h.jsx)(s.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:b.image_cover_url||" "})})}):(0,h.jsx)(s.xu,{height:60,overflow:"hidden",rounding:4,width:60,children:(0,h.jsx)(u.default,{boardKey:{type:"Legacy",data:b},fullSize:!0,hideSecretBoardIcon:!0,type:"thumbnail",viewType:void 0})})}),(0,h.jsxs)(s.kC,{alignItems:"center",flex:"grow",justifyContent:"between",children:[(0,h.jsxs)(s.xu,{direction:"column",display:"flex",justifyContent:"center",marginStart:_?2:4,overflow:_?"hidden":"auto",width:"100%",children:[(0,h.jsx)(s.xv,{lineClamp:_?1:void 0,size:"400",weight:"bold",children:b.name}),x&&(0,h.jsxs)(s.kC,{children:[(0,h.jsx)(s.xv,{inline:!0,children:!!v&&(0,d.nk)(f.nbt(["{{ PinCount }} пин", "{{ PinCount }} пина", "{{ PinCount }} пинов"], v ?? 0, "BoardRow.pinCount", true),{PinCount:v})}),!!v&&!!w&&(0,h.jsx)(c.Z,{}),(0,h.jsx)(s.xv,{inline:!0,children:!!w&&(0,d.nk)(f.nbt(["{{ sectionCount }} раздел", "{{ sectionCount }} раздела", "{{ sectionCount }} разделов"], w ?? 0, "BoardRow.sectionCount", true),{sectionCount:w})})]})]}),(0,h.jsxs)(s.kC,{alignItems:_?"center":"start",justifyContent:"start",children:["secret"===b.privacy&&(0,h.jsx)(s.xu,{marginStart:_?3:1,children:(0,h.jsx)(s.JO,{accessibilityLabel:f.bt("значок секретной доски", "secret board icon", " - ", undefined, true),color:_?"default":"subtle",icon:"lock"})}),b.is_collaborative&&(_||p)&&g.length>0?(0,h.jsx)(s.xu,{zIndex:m,children:(0,h.jsx)(a.HE,{collaborators:g,size:1===g.length?"sm":"xs"})}):b.is_collaborative&&(0,h.jsx)(s.xu,{marginStart:1,children:(0,h.jsx)(s.JO,{accessibilityLabel:f.bt("значок общей доски", "group board icon", " - ", undefined, true),icon:"people"})}),!i&&!!b.section_count&&(0,h.jsx)(s.xu,{"data-test-id":"boardSectionPicker",marginStart:3*!!_,children:(0,h.jsx)(s.JO,{accessibilityLabel:f.bt("значок выбора раздела доски", "board section board picker icon", " - ", undefined, true),color:_?"default":"subtle",icon:"arrow-forward"})})]})]})]})})});return t&&b.url?(0,h.jsx)(s.Tg,{href:b.url,rounding:2,tapStyle:"compress",children:S}):S}},453799:function(e,t,i){i.d(t,{Z:()=>f});var o=i(686659),n=i(667294),r=i(581722),s=i(312048),a=i(20256),l=i(24246),d=i(565649),c=i(914253),u=i(828890),h=i(216975),p=i(310758),_=i(785893);function x({onSectionSelected:e,sectionId:t,showSectionRep:i}){(0,n.useEffect)(()=>{(0,o.Z)("SectionPickerRow","/app/www/save/duplo/SectionPickerRow.tsx")},[]);let s=(0,r.v9)(({boardsections:e})=>e[t]),d=(0,l.Z)(),c=s&&s.preview_pins?.[0]&&s.preview_pins[0].image_medium_url,u=s?.title??"";return(0,_.jsx)(p.Z,{onTouch:e,pressState:"none",rounding:2,children:(0,_.jsxs)(a.xu,{alignItems:"center",column:12,"data-test-id":"sectionPickerRow",display:"flex",marginBottom:4*!!i,rounding:2,children:[i&&(0,_.jsx)(a.xu,{height:48,width:51,children:(0,_.jsx)(a.zd,{height:"100%",rounding:2,width:"100%",children:c&&(0,_.jsx)(a.Ee,{alt:(0,h.Wc)(d.bt("Эскиз доски {{ boardSectionName }}", "{{ boardSectionName }} thumbnail", "SectionPickerRow.boardImage.accessibilityLabel.text", undefined, true),{boardSectionName:u}),color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:c})})}),!i&&(0,_.jsx)(a.xu,{column:1,paddingY:2}),(0,_.jsx)(a.xu,{column:11,display:"flex",flex:"grow",justifyContent:"between",paddingY:2,children:i?(0,_.jsx)(a.xu,{marginStart:2,overflow:"hidden",width:"100%",children:(0,_.jsx)(a.xv,{lineClamp:1,size:"400",weight:"bold",children:s?.title})}):(0,_.jsx)(a.xu,{marginStart:2,children:(0,_.jsx)(a.xv,{weight:"bold",children:s?.title})})})]})})}function f({boardId:e,originalBoardId:t,sectionId:i,repin:h,hideBoardPickerRow:p,showSectionRep:f}){(0,n.useEffect)(()=>{(0,o.Z)("SectionPickerList","/app/www/save/duplo/SectionPickerList.tsx")},[]);let b=(0,l.Z)(),{isFetching:g,boardSections:m,filteredBoardSections:v}=((e,t)=>{let{isFetching:i}=(0,d.Z)({name:"BoardSectionsRepinResource",options:{board_id:e}}),o=(0,r.v9)(({feeds:t})=>(t[`board-sections:${e}`]||[]).reduce((e,t)=>{if("boardsection"===t.type){let i={type:"boardsection",id:t.id};e.push(i)}return e},[])),n=(0,r.v9)(i=>o.map(e=>e.id).reduce((o,n)=>{let r=i.boardsections[n??""];return n!==t&&r&&o.push({board:{id:e},id:r.id,title:r.title,type:"boardsection",slug:r.slug}),o},[]));return{isFetching:i,boardSections:o,filteredBoardSections:n}})(e,i),w=(0,s.s0)(),S=(0,c.gC)()(t||"");return(0,_.jsxs)(a.xu,{children:[m.length>0&&(0,_.jsxs)(a.xu,{paddingY:3*!f,children:[f&&(0,_.jsx)(a.xu,{paddingY:2,children:(0,_.jsx)(a.xu,{marginBottom:2,children:(0,_.jsx)(a.X6,{accessibilityLevel:3,size:"300",children:(0,_.jsx)(a.xv,{inline:!0,children:b.bt("Доска", "Board", "RepinFlow.SectionPickerList.Board", undefined, true)})})})}),!p&&(0,_.jsx)(u.Z,{boardId:e,noArrowIcon:!0,onBoardSelected:()=>h(e,void 0,b),showSingleBoardRep:f},e),f&&(0,_.jsx)(a.xu,{paddingY:4,children:(0,_.jsx)(a.X6,{accessibilityLevel:3,size:"300",children:(0,_.jsx)(a.xv,{inline:!0,children:b.bt("Раздел", "Section", "RepinFlow.SectionPickerList.Section", undefined, true)})})}),v.map(i=>(0,_.jsx)(x,{onSectionSelected:()=>{h(e,i,b),t&&w(S?.url??"")},sectionId:i.id??"",showSectionRep:f},i.id))]}),(0,_.jsx)(a.xH,{accessibilityLabel:b.bt("Загрузка раздела доски для этапа сохранений пинов", "Loading board section for repin flow", " - ", undefined, true),show:g})]})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/23234.ru_RU-608d6ed940c96354.mjs.map