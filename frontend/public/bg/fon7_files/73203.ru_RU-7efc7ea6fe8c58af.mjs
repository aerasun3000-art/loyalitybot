(self.modernJsonp=self.modernJsonp||[]).push([["73203"],{917789:function(e,i,n){n.r(i),n.d(i,{default:()=>a});let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardPickerList_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],type:"Pin",abstractKey:null};t.hash="76b22cc5d658befe1dc27454d3aee77f";let a=t},887802:function(e,i,n){var t;n.r(i),n.d(i,{default:()=>r});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardTitleSuggestionList_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BoardSection",kind:"LinkedField",name:"section",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:t=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:t,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:t,storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};a.hash="69ffcdea57a7778d2ebbcd41c276c0d0";let r=a},104922:function(e,i,n){n.r(i),n.d(i,{default:()=>a});let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileRepinCreateScreen_pin",selections:[{args:null,kind:"FragmentSpread",name:"RepinAddSection_pin"}],type:"Pin",abstractKey:null};t.hash="2d5f10a7f4e54a8cf9118f134bcd7386";let a=t},521906:function(e,i,n){n.r(i),n.d(i,{default:()=>a});let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileRepinPicker_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{args:null,kind:"FragmentSpread",name:"RepinBoardPicker_pin"},{args:null,kind:"FragmentSpread",name:"RepinSectionPicker_pin"},{args:null,kind:"FragmentSpread",name:"RepinCreateBoardButton_pin"}],type:"Pin",abstractKey:null};t.hash="0b70f6e25d25129525379f38c7f56293";let a=t},34554:function(e,i,n){var t;n.r(i),n.d(i,{default:()=>r});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinAddSection_pin",selections:[t={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};a.hash="b3ec14d29962e56f80dd52e7e6d7a6d9";let r=a},361817:function(e,i,n){var t;n.r(i),n.d(i,{default:()=>r});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinBoardPicker_pin",selections:[t={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[t],storageKey:null},{args:null,kind:"FragmentSpread",name:"BoardPickerList_pin"},{args:null,kind:"FragmentSpread",name:"BoardTitleSuggestionList_pin"},{args:null,kind:"FragmentSpread",name:"useClientTrackingParams_pin"}],type:"Pin",abstractKey:null};a.hash="475036dcb56a51d3552313200b8c9d45";let r=a},59986:function(e,i,n){var t;n.r(i),n.d(i,{default:()=>r});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinCreateBoardButton_pin",selections:[t={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[t],storageKey:null}],type:"Pin",abstractKey:null};a.hash="1612c2df94f42990b3d4f6ccede72a70";let r=a},976529:function(e,i,n){var t,a,r,l,o,s,d;n.r(i),n.d(i,{default:()=>u});let c=(t=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],a=[{kind:"Variable",name:"pin",variableName:"pinId"}],l={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d=[r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],{fragment:{argumentDefinitions:t,kind:"Fragment",metadata:null,name:"RepinPageQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"RepinPage_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"RepinPageQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},l,{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},o,{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},s,l,o],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]},{alias:null,args:null,concreteType:"BoardSection",kind:"LinkedField",name:"section",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},s],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:d,storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:d,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:d,storageKey:null}],storageKey:null},s],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"6e6e47e50455cef42543b1499ef3192d663ab714013a0ddc618b21558010363d",metadata:{},name:"RepinPageQuery",operationKind:"query",text:null}});c.hash="76093586a269ca0330e25a57bd33f665";let u=c},763536:function(e,i,n){n.r(i),n.d(i,{default:()=>a});let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinPage_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"MobileRepinPicker_pin"},{args:null,kind:"FragmentSpread",name:"MobileRepinCreateScreen_pin"}],type:"Pin",abstractKey:null};t.hash="334d0ce72c30565b62e52dd00bf86623";let a=t},112402:function(e,i,n){var t;n.r(i),n.d(i,{default:()=>r});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinSectionPicker_pin",selections:[t={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[t],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],type:"Pin",abstractKey:null};a.hash="f0b2fbadfba92480a2077999a000a308";let r=a},609464:function(e,i,n){var t,a,r,l,o;n.r(i),n.d(i,{default:()=>d});let s={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],kind:"Fragment",metadata:null,name:"useFetchBoardTitleSuggestionsQuery",selections:[{alias:null,args:a=[{kind:"Variable",name:"pin",variableName:"pinId"}],concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l={alias:null,args:null,concreteType:"BoardTitleSuggestions",kind:"LinkedField",name:"boardTitleSuggestions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null},o={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"useFetchBoardTitleSuggestionsQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null},o],storageKey:null}]},params:{id:"dfccee15ebd4af4563083cc11670f30e6390ba0f2d1317da3d908269f01eadba",metadata:{},name:"useFetchBoardTitleSuggestionsQuery",operationKind:"query",text:null}};s.hash="a8967078f1de7ce3a263a224d0d0e710";let d=s},802108:function(e,i,n){n.d(i,{AS:()=>d,Ps:()=>r,Q6:()=>g,ZP:()=>c,le:()=>_,qe:()=>u,yU:()=>p});var t=n(360033),a=n(907049);let r=(e,i)=>e.length===i.length&&e.every((e,n)=>(0,a.Z)(e,i[n])),l=(e,i)=>e.length===i.length&&e.every((e,n)=>e===i[n]),o=e=>e;function s(e,i=l,n=o){return function(t){let a=[];return function(...r){let l=a.find(e=>i(e.args,n(r)));if(l)return l.result;let o=t(...r);return a.push({args:n(r),result:o}),e&&a.length>e&&a.shift(),o}}}function d(e,i=l,n=o){let t=[];return{memoize:function(a){return function(...r){let l=n(r),o=t.find(e=>i(e.args,l));if(o)return o.result;let s=a(...r);return t.push({args:l,result:s}),e&&t.length>e&&t.shift(),s}},clearCache:function(){t=[]}}}let c=s(),u=s(1),p=s(void 0,l,e=>[JSON.stringify(e)]),g=s(0,r),_=s(0,(e,i)=>e.length===i.length&&e.every((e,n)=>(0,t.ZP)(e,i[n])))},26499:function(e,i,n){n.d(i,{Bb:()=>h,Bx:()=>o,F4:()=>l,Qj:()=>s,_6:()=>_,gv:()=>r,hg:()=>d,is:()=>p,jP:()=>g,lt:()=>a,oM:()=>c,wI:()=>u});var t=n(575820);let a=e=>e.bt("Войдите, чтобы продолжить", "Log in to continue", "limitedLogin.modalHeader.default", undefined, true),r=({firstName:e,i18n:i})=>e?(i.bt("{{ name }} приглашает вас на доску", "{{ name }} invited you to join their board", "limitedLogin.modalHeader.groupBoardCollab", undefined, true)).replace("{{ name }}",e):i.bt("Ваши друзья приглашают вас на доску", "Your friends invited you to join their board", "limitedLogin.modalHeader.groupBoardCollab", undefined, true),l=e=>{let i=(0,t.mB)(e.search).board_url;if(i){let e=(0,t.Jx)(i),n=(0,t.XP)({accept_invite:!0,seamless:!0});return e.includes("?")?`${e}&${n}`:`${e}?${n}`}return e.pathname},o=e=>e.bt("Войдите, чтобы сохранить пин", "Log in to save this Pin", "limitedLogin.modalHeader.repin", undefined, true),s=e=>{let i=e.pathname;if(i.startsWith("/pin/")){let e=i.split("/");if(e.length>2)return`/${e[1]}/${e[2]}/repin/`}return i},d=e=>e.bt("Войдите, чтобы отправить пин", "Log in to send this Pin", "limitedLogin.modalHeader.send", undefined, true),c=e=>e.bt("Войдите, чтобы редактировать пин", "Log in to edit this Pin", "limitedLogin.modalHeader.editPin", undefined, true),u=e=>{let i=e.pathname;if(i.startsWith("/pin/")){let e=i.split("/");if(e.length>2)return`/${e[1]}/${e[2]}/edit/`}return i},p=e=>e.bt("Войдите, чтобы создать пин или доску", "Log in to create a Pin or board", "limitedLogin.modalHeader.create", undefined, true),g=e=>e.bt("Войдите, чтобы скрыть этот пин", "Log in to hide this Pin", "limitedLogin.modalHeader.hidePin", undefined, true),_=e=>e.bt("Войдите, чтобы поделиться профилем", "Log in to share the profile", "limitedLogin.modalHeader.shareProfile", undefined, true),h=e=>e.bt("Войдите, чтобы создать доску", "Log in to create a board", "limitedLogin.modalHeader.createBoard", undefined, true)},454985:function(e,i,n){n.d(i,{Z:()=>d});var t=n(686659),a=n(667294),r=n(24246),l=n(26499),o=n(36776),s=n(785893);function d({children:e,callbackFunction:i,modalHeader:n,nextLocation:d}){(0,a.useEffect)(()=>{(0,t.Z)("WithLimitedLogin","/app/www/login/duplo/LimitedLogin/WithLimitedLogin.tsx")},[]);let c=(0,r.Z)(),{viewer:u,loginForMore:p,limitedLoginModalSubheader:g,limitedLoginModalNextLocation:_}=(0,o.m)(),h="LIMITED_LOGIN"===u.type;return(0,s.jsx)("div",{onClickCapture:e=>{h&&(i&&i(),e&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),p?.setVisible(!0),g?.setText(n||(0,l.lt)(c)),d&&_?.setRoute(d))},children:e})}},652436:function(e,i,n){n.d(i,{ZP:()=>iB,vY:()=>ij});var t,a,r,l,o,s,d,c,u,p,g,_=n(686659),h=n(667294),m=n(581722),f=n(167912),y=n(312048),b=n(172045),x=n(20256),P=n(27399),v=n(104999),k=n(375217),S=n(465784),I=n(289935),T=n(935059),w=n(183e3),j=n(281215),B=n(24246),F=n(31725),R=n(783734),A=n(501010),Z=n(890678),K=n(565649),L=n(739405),C=n(893957),z=n(328299),E=n(160587),M=n(604100),O=n(214119),D=n(157498);let $=(void 0!==t||(t=n(609464)).hash&&"a8967078f1de7ce3a263a224d0d0e710"!==t.hash&&console.error("The definition of 'useFetchBoardTitleSuggestionsQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),t),H=e=>{let{v3GetPinQuery:i}=(0,f.useLazyLoadQuery)($,{pinId:e});if(i?.error?.message)throw i?.error;return i?.data?.boardTitleSuggestions?.map(({title:e})=>e).filter(Boolean)||[]};var W=n(367683),N=n(924591),U=n(577356),Q=n(592656),V=n(741423),q=n(987072),G=n(862564),J=n(322360),Y=n(500912),X=n(785893);let ee=(void 0!==a||(a=n(34554)).hash&&"b3ec14d29962e56f80dd52e7e6d7a6d9"!==a.hash&&console.error("The definition of 'RepinAddSection_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function ei({createSectionAndRepin:e,errorMessage:i,i18n:n,pin:t,setErrorMessage:a,useRoundedCorners:r}){let[l,o]=(0,h.useState)("");return(0,X.jsx)(Q.Z,{backButtonIcon:"arrow-back",errorMessage:i,name:l,onNameChange:e=>{a(""),o(e.target.value)},onNextButtonTouch:()=>{e(l,n)},selectedPinIds:[t.entityId],useRoundedCorners:r})}function en(e){(0,h.useEffect)(()=>{(0,_.Z)("RepinAddSection","/app/www/save/duplo/RepinAddSection.tsx")},[]);let{boardId:i,isEditingPin:n,onSuccess:t,pinKey:a,pinBoardId:r,pinSectionId:l,trackingParams:o,useRoundedCorners:s}=e,d=(0,w.Z)(ee,a),c=(0,m.I0)(),u=(0,y.s0)(),p=(0,B.Z)(),{showToast:g}=(0,U.dI)(),f=(0,v.Z)(),b=(0,Y.n)(),{checkExperiment:x}=(0,A.Z)(),P=(0,W.cO)(),[k,S]=(0,h.useState)(""),{showRepinConfirmation:I}=(0,V.Z)(),T=e=>u(e);return(0,X.jsx)(ei,{createSectionAndRepin:e=>{let a=e=>S(e.message_detail||e.message);c((0,q.Z)(i,[],e,f)).then(e=>{g(({hideToast:e})=>(0,X.jsx)(N.Z,{onHide:e,text:p.bt("Раздел добавлен", "Section added!", " - ", undefined, true)}));let s=e.resource_response.data;c((0,J.w)({checkExperiment:x,i18n:p,logContextEvent:f,pinId:d.entityId,boardId:i,onSuccess:n?void 0:()=>{P("Save",{pin_id:d.entityId}),t()},showRepinConfirmation:I,section:s,trackingParams:{clientTrackingParams:o,pinnedToBoardId:d.pinnedToBoard?d.pinnedToBoard.entityId:""},historyPush:T,savePinId:b?.save??(()=>{})})).then(()=>{d&&r&&c((0,G.q)({pinId:d.entityId,boardId:r,boardSectionId:l,clientTrackingParams:o})).then(()=>d.pinnedToBoard?u(d.pinnedToBoard.url??"",{replace:!0}):void 0)}).catch(a)}).catch(a)},errorMessage:k,i18n:p,pin:d,setErrorMessage:S,useRoundedCorners:s})}var et=n(520803);function ea(){let e=(0,y.TH)(),{params:{boardId:i,id:n}}=(0,et.Z)(),{search:t}=e,a=new URLSearchParams(t),r=!!a.get("isEditingPin"),l=a.get("pinBoardId")??"";return{boardId:i,pinId:n,isEditingPin:r,pinBoardId:l,pinSectionId:a.get("pinSectionId")??"",originalPinId:a.get("originalPinId")??"",isFromToast:!!a.get("isFromToast")}}let er=(void 0!==r||(r=n(104922)).hash&&"2d5f10a7f4e54a8cf9118f134bcd7386"!==r.hash&&console.error("The definition of 'MobileRepinCreateScreen_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function el({pinKey:e,trackingParams:i,useRoundedCorners:n}){(0,h.useEffect)(()=>{(0,_.Z)("MobileRepinCreateScreen","/app/www/save/MobileRepinCreateScreen.tsx")},[]);let t=(0,w.Z)(er,e),a=(0,y.s0)(),{boardId:r,isEditingPin:l,pinBoardId:o,pinSectionId:s}=ea();return r?(0,X.jsx)(en,{boardId:r,isEditingPin:l,onSuccess:()=>{a(-3)},pinBoardId:o,pinKey:t,pinSectionId:s,trackingParams:i,useRoundedCorners:n}):null}var eo=n(216975),es=n(583845),ed=n(271202),ec=n(134136),eu=n(642942),ep=n(919203),eg=n(250704);function e_(e,i){return!!(e&&e.placement_id&&e.experience_id===i)}var eh=n(26499),em=n(454985),ef=n(39722),ey=n(802108);let eb="cubic-bezier(0.66, 0.025, 0.33, 0.975)",ex=(0,ey.qe)((e,i,n,t,a)=>{let r=e,l=i,o=0,s=0,d="",c=Math.floor(i/3);if("shrinkToPin"===n&&(o="24px",s=1,r=Math.floor(3*c/2),l=c),"pinToGrid"===n&&t&&a){let e=t.getBoundingClientRect(),i=a.getBoundingClientRect(),n=i.x+i.width/2-(e.x+e.width/2),u=i.y+i.height/2-(e.y+e.height/2);d=`translate(${n}px, ${u}px)`,o="24px 0px 0px 24px",s=1,r=c,l=c}return{borderRadius:o,height:r,opacity:s,overflow:"hidden",width:l,WebkitTransformOrigin:"center center",transformOrigin:"center center",WebkitTransform:d,transform:d,WebkitTransition:`all .42s ${eb}`,transition:`all .42s ${eb}`}}),eP=(0,ey.qe)(e=>({opacity:+!!e,WebkitTransition:`opacity .42s ${eb}`,transition:`opacity .42s ${eb}`})),ev=(0,ey.qe)(e=>({opacity:+!e,WebkitTransition:`all .25s ${eb}`,transition:`all .25s ${eb}`,zIndex:3}));function ek({completeExperience:e,pinDominantColor:i,pinImageHeight:n,pinImageWidth:t,pinImageUrl:a}){let r,l,o,s;(0,h.useEffect)(()=>{(0,_.Z)("BoardCreateEdu","/app/www/nux/BoardCreateEdu.tsx")},[]);let d=(0,B.Z)(),[c,u]=(0,h.useState)("visible"),[p,g]=(0,h.useState)("none"),m=window.innerWidth,f=Math.floor(m/3),y=Math.floor(m/6);(0,h.useEffect)(()=>{a&&"none"===p&&(r=setTimeout(()=>{g("shrinkToPin")},85)),a&&"shrinkToPin"===p&&(l=setTimeout(()=>{g("pinToGrid")},2e3)),"pinToGrid"===p&&"visible"===c&&(o=setTimeout(()=>{u("hidden")},2e3)),"hidden"===c&&(s=setTimeout(()=>{u("none"),e()},300))}),(0,h.useEffect)(()=>()=>{clearTimeout(r),clearTimeout(l),clearTimeout(o),clearTimeout(s)},[]);let b=(0,h.useRef)(null),P=(0,h.useRef)(null);return(0,X.jsxs)(x.xu,{alignItems:"center",bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:ev("hidden"===c)},direction:"column",display:"none"===c?"none":"flex",justifyContent:"center",left:!0,position:"fixed",right:!0,top:!0,children:[(0,X.jsxs)(x.xu,{alignItems:"center",display:"flex",height:m/2,justifyContent:"center",marginBottom:8,position:"relative",width:"100%",children:[(0,X.jsx)(x.xu,{dangerouslySetInlineStyle:{__style:eP("pinToGrid"===p)},position:"absolute",children:(0,X.jsx)(x.zd,{height:f,rounding:6,width:f+y+1,children:(0,X.jsxs)(x.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,X.jsx)(x.xu,{ref:P,color:"transparent",height:f,width:f}),(0,X.jsxs)(x.kC,{alignItems:"stretch",direction:"column",justifyContent:"between",children:[(0,X.jsx)(x.xu,{color:"secondary",height:y,width:y}),(0,X.jsx)(x.xu,{color:"secondary",height:y,width:y})]})]})})}),(0,X.jsx)(x.xu,{ref:b,dangerouslySetInlineStyle:{__style:ex(n/t*m,m,p,b.current,P.current)},position:"absolute",children:(0,X.jsx)(x.Ee,{alt:d.bt("Изображение пина", "Pin image", "Pin image on repin page", undefined, true),color:i,fit:"cover",naturalHeight:n,naturalWidth:t,src:a})})]}),(0,X.jsx)(x.xu,{marginBottom:8,marginTop:8,paddingX:12,children:(0,X.jsx)(x.X6,{align:"center",size:"600",children:d.bt("Создавайте доски, чтобы упорядочить идеи", "Keep your ideas organized by creating a board", "boardPicker.edu.heading", undefined, true)})})]})}var eS=n(603909),eI=n(63959),eT=n(178315);function ew(e,i,n){var t;return(i="symbol"==typeof(t=function(e,i){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,i||"default");if("object"!=typeof t)return t;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(i,"string"))?t:t+"")in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}let ej=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],eB=(e,i)=>Math.random()*((e||1)-(i||0))+(i||0),eF=e=>Math.PI/180*e;class eR extends h.PureComponent{constructor(...e){super(...e),ew(this,"animationTimer",null),ew(this,"canvasRemovalTimer",null),ew(this,"childrenContainerRef",(0,h.createRef)()),ew(this,"containerRef",(0,h.createRef)()),ew(this,"buildCanvas",()=>{if(!this.containerRef.current)return null;let e=window.innerWidth,{height:i,top:n}=this.containerRef.current.getBoundingClientRect(),t=document.createElement("canvas");return t.style.position="absolute",t.style.left="0px",t.style.top=`${n-(e-i)/2}px`,t.style.pointerEvents="none",t.style.width=`${e}px`,t.style.height=`${e}px`,t.width=e,t.height=e,t}),ew(this,"explode",()=>{let e=this.buildCanvas();if(!e)return;let i=this.containerRef.current,n=this.childrenContainerRef.current,t=e.getContext("2d");i?.insertBefore(e,n);let a=Array.from(Array(120)).map(()=>({x:e.width/2,y:e.height/2,radius:Math.round(eB(10,30)),color:ej[Math.floor(Math.random()*ej.length)],degree:Number(eB(0,360).toFixed(1)),speed:Math.round(eB(0,25)),friction:.9,opacity:Number(eB(0,.5).toFixed(1)),yVel:0,gravity:.04})),r=(e,i,n,t)=>{window.requestAnimationFrame(()=>r(e,i,n,t)),i.clearRect(0,0,n,t),e.forEach(e=>{e.x+=e.speed*Math.cos(eF(e.degree)),e.y+=e.speed*Math.sin(eF(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(i.beginPath(),i.globalAlpha=e.opacity,i.fillStyle=e.color,i.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),i.fill())})};t&&r(a,t,e.width,e.height),this.canvasRemovalTimer=setTimeout(()=>{i?.removeChild(e)},(this.props.delay||0)+1e3)})}componentDidUpdate(e){let{delay:i,startAnimation:n}=this.props,{startAnimation:t}=e;n&&t!==n&&(this.animationTimer=setTimeout(this.explode,i))}componentWillUnmount(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}render(){return(0,X.jsx)(x.xu,{ref:this.containerRef,children:(0,X.jsx)(x.xu,{ref:this.childrenContainerRef,children:this.props.children})})}}function eA(e,i,n){var t;return(i="symbol"==typeof(t=function(e,i){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,i||"default");if("object"!=typeof t)return t;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(i,"string"))?t:t+"")in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}ew(eR,"defaultProps",{delay:0});let eZ=(e,i,n)=>{let t=[],a=i.current?.getBoundingClientRect(),r=n.current?.getBoundingClientRect();if(a&&r){let e={x:r.left-a.left,y:r.top-a.top},i={x:r.width/a.width,y:r.height/a.height};t.push(`translate(${e.x}px, ${e.y}px)`),t.push(`scale(${i.x}, ${i.y})`)}return{WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?t.join(" "):"none",transform:e?t.join(" "):"none",WebkitTransition:"all .5s ease-in-out",transition:"all .5s ease-in-out",borderRadius:e?"8px 0px 0px 0px":"8px",overflow:"hidden",marginBottom:24}};class eK extends h.PureComponent{constructor(...e){super(...e),eA(this,"state",{startAnimation:!1,animationStyles:null}),eA(this,"dismissTimer",null),eA(this,"pinRef",(0,h.createRef)()),eA(this,"pinDestinationRef",(0,h.createRef)()),eA(this,"handleAnimationAndCompletion",()=>{let{onComplete:e,savePin:i,selectedBoardName:n}=this.props;if(!n)return;let t=this.startAnimation();Promise.all([t,i(n)]).then(i=>{let[,t]=i;e(t,n)}).catch(e=>{t.then(()=>{e?.onError?.()})})}),eA(this,"startAnimation",()=>new Promise(e=>{let i=eZ(!0,this.pinRef,this.pinDestinationRef);this.setState({startAnimation:!0,animationStyles:i},()=>{this.dismissTimer=setTimeout(()=>{e()},2600)})}))}componentWillUnmount(){this.dismissTimer&&clearTimeout(this.dismissTimer)}componentDidUpdate(){let{selectedBoardName:e}=this.props,{startAnimation:i}=this.state;e&&!i&&this.handleAnimationAndCompletion()}render(){let{pinDominantColor:e,pinImageUrl:i,selectedBoardName:n}=this.props,{startAnimation:t,animationStyles:a}=this.state;return(0,X.jsxs)(h.Fragment,{children:[(0,X.jsx)(x.Le,{top:eT.R$,zIndex:new x.Ry(3),children:(0,X.jsx)(x.xu,{alignItems:"center",color:t?"transparent":"default",display:"flex",justifyContent:"center",children:(0,X.jsx)(x.xu,{ref:this.pinRef,dangerouslySetInlineStyle:{__style:t&&a?a:eZ(!1,this.pinRef,this.pinDestinationRef)},height:84,position:"relative",width:84,children:(0,X.jsx)(x.Ee,{alt:this.props.i18n.bt("Изображение пина", "Pin image", "Pin image on repin page", undefined, true),color:e,fit:"cover",naturalHeight:84,naturalWidth:84,src:i})})})}),(0,X.jsx)(x.xu,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{pointerEvents:"none",opacity:+!!t,WebkitTransition:"opacity .4s ease-in-out",transition:"opacity .4s ease-in-out",zIndex:2}},left:!0,position:"fixed",right:!0,top:!0,children:(0,X.jsxs)(x.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",children:[(0,X.jsx)(eR,{delay:1200,startAnimation:t,children:(0,X.jsx)(x.zd,{rounding:2,width:148,children:(0,X.jsx)(x.kC,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:Array.from([,,,,]).map((e,i)=>{let n=i<=1,t=i%2,a=0===i?this.pinDestinationRef:null;return(0,X.jsx)(x.xu,{ref:a,color:0===i?"transparent":"secondary",height:72,marginBottom:+!!n,marginEnd:+!t,width:72},i)})})})}),(0,X.jsx)(x.xu,{dangerouslySetInlineStyle:{__style:{opacity:+!!t,WebkitTransform:t?"translateY(0)":"translateY(20%)",transform:t?"translateY(0)":"translateY(20%)",WebkitTransition:"all .25s ease-in-out .5s",transition:"all .25s ease-in-out .5s",textAlign:"center",marginTop:"50px"}},paddingX:4,children:(0,X.jsx)(x.X6,{children:(0,eo.nk)(this.props.i18n.bt("Вы сохранили свой первый пин на доске «{{ selectedBoardName }}».", "You saved your first Pin to {{ selectedBoardName }}!", "First repin confirmation message", undefined, true),{selectedBoardName:n})})})]})})]})}}let eL=function(e){let i=(0,B.Z)();return(0,X.jsx)(eK,{...e,i18n:i})};var eC=n(210730),ez=n(914253),eE=n(254889),eM=n(131076),eO=n(64471),eD=n(335335),e$=n(236269),eH=n(233597),eW=n(660322),eN=n(200619),eU=n(601871),eQ=n(2061),eV=n(120100),eq=n(779686),eG=n(679602),eJ=n(137568),eY=n(72034),eX=n(438274),e0=n(828890);function e2({pinId:e,handleSelected:i,surfaceOriginViewParameter:n}){(0,h.useEffect)(()=>{(0,_.Z)("ProfilePickerRow","/app/www/save/duplo/ProfilePickerRow.tsx")},[]);let t=(0,B.Z)(),a=(0,v.Z)();return(0,h.useEffect)(()=>{a({view_parameter:3990,event_type:13,view_type:21,aux_data:{board_picker_surface_origin:n,pin_id:e}})},[]),(0,X.jsx)(x.iP,{onTap:()=>{i(!1,null)},rounding:2,children:(0,X.jsxs)(x.xu,{alignItems:"center",column:12,"data-test-id":"board-picker-row",display:"flex",marginBottom:4,rounding:2,children:[(0,X.jsx)(x.xu,{alignItems:"center",color:"secondary",display:"flex",flex:"none",height:48,justifyContent:"center",rounding:2,width:48,children:(0,X.jsx)(x.JO,{accessibilityLabel:t.bt("Профиль", "Profile", "save.ProfilePickerRow.IconAccessibilityLabel", undefined, true),color:"default",icon:"history",size:22})}),(0,X.jsx)(x.xu,{direction:"column",display:"flex",justifyContent:"center",marginStart:2,overflow:"hidden",width:"100%",children:(0,X.jsx)(x.xv,{lineClamp:1,size:"400",weight:"bold",children:t.bt("Профиль", "Profile", "save.ProfilePickerRow", undefined, true)})})]})})}var e1=n(422578);function e3(){let e=(0,e1.useRelayEnvironment)();return(0,h.useCallback)(i=>{e&&(0,e1.commitLocalUpdate)(e,e=>{e.get(i)?.invalidateRecord()})},[e])}let e6=e=>e.map(e=>({board_title_id:String(e.id),board_title_kind:JSON.parse(e.recommendation_reason??"{}").reason,board_title:String(e.name),board_title_score:JSON.parse(e.recommendation_reason??"{}").score})),e5=e=>"profile"===e?3990:"topChoices"===e?3988:3989;var e9=n(468491);let e7=(void 0!==l||(l=n(917789)).hash&&"76b22cc5d658befe1dc27454d3aee77f"!==l.hash&&console.error("The definition of 'BoardPickerList_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),e8=(e,i,n)=>({field_set_key:"detailed",id:e,preserve_component_state:i,...n?{orbac_subject_id:n}:Object.freeze({})});function e4({boards:e,boardsShortlist:i=[],closeModal:n,dismissFlyout:t,navigate:a,isEditingPin:r,isFromToast:l,logContextEvent:o,onSelect:s,originalPinId:d,pinKey:c,pinBoardId:u,saveToProfileEnabled:p,surfaceOriginViewParameter:g,trackingParams:f}){(0,h.useEffect)(()=>{(0,_.Z)("BoardPickerList","/app/www/save/duplo/BoardPickerList.tsx")},[]);let b=(0,B.Z)(),v=(0,y.TH)(),k=(0,w.Z)(e7,c),S=e3(),I=(0,m.I0)(),j=(0,eV.Z)(),F=(0,Y.n)(),R=(0,ef.m)(),Z=(0,W.cO)(),K=v.state&&v.state.isOneTapSave,{checkExperiment:L}=(0,A.Z)(),{showRepinConfirmation:z,showToast:M}=(0,V.Z)(),O=e=>a(e),$=i.map(e=>e.id);p&&$.unshift("PROFILE_PINS");let H=(0,eN.Z)(),U=(0,T.Z)(),Q=(0,D.LO)(),q=(0,eU.lJ)(U,H),{logStat:G}=(0,eQ.Yg)(),ee=p&&L("mweb_curation_board_picker_reorder_profile_option").anyEnabled;(0,C.Z)(()=>{$&&o({event_type:13,clientTrackingParams:f.clientTrackingParams,component:7,element:1001,view_type:3,aux_data:{pin_id:k.entityId,suggested_boards:$}})}),(0,h.useEffect)(()=>{o({view_parameter:3988,event_type:13,view_type:21,aux_data:{board_picker_surface_origin:g,pin_id:k.entityId,board_picker_suggested_boards:JSON.stringify(e6(i))}})},[i]);let ei=e=>I((0,E.Br)(e)),en=j({fn:async(e,i,c)=>{if(e&&i)s(i,c);else try{if(!r){let e=!i?.id,n=await (({boardId:e,i18n:i,isQuickSave:n,isBoardlessSave:r})=>(t(),G("main_pin_repin"),I((0,J.w)({checkExperiment:L,i18n:i,isQuickSave:n,logContextEvent:o,pinId:k.entityId,boardId:e,onSuccess:()=>{Z("Save",{pin_id:k.entityId,is_promoted:k.isPromoted}),a(-1),(r||n)&&(0,e9.Z)({dispatch:I,viewerUser:Q})},originalPinId:d,showRepinConfirmation:z,trackingParams:f,historyPush:O,suggestedBoardIds:$,savePinId:(e,i)=>(R?.save(e),F?.save(e,i))}))))({boardId:i?.id,i18n:b,isQuickSave:e,isBoardlessSave:"profile"===c});if(n){let e=n?.id;if(K){let n;n={boardId:i?.id,localPinId:e,pinId:k.entityId,nodeId:k.__id},I((0,eJ.a)({...n}))}else k?.entityId&&I((0,eY.Ur)({id:k.entityId,nodeId:k.__id,boardId:i.id,title:i.name??"",url:i.url??"",localPinId:e}))}}if(r){let e=i?.id,t={board_id:e,id:k.entityId,...q?{orbac_subject_id:q}:Object.freeze({})},r=u!==e;P.Z.create("PinResource",t).callUpdate().then(i=>{let n;if(r&&e&&u){let i,n,t;i={selectedPinIds:[k.entityId],source:{boardId:u,sectionId:void 0},target:{boardId:e,sectionId:void 0}},I((0,eG.S)(i)),ei({boardId:e,sectionId:void 0,increment:1}),ei({boardId:u,sectionId:void 0,increment:-1}),U.isAuth&&U.id&&!u&&(n=U.id,t=k.entityId,I((0,eq.EX)({feedId:n,feedType:eX.Z.BOARDLESS_PINS,itemIds:[t],itemType:"pin"})))}I((0,eH.b)("PinResource",{options:t})),n=k.entityId,I((0,eW.jB)("PinResource",e8(n,!0,q))),S(k.__id),I((0,eW.Sr)("PinResource",e8(i.resource_response.data.id,!1,q),i)),a(-1)}),l&&n()}}catch(e){M(({hideToast:i})=>(0,X.jsx)(N.Z,{onHide:i,text:(0,e$.Z)(e,"message")||b.bt("К сожалению, возникла техническая проблема.", "Sorry! Something went wrong on our end.", "error during repin", undefined, true),type:"error"}))}},modalHeader:(0,eh.Bx)(b)}),et=(0,X.jsx)(e2,{handleSelected:(e,i)=>en(e,{...i,gridIndex:0},"profile"),pinId:k.entityId,surfaceOriginViewParameter:g});return(0,X.jsxs)(x.kC,{direction:"column",gap:4,children:[(0,X.jsxs)(x.xu,{children:[p&&!ee&&et,i.length>0&&(0,X.jsx)(x.xu,{marginBottom:4,marginTop:2,children:(0,X.jsx)(x.X6,{accessibilityLevel:3,size:"300",children:(0,X.jsx)(x.xv,{inline:!0,children:b.bt("Лучшие варианты", "Top choices", "boardPicker.header.topChoices", undefined, true)})})}),i.map((e,i)=>(0,X.jsx)(e0.Z,{boardId:e.id,onBoardSelected:n=>en(n,{...e,gridIndex:i},"topChoices"),showSingleBoardRep:!0},e.id))]}),(0,X.jsxs)(x.xu,{"data-test-id":"all-boards-list",children:[(0,X.jsx)(x.xu,{marginBottom:4,children:(0,X.jsx)(x.X6,{accessibilityLevel:3,size:"300",children:(0,X.jsx)(x.xv,{inline:!0,children:b.bt("Все доски", "All boards", "RepinFlow.BoardPickerList.AllBoards", undefined, true)})})}),e.map((e,i)=>(0,X.jsx)(e0.Z,{boardId:e.id,onBoardSelected:n=>en(n,{...e,gridIndex:i},"allBoards"),showSingleBoardRep:!0},e.id)),ee&&et]})]})}var ie=n(310758);let ii=()=>((0,h.useEffect)(()=>{(0,_.Z)("EmptyBoardRep","/app/www/save/duplo/EmptyBoardRep.tsx")},[]),(0,X.jsx)(x.xu,{color:"secondary",display:"inlineBlock",height:60,minWidth:60,overflow:"hidden",position:"relative",rounding:4,children:(0,X.jsxs)(h.Fragment,{children:[(0,X.jsx)(x.xu,{color:"default",dangerouslySetInlineStyle:{__style:{left:"50%"}},height:"100%",position:"absolute",width:1}),(0,X.jsx)(x.xu,{color:"default",dangerouslySetInlineStyle:{__style:{top:"50%"}},height:1,position:"absolute",right:!0,width:"50%"})]})}));var it=n(33285),ia=n(427475);let ir=(void 0!==o||(o=n(887802)).hash&&"69ffcdea57a7778d2ebbcd41c276c0d0"!==o.hash&&console.error("The definition of 'BoardTitleSuggestionList_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o);function il({isEditingPin:e,isFirstBoard:i,isFromToast:n,navigate:t,onFirstBoardCreate:a,originalPinId:r,pinBoardId:l,pinKey:o,pinSectionId:s,surfaceOriginViewParameter:d,titleSuggestions:c,clientTrackingParams:u}){(0,h.useEffect)(()=>{(0,_.Z)("BoardTitleSuggestionList","/app/www/save/duplo/BoardTitleSuggestionList.tsx")},[]);let p=(0,v.Z)(),g=(0,ia.Z)(),f=(0,B.Z)(),y=(0,eV.Z)(),{showRepinConfirmation:b}=(0,V.Z)(),P=(0,m.I0)(),k=(0,w.Z)(ir,o),S=k.entityId,I=(0,it.A)({hasRichMetadata:!!k.richMetadata,hasRichMetadataProducts:!!k.richMetadata?.products,hasRichMetadataArticle:!!k.richMetadata?.article,hasRichMetadataRecipe:!!k.richMetadata?.recipe}),T=(0,Y.n)(),j=(0,ef.m)(),F=(0,ez.gC)(),R=(0,eg.Z)(u,k.trackingParams),Z=e=>t(e),{checkExperiment:K}=(0,A.Z)();(0,h.useEffect)(()=>{p({view_parameter:3992,component:13282,event_type:13,view_type:21,aux_data:{board_picker_surface_origin:d,pin_id:S,board_title_suggestions:c}})},[]);let L=async()=>{await void P((0,G.q)({pinId:S,boardId:l||"",boardSectionId:s,clientTrackingParams:R}));let e=k.pinnedToBoard?.url;k.section?t(`${e??""}${k.section.slug??""}/`??"",{replace:!0}):t(e??"",{replace:!0})},C=y({fn:(l,o,s)=>{p({view_parameter:3992,component:13282,element:23,event_type:101,view_type:91,aux_data:{board_picker_surface_origin:d,pin_id:S,board_title_suggestions:c}}),(({allSuggestions:e,handleCreateBoard:i,index:n,isFBC:t,logContextEvent:a,pinViewParameter:r})=>{i(),a({aux_data:{board_title_list:JSON.stringify(e),is_fbc:t.toString(),selected_board_title_index:n},component:7,element:23,event_type:102,view_parameter:r,view_type:3})})({allSuggestions:s,handleCreateBoard:()=>{i?a(o):g({boardCreateOptions:{name:o,initial_pin_client_tracking_params:[u],privacy:"public"}}).then(i=>{let{url:a="",id:l}=i||{};P((0,J.w)({checkExperiment:K,i18n:f,logContextEvent:p,originalPinId:r,pinId:S,boardId:l,trackingParams:{clientTrackingParams:R,pinnedToBoardId:l},historyPush:Z,savePinId:(e,i)=>(j?.save(e),T?.save(e,i))})).then(()=>{e?n?t(-1):L():t(-1);let{href:i,text:r}=(0,eM.Z)(a,o,f),{duration:s,text:d,thumbnail:c}=(0,eS.Z)({boardId:l,getReduxBoard:F,pinId:S,viewType:3});b(({hideToast:e})=>(0,X.jsx)(eI.Z,{duration:s,href:i,onHide:e,text:d||r,thumbnail:c}))})})},index:l,isFBC:i,logContextEvent:p,pinViewParameter:I})},modalHeader:(0,eh.Bb)(f)});return c?c.map((e,i,n)=>(0,X.jsx)(x.xu,{children:(0,X.jsx)(ie.Z,{dataTestId:"board-suggestion-row-button",onTouch:()=>C(i,e,n),pressState:"none",rounding:2,children:(0,X.jsxs)(x.xu,{alignItems:"center",display:"flex",paddingY:2,rounding:2,children:[(0,X.jsx)(ii,{}),(0,X.jsx)(x.xu,{column:10,marginStart:3,children:(0,X.jsx)(x.X6,{size:"400",children:e})})]})},i)},i)):null}let io=(void 0!==s||(s=n(361817)).hash&&"475036dcb56a51d3552313200b8c9d45"!==s.hash&&console.error("The definition of 'RepinBoardPicker_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s);function is({allBoards:e,saveToProfileEnabled:i,boardsShortlist:n,closeModal:t,dismissFlyout:a,navigate:r,isEditingPin:l,isFromToast:o,onSelect:s,originalPinId:d,shouldUseSaveToProfileBehavior:c,pin:u,pinBoardId:p,pinSectionId:g,trackingParams:_}){let m=(0,v.Z)();return(0,X.jsx)(h.Fragment,{children:(0,X.jsx)(e4,{boards:e,boardsShortlist:n,closeModal:t,dismissFlyout:a,isEditingPin:l,isFromToast:o,logContextEvent:m,navigate:r,onSelect:s,originalPinId:d,pinBoardId:p,pinKey:u,pinSectionId:g,saveToProfileEnabled:i||c,trackingParams:_})})}function id({allBoards:e,boardsShortlist:i,closeModal:n,saveToProfileEnabled:t,dismissFlyout:a,navigate:r,isEditingPin:l,isFirstRepinExperience:o,isFromToast:s,onFirstBoardCreate:d,originalPinId:c,onSelect:u,shouldUseSaveToProfileBehavior:p,pin:g,pinBoardId:_,pinSectionId:h,trackingParams:m,titleSuggestions:f}){let y=(0,B.Z)(),b=o||0===e.length&&!t,P=(0,v.Z)(),k=()=>(0,X.jsx)(il,{clientTrackingParams:m.clientTrackingParams,isEditingPin:l,isFirstBoard:b,isFromToast:s,navigate:r,onFirstBoardCreate:d,originalPinId:c,pinBoardId:_,pinKey:g,pinSectionId:h,titleSuggestions:f});return b&&!p?(0,X.jsxs)(x.xu,{paddingX:1,children:[(0,X.jsx)(x.xu,{marginBottom:4,children:(0,X.jsx)(x.xv,{children:y.bt("Нажмите, чтобы создать первую доску", "Tap to create your first board", "CTA for board title suggestions", undefined, true)})}),k()]}):(0,X.jsxs)(x.xu,{marginBottom:4,children:[(0,X.jsx)(e4,{boards:e,boardsShortlist:i,closeModal:n,dismissFlyout:a,isEditingPin:l,isFromToast:s,logContextEvent:P,navigate:r,onSelect:u,originalPinId:c,pinBoardId:_,pinKey:g,pinSectionId:h,saveToProfileEnabled:t||p,trackingParams:m}),f?(0,X.jsxs)(x.xu,{children:[(0,X.jsx)(x.xu,{paddingY:1,children:(0,X.jsx)(eD.Z,{children:(0,X.jsx)(x.iz,{})})}),(0,X.jsx)(x.xu,{paddingY:4,children:(0,X.jsx)(x.xv,{children:y.bt("Или нажмите, чтобы создать новую доску", "Or tap to create a new board", "boardPicker.suggestedBoardName.title", undefined, true)})}),k()]}):(0,X.jsx)(x.xu,{paddingY:6,children:(0,X.jsx)(x.xH,{accessibilityLabel:y.bt("Загрузка содержимого страницы сохранений", "Loading repin page content", " - ", undefined, true),show:!0})})]})}function ic({allBoards:e,boardsShortlist:i,closeModal:n,saveToProfileEnabled:t,dismissFlyout:a,navigate:r,isEditingPin:l,isFetchingBoards:o,isFirstRepinExperience:s,isFromToast:d,onFirstBoardCreate:c,onSelect:u,originalPinId:p,shouldUseSaveToProfileBehavior:g,pinKey:m,pinBoardId:f,pinDescription:y,pinSectionId:b,surfaceOriginViewParameter:P,saveSessionId:k}){let S;(0,h.useEffect)(()=>{(0,_.Z)("RepinBoardPicker","/app/www/save/duplo/RepinBoardPicker.tsx")},[]);let I=(0,w.Z)(io,m),T=H(I.entityId),j=(0,B.Z)(),F=(0,v.Z)(),R={clientTrackingParams:(0,eO.Z)({pinKey:I}),pinnedToBoardId:I.pinnedToBoard?I.pinnedToBoard.entityId:""},Z=(e,n)=>{F({event_type:101,component:13282,clientTrackingParams:R.clientTrackingParams,object_id_str:e.id,view_type:91,view_parameter:e5(n),aux_data:{board_id:e.id,board_component:e5(n),board_picker_surface_origin:P,board_picker_suggested_boards:JSON.stringify(e6(i)),board_title_suggestions:T,board_index:e.gridIndex,is_profile_save:"profile"===n,pin_id:I.entityId,save_session_id:k}}),u(e,n)};if(0===e.length&&o)return(0,X.jsx)(x.xu,{paddingY:2,children:(0,X.jsx)(x.xH,{accessibilityLabel:j.bt("Загрузка содержимого страницы сохранений", "Loading repin page content", " - ", undefined, true),show:!0})});let{checkExperiment:K}=(0,A.Z)();switch(e.length>=8&&e.length<=12&&K("mweb_curation_board_picker_tune_complex_board_picker").group){case"enabled_8":S=8;break;case"enabled_9":S=9;break;case"enabled_11":case"employees":S=11;break;case"enabled_12":S=12;break;default:S=10}return e.length>=S?(0,X.jsx)(is,{allBoards:e,boardsShortlist:i,closeModal:n,dismissFlyout:a,isEditingPin:l,isFromToast:d,navigate:r,onSelect:Z,originalPinId:p,pin:I,pinBoardId:f,pinDescription:y,pinSectionId:b,saveToProfileEnabled:t,shouldUseSaveToProfileBehavior:g,trackingParams:R}):(0,X.jsx)(id,{allBoards:e,boardsShortlist:i,closeModal:n,dismissFlyout:a,isEditingPin:l,isFirstRepinExperience:s,isFromToast:d,navigate:r,onFirstBoardCreate:c,onSelect:Z,originalPinId:p,pin:I,pinBoardId:f,pinDescription:y,pinSectionId:b,saveToProfileEnabled:t,shouldUseSaveToProfileBehavior:g,titleSuggestions:T,trackingParams:R})}var iu=n(528630),ip=n(680391);let ig=(void 0!==d||(d=n(59986)).hash&&"1612c2df94f42990b3d4f6ccede72a70"!==d.hash&&console.error("The definition of 'RepinCreateBoardButton_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),d);function i_({isEditingPin:e,isFirstBoardCreateActive:i,isFromFirstBoardUpsell:n,pinKey:t,pinBoardId:a,pinDescription:r,pinSectionId:l,trackingParams:o,onTouch:s,useIconWithBackground:d}){(0,h.useEffect)(()=>{(0,_.Z)("RepinCreateBoardButton","/app/www/save/duplo/RepinCreateBoardButton.tsx")},[]);let c=(0,B.Z)(),u=(0,w.Z)(ig,t),p=(0,ip.Z)({href:{pathname:`/board/create/${u.entityId}/`,state:{isFirstBoardCreateActive:i,isFromFirstBoardUpsell:n,pinnedToBoardId:u.pinnedToBoard?u.pinnedToBoard.entityId:"",pinDescription:r,trackingParams:o,isEditingPin:e,pinBoardId:a,pinSectionId:l}}});return(0,X.jsx)(iu.Z,{hasTopShadow:d,height:d?void 0:70,children:(0,X.jsx)(x.iP,{onTap:({event:e})=>{s?.(),p({event:e})},children:(0,X.jsxs)(x.xu,{alignItems:"center","data-test-id":"repinCreateBoardButton",display:"flex",paddingX:+!!d,paddingY:+!d,children:[d?(0,X.jsx)(x.xu,{color:"secondary",dangerouslySetInlineStyle:{__style:{padding:"14px"}},rounding:2,children:(0,X.jsx)(x.JO,{accessibilityLabel:c.bt("Кнопка создания доски", "Create board button", " - ", undefined, true),color:"default",icon:"add",size:20})}):(0,X.jsx)(x.JO,{accessibilityLabel:c.bt("Кнопка создания доски", "Create board button", " - ", undefined, true),color:"error",icon:"add-circle",size:38}),(0,X.jsx)(x.xu,{marginStart:d?2:3,children:(0,X.jsx)(x.xv,{weight:"bold",children:c.bt("Создать доску", "Create board", "Create new board to Pin to", undefined, true)})})]})})})}var ih=n(672569),im=n(453799);let iy=(void 0!==c||(c=n(112402)).hash&&"f0b2fbadfba92480a2077999a000a308"!==c.hash&&console.error("The definition of 'RepinSectionPicker_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),c),ib=(e,i,n)=>({field_set_key:"detailed",id:e,preserve_component_state:i,...n?{orbac_subject_id:n}:Object.freeze({})});function ix({boardId:e,navigate:i,location:{search:n},showSectionRep:t,pinKey:a,onSuccess:r,trackingParams:l,dismissFlyout:o,boardViewParameterType:s,surfaceOriginViewParameter:d}){(0,h.useEffect)(()=>{(0,_.Z)("RepinSectionPicker","/app/www/save/duplo/RepinSectionPicker.tsx")},[]);let c=(0,m.I0)(),u=(0,B.Z)(),p=(0,w.Z)(iy,a),g=e3(),f=new URLSearchParams(n),y=f.get("isEditingPin"),b=f.get("pinBoardId")??"",x=f.get("pinSectionId")??"",k=(0,eg.Z)(l,p.trackingParams),S=(0,v.Z)(),I=(0,Y.n)(),{checkExperiment:j}=(0,A.Z)(),F=e=>i(e),R=(0,eN.Z)(),Z=(0,T.Z)(),K=(0,eU.lJ)(Z,R),L=(0,W.cO)(),{showRepinConfirmation:C}=(0,V.Z)();(0,h.useEffect)(()=>{S({event_type:13,clientTrackingParams:k,component:13282,object_id_str:e,view_type:275,aux_data:{board_id:e,board_picker_surface_origin:d,board_title_suggestions:[],board_index:0,is_profile_save:!1,pin_id:p.entityId,board_component:s}})});let z=e=>c((0,E.Br)(e)),M=async(n,t)=>{if(t&&S({event_type:101,clientTrackingParams:k,component:13282,element:36,object_id_str:n,view_type:91,view_parameter:3133,aux_data:{board_id:n,board_picker_surface_origin:d,board_title_suggestions:[],board_index:0,is_profile_save:!1,pin_id:p.entityId,section_id:t?.id??"",board_component:s}}),y||await void(o(),c((0,J.w)({checkExperiment:j,i18n:u,logContextEvent:S,pinId:p.entityId,boardId:e,onSuccess:y?void 0:()=>{L("Save",{pin_id:p.entityId,is_promoted:p.isPromoted}),r()},showRepinConfirmation:C,section:t,trackingParams:{clientTrackingParams:k,pinnedToBoardId:p.pinnedToBoard?p.pinnedToBoard.entityId:""},historyPush:F,savePinId:I?.save??(()=>{})})).then(()=>{t&&c((0,ih.Z)(t.id??""))})),y){let e=t?.id,a={board_id:n,board_section_id:e,id:p.entityId,...K?{orbac_subject_id:K}:Object.freeze({})},r=b!==n,l=x!==e;P.Z.create("PinResource",a).callUpdate().then(t=>{let o;if(r||l){let i,t,a;i={selectedPinIds:[p.entityId],source:{boardId:b,sectionId:x||null},target:{boardId:n,sectionId:e}},c((0,eG.S)(i)),z({boardId:n,sectionId:e,increment:1}),z({boardId:b,sectionId:x,increment:-1}),Z.isAuth&&Z.id&&!b&&(t=Z.id,a=p.entityId,c((0,eq.EX)({feedId:t,feedType:eX.Z.BOARDLESS_PINS,itemIds:[a],itemType:"pin"})))}c((0,eH.b)("PinResource",{options:a})),o=p.entityId,c((0,eW.jB)("PinResource",ib(o,!0,K))),g(p.__id),c((0,eW.Sr)("PinResource",ib(t.resource_response.data.id,!1,K),t)),i(-2)})}};return(0,X.jsx)(im.Z,{boardId:e,repin:M,showSectionRep:t})}let iP=(void 0!==u||(u=n(521906)).hash&&"0b70f6e25d25129525379f38c7f56293"!==u.hash&&console.error("The definition of 'MobileRepinPicker_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),u);function iv({children:e}){let i=(0,m.v9)(({session:e})=>72+((0,es.Rq)(e.userAgentPlatform)?es.Vf:0));return(0,X.jsx)(x.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:i}},children:e})}function ik({allBoards:e,isFromFirstBoardUpsell:i,saveToProfileEnabled:n,boardsShortlist:t,isFetchingBoards:a,shouldUseSaveToProfileBehavior:r,pinKey:l,pinDescription:o,titleSuggestions:s,trackingParams:d,warningAnchor:c,saveSessionId:u}){(0,h.useEffect)(()=>{(0,_.Z)("MobileRepinPicker","/app/www/save/MobileRepinPicker.tsx")},[]);let p=(0,w.Z)(iP,l),g=(0,B.Z)(),f=(0,y.TH)(),b=(0,y.s0)(),{boardId:P,pinId:S,isEditingPin:I,pinBoardId:T,pinSectionId:j,originalPinId:F,isFromToast:R}=ea(),Z=(0,v.Z)(),K=(0,m.I0)(),L=(0,m.v9)(({experiences:e})=>e),C=L[1000112],z=i?null:L[1000153],{showToast:E,showRepinConfirmation:M}=(0,V.Z)({isFromFirstBoardUpsell:i}),O=(0,ez.gC)(),D=(0,W.cO)(),$=(0,k.be)(),H=(e,i)=>K($(e,i)),U=(0,ef.m)(),Q=(0,Y.n)(),{checkExperiment:q}=(0,A.Z)(),[G,ee]=(0,h.useState)(!1),[ei,en]=(0,h.useState)("allBoards"),[et,er]=(0,h.useState)(void 0),[el,es]=(0,h.useState)(!1),ey=(0,ia.Z)(),eb=()=>!!(i||e_(z,501032))||!a&&0===e.length&&!n,ex=()=>e_(z,501021),eP=()=>{Z({view_type:21,view_parameter:87,component:7,element:P?34:75,event_type:102})},ev=o.trim(),{pinnedToBoard:eT}=p,ew=eT?(0,eo.nk)(g.bt("Ой! Вы уже сохранили этот пин на доске «{{ board_name }}»", "Psst! You already saved this Pin to {{ board_name }}", "Toast for already having repinned pin", undefined, true),{board_name:eT.name}).join(" "):null,{dominantColor:ej}=p,eB=p.imageSpec_236x,eF=eB?eB.url:"",eR=g.bt("Сохраните пины здесь:", "Save Pin to", "RepinPage.Section.Header.Title", undefined, true),eA=new x.Ry(2),eZ=g.bt("Создать доску", "Create board", "Title for first board create", undefined, true),eK=g.bt("Сохранение на доске", "Save to board", "boardPicker.header", undefined, true),eO=P?eR:0!==e.length||a||n?eK:eZ;return(0,X.jsxs)(ec.default,{hasFixedHeader:!0,children:[(0,X.jsx)(ep.Z,{text:eO}),(0,X.jsx)(ed.default,{useRoundedCorners:!0,zIndex:eA,children:(0,X.jsxs)(x.kC,{alignItems:"center",height:40,justifyContent:"start",children:[(0,X.jsx)(x.xu,{column:2,children:(0,X.jsx)(eE.default,{alignIconLeft:!0,color:"darkGray",icon:P?"arrow-back":"cancel",onTouch:eP,size:"sm"})}),(0,X.jsx)(x.xu,{column:8,children:(0,X.jsx)(x.xu,{"data-test-id":"repin-page-title",children:(0,X.jsx)(x.X6,{accessibilityLevel:2,align:"center",size:"300",children:(0,X.jsx)(x.xv,{inline:!0,weight:"bold",children:eO})})})}),(0,X.jsx)(x.xu,{column:2})]})}),p.imageSpec_236x&&(eb()?(0,X.jsx)(eL,{onComplete:(e,i)=>{let{boardId:n,boardUrl:t}=e,{href:a,text:r}=(0,eM.Z)(t,i,g),{duration:l,text:o,thumbnail:s}=(0,eS.Z)({boardId:n,getReduxBoard:O,isFBC:!0,pinId:S,viewType:21});b(-1),M(({hideToast:e})=>(0,X.jsx)(eI.Z,{duration:l,href:a,onHide:e,text:o||r,thumbnail:s})),C&&C.placement_id&&503459===C.experience_id&&H(C.placement_id,C.experience_id),z&&e_(z,501032)&&H(z.placement_id,z.experience_id),D("Save",{pin_id:p.entityId,is_promoted:p.isPromoted})},pinDominantColor:ej??"",pinImageUrl:eF??"",savePin:e=>{let i=(0,eg.Z)((f.state||{}).trackingParams),n=(0,eg.Z)(d,p.trackingParams);return ey({boardCreateOptions:{name:e,initial_pin_client_tracking_params:[i],privacy:"public"},deprecatedSchemaForNormalization:eC.IY}).then(e=>{let{url:i="",id:t}=e||{};return S&&K((0,J.w)({checkExperiment:q,i18n:g,logContextEvent:Z,originalPinId:F,pinId:S,boardId:t,trackingParams:{clientTrackingParams:n,pinnedToBoardId:t},historyPush:e=>b(e),savePinId:(e,i)=>(U?.save(e),Q?.save(e,i))})),{boardId:t,boardUrl:i}},e=>{throw{onError:()=>{b(-1),E(({hideToast:i})=>(0,X.jsx)(N.Z,{onHide:i,text:e.message||g.bt("К сожалению, возникла техническая проблема.", "Sorry! Something went wrong on our end.", "error creating board", undefined, true),type:"error"}))}}})},selectedBoardName:et}):null),(0,X.jsx)(iv,{children:P?(0,X.jsx)(ix,{boardId:P,boardViewParameterType:e5(ei),dismissFlyout:()=>es(!0),location:f,navigate:b,onSuccess:()=>{b(-2)},pinKey:p,showSectionRep:!0,surfaceOriginViewParameter:153,trackingParams:d}):(0,X.jsx)(ic,{allBoards:e,boardsShortlist:t,closeModal:eP,dismissFlyout:()=>es(!0),isEditingPin:I,isFetchingBoards:a,isFirstRepinExperience:eb(),isFromToast:R,navigate:b,onFirstBoardCreate:e=>{eb()||b(`/board/create/${p.entityId}/${e}/`,{state:{trackingParams:d,from:f.state?.from}}),er(e)},onSelect:(e,i)=>{en(i),I?b(`/pin/${p.entityId}/repin/${e.id}/?isEditingPin=true&pinBoardId=${T}&pinSectionId=${j}`,{state:{trackingParams:d,from:f.state?.from}}):b(`/pin/${p.entityId}/repin/${e.id}/`,{state:{trackingParams:d,from:f.state?.from}})},originalPinId:F,pinBoardId:T,pinDescription:ev,pinKey:p,pinSectionId:j,saveSessionId:u,saveToProfileEnabled:n,shouldUseSaveToProfileBehavior:r,surfaceOriginViewParameter:153})}),P?(0,X.jsx)(eu.Wx,{onAddNewSection:()=>{P&&(Z({view_type:91,view_parameter:3132,component:13282,element:10306,event_type:101,aux_data:{board_picker_surface_origin:153,board_title_suggestions:s||[],pin_id:p.entityId,board_component:3132,board_picker_suggested_boards:JSON.stringify(e6(t))}}),I?b(`/pin/${p.entityId}/repin/${P}/add/?isEditingPin=true&pinBoardId=${T}&pinSectionId=${j}`,{state:{from:f.state?.from}}):b(`/pin/${p.entityId}/repin/${P}/add/`,{state:{from:f.state?.from}}))},useIconWithBackground:!0}):(0,X.jsx)(em.Z,{modalHeader:(0,eh.Bb)(g),nextLocation:`/board/create/${p.entityId}/`,children:(0,X.jsx)(i_,{isEditingPin:I,isFirstBoardCreateActive:eb(),isFromFirstBoardUpsell:i,onTouch:()=>{Z({view_type:91,view_parameter:87,component:13282,element:249,event_type:101,aux_data:{board_picker_surface_origin:153,board_title_suggestions:s||[],pin_id:p.entityId,board_component:87,board_picker_suggested_boards:JSON.stringify(e6(t))}})},pinBoardId:T,pinDescription:ev,pinKey:p,pinSectionId:j,trackingParams:d,useIconWithBackground:!0})}),eB&&ex()&&(0,X.jsx)(ek,{completeExperience:()=>{z&&ex()&&H(z.placement_id,z.experience_id)},pinDominantColor:ej??"",pinImageHeight:eB.height??1,pinImageUrl:eF??"",pinImageWidth:eB.width??1}),c&&!el&&p.pinnedToBoard&&!G&&ew&&(0,X.jsx)(x.J2,{anchor:c,idealDirection:"down",onDismiss:()=>ee(!0),shouldFocus:!1,children:(0,X.jsx)(x.xu,{padding:3,children:(0,X.jsx)(x.xv,{weight:"bold",children:(0,X.jsx)("span",{children:ew})})})})]})}function iS(e,i,n){var t;return(i="symbol"==typeof(t=function(e,i){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,i||"default");if("object"!=typeof t)return t;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(i,"string"))?t:t+"")in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}let iI=(void 0!==p||(p=n(763536)).hash&&"334d0ce72c30565b62e52dd00bf86623"!==p.hash&&console.error("The definition of 'RepinPage_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),p),iT=(void 0!==g||(g=n(976529)).hash&&"76093586a269ca0330e25a57bd33f665"!==g.hash&&console.error("The definition of 'RepinPageQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),g);class iw extends h.PureComponent{constructor(...e){super(...e),iS(this,"state",{pinDescription:(this.props.pin.description||"").trim(),trackingParams:(this.props.location.state||{}).trackingParams||"",warningAnchor:void 0,windowInnerHeight:"undefined"!=typeof window?window.innerHeight:0,saveSessionId:(0,b.Z)()}),iS(this,"onResize",()=>{this.setState({windowInnerHeight:window.innerHeight})})}componentDidMount(){let{isFromFirstBoardUpsell:e,logContextEvent:i,repinExperience:n,triggerExperimentsForPlacement:t,viewExperience:a,pin:r}=this.props,{saveSessionId:l}=this.state;i({view_type:21,event_type:13,aux_data:{board_picker_surface_origin:153,pin_id:r.entityId,save_session_id:l}}),!e&&(t(1000153),n&&a(1000153,n.experience_id)),window.addEventListener("resize",this.onResize)}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}render(){let e=this.props.checkExperiment("web_react_router_v6").anyEnabled,i=(0,X.jsx)(ik,{allBoards:this.props.allBoards,boardsShortlist:this.props.boardsShortlist,isFetchingBoards:this.props.isFetchingBoards,isFromFirstBoardUpsell:this.props.isFromFirstBoardUpsell,pinDescription:this.state.pinDescription,pinKey:this.props.pin,saveSessionId:this.state.saveSessionId,saveToProfileEnabled:this.props.saveToProfileEnabled,shouldUseSaveToProfileBehavior:this.props.shouldUseSaveToProfileBehavior,titleSuggestions:this.props.titleSuggestions,trackingParams:this.state.trackingParams,warningAnchor:this.state.warningAnchor}),n=(0,X.jsx)(el,{pinKey:this.props.pin,trackingParams:this.state.trackingParams,useRoundedCorners:!0});return(0,X.jsx)(S.ZP,{accessibilityModalLabel:this.props.i18n.bt("Страница сохранения пина", "Repin page", "RepinPage.MobileModal.AccessibilityLabel", undefined, true),closeOnOutsideClick:!1,isOpen:!0,onDismiss:()=>{},type:"repinPage",children:(0,X.jsx)(x.xu,{height:this.state.windowInnerHeight-I.i_,paddingX:2,paddingY:0,children:e?(0,X.jsxs)(y.Z5,{children:[(0,X.jsx)(y.AW,{element:n,path:"/:boardId/add"}),(0,X.jsx)(y.AW,{element:i,path:"/:boardId"}),(0,X.jsx)(y.AW,{element:i,path:"/"})]}):(0,X.jsxs)(y.Z5,{children:[(0,X.jsx)(y.AW,{element:n,path:"/pin/:id/repin/:boardId/add/"}),(0,X.jsx)(y.AW,{element:i,path:"/pin/:id/repin/:boardId/"}),(0,X.jsx)(y.AW,{element:i,path:"/pin/:id/repin/"})]})})})}}function ij(){return(0,h.useEffect)(()=>{(0,_.Z)("RepinPage","/app/www/pages/duplo/RepinPage.tsx")},[]),(0,X.jsx)(iB,{})}function iB({shouldFetchPinFromGraphQL:e}){(0,h.useEffect)(()=>{(0,_.Z)("RepinPage","/app/www/pages/duplo/RepinPage.tsx")},[]);let i=(0,y.s0)(),n=(0,y.TH)(),t=(0,et.Z)(),a=t.params.id??"",r=(0,B.Z)(),l=(0,v.Z)(),o=(0,k.be)(),s=(0,k.Ig)(),d=(0,D.LO)(),{isAuth:c}=(0,T.Z)(),u=(0,L.HG)(),p=((e,i)=>{let n={field_set_key:"repin"},t=(0,j.Z)({strategy:i?"GraphQL":"Legacy",query:iT,variables:{pinId:e},useGetLegacyData:({pinId:e})=>{let{data:i}=(0,K.Z)({name:"PinResource",options:{...n,id:e}});return i}}),a=t?.v3GetPinQuery?.__typename==="V3GetPin"?t.v3GetPinQuery?.data:null;return(0,w.Z)(iI,a)})(a,e),{isFetching:g,allBoards:f,boardsShortlist:b}=(e=>{let i=(0,m.v9)(e=>e.session.userId),{isFetching:n,data:t}=(0,K.Z)({name:"BoardPickerBoardsResource",options:{pin_id:e,field_set_key:"profile_grid_item",shortlist_length:2,shortlist_suggestions:3,user_id:i}}),a=t?.all_boards||[];return{isFetching:n,allBoards:(0,m.v9)(e=>(0,O.Z)({...e,boards:a})||[]),boardsShortlist:t?.boards_shortlist||[]}})(a),{checkExperiment:x}=(0,A.Z)(),S=H(a),I=!!n.state?.isFromFirstBoardUpsell;(0,Z.Z)({name:"UserResource",options:{user_id:d?.id,field_set_key:"quicksave"}});let $=(0,m.I0)(),W=(0,m.v9)(({experiences:e})=>e),{showEnabledSaveBehavior:N}=(0,z.ZP)(d?.id||""),U=(0,T.Z)(),Q=(()=>{if(!U.isAuth)return null;let e=U.pinCount&&U.pinCount>0||U.boardCount&&U.boardCount>0||!1;return(0,F.Z)(U.createdAt)?x("ap_mweb_new_user_disable_quick_save",{dangerouslySkipActivation:e}).group:(0,R.Z)(null,U)?x("ap_mweb_res_user_disable_quick_save",{dangerouslySkipActivation:e}).group:null})(),V="enabled_remove_quick_save"===Q;return((0,C.Z)(()=>{if(!V||!d||!0===d.has_quicksave_board)return;let e={name:r.bt("Быстрое сохранение", "Quick Saves", "quickSave.defaultBoardName", undefined, true),layout:"quick_saves",privacy:"public",return_existing:!0,aux_data:{source:"quick_save"}},i=async()=>P.Z.create("BoardResource",e).callCreate();(async()=>{let{resource_response:{data:n}}=await i();$((0,E.oL)(e,n)),$((0,M.Z)(!0))})()}),!c||u)?(0,X.jsx)(y.Fg,{replace:!0,to:`/pin/${a}/`}):p?(0,X.jsx)(iw,{allBoards:f,boardsShortlist:b,checkExperiment:x,completeExperience:(e,i)=>$(o(e,i)),i18n:r,isFetchingBoards:g,isFromFirstBoardUpsell:I,location:n,logContextEvent:l,match:t,navigate:i,pin:p,pinId:a,repinExperience:I?null:W[1000153],saveToProfileEnabled:N&&"enabled_remove_all_boardless_saves"!==Q,shouldUseSaveToProfileBehavior:V,titleSuggestions:S,triggerExperimentsForPlacement:e=>$((0,k.kd)(e)),viewExperience:(e,i)=>$(s(e,i))}):null}},672569:function(e,i,n){n.d(i,{Z:()=>r});var t=n(27399),a=n(908808);let r=e=>i=>t.Z.create("BoardSectionResource",{section_id:e}).callGet().then(n=>{let t=n.resource_response.data||{id:"",title:""};return i((0,a.OQ)(e,t)),n})},137568:function(e,i,n){n.d(i,{a:()=>t,k:()=>a});let t=e=>({type:"ONE_TAP_SAVE",payload:e}),a=e=>({type:"ONE_TAP_UNSAVE",payload:e})},604100:function(e,i,n){n.d(i,{Z:()=>t});function t(e){return{type:"UPDATE_HAS_QUICKSAVE_BOARD",payload:{createdQuicksaveBoard:e}}}},468491:function(e,i,n){n.d(i,{Z:()=>a});var t=n(660322);function a({dispatch:e,viewerUser:i}){let{id:n}=i||{};n&&e((0,t.jB)("BoardlessPinsResource",{field_set_key:"mobile",userId:n}))}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/73203.ru_RU-7efc7ea6fe8c58af.mjs.map