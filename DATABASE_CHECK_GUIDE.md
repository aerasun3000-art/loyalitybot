# üîç –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø—Ä–æ–≤–µ—Ä–∫–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö MLM —Å–∏—Å—Ç–µ–º—ã

**–î–∞—Ç–∞:** –ù–æ—è–±—Ä—å 2025  
**–í–µ—Ä—Å–∏—è:** 1.0

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–°–∫—Ä–∏–ø—Ç `check_mlm_database.py` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π MLM –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã —Å Revenue Share.

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏
python3 check_mlm_database.py
```

### –° –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ .env —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç:
# SUPABASE_URL=your_supabase_url
# SUPABASE_KEY=your_supabase_key

python3 check_mlm_database.py
```

---

## ‚úÖ –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∫—Ä–∏–ø—Ç

### 1. –¢–∞–±–ª–∏—Ü—ã

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö MLM —Ç–∞–±–ª–∏—Ü:
- ‚úÖ `partner_network` - –°–µ—Ç—å –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
- ‚úÖ `partner_revenue_share` - –í—ã–ø–ª–∞—Ç—ã Revenue Share
- ‚úÖ `partner_recruitment_commissions` - –ö–æ–º–∏—Å—Å–∏–∏ –∑–∞ —Ä–µ–∫—Ä—É—Ç–∏–Ω–≥
- ‚úÖ `partner_activation_conditions` - –£—Å–ª–æ–≤–∏—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

### 2. –ö–æ–ª–æ–Ω–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ `partners`

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∫–æ–ª–æ–Ω–æ–∫:
- ‚úÖ `partner_type` - –¢–∏–ø –ø–∞—Ä—Ç–Ω–µ—Ä–∞
- ‚úÖ `partner_level` - –£—Ä–æ–≤–µ–Ω—å –≤ —Å–µ—Ç–∏
- ‚úÖ `referred_by_chat_id` - –ö—Ç–æ –ø—Ä–∏–≥–ª–∞—Å–∏–ª
- ‚úÖ `partner_package_purchased_at` - –î–∞—Ç–∞ –ø–æ–∫—É–ø–∫–∏ –ø–∞–∫–µ—Ç–∞
- ‚úÖ `personal_income_monthly` - –õ–∏—á–Ω—ã–π –¥–æ—Ö–æ–¥
- ‚úÖ `client_base_count` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚úÖ `revenue_share_monthly` - Revenue Share –∑–∞ –º–µ—Å—è—Ü
- ‚úÖ `total_revenue_share_earned` - –û–±—â–∏–π Revenue Share
- ‚úÖ `is_revenue_share_active` - –°—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- ‚úÖ `revenue_share_activation_date` - –î–∞—Ç–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- ‚úÖ `last_revenue_share_calculation` - –ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞—Å—á–µ—Ç
- ‚úÖ `pv_percent` - PV –ø—Ä–æ—Ü–µ–Ω—Ç
- ‚úÖ `industry_type` - –¢–∏–ø –æ—Ç—Ä–∞—Å–ª–∏

### 3. SQL —Ñ—É–Ω–∫—Ü–∏–∏

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö SQL —Ñ—É–Ω–∫—Ü–∏–π:
- ‚úÖ `check_revenue_share_activation()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- ‚úÖ `calculate_pv_by_income()` - –†–∞—Å—á–µ—Ç PV –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–æ—Ö–æ–¥–∞
- ‚úÖ `calculate_revenue_share()` - –†–∞—Å—á–µ—Ç Revenue Share
- ‚úÖ `auto_update_pv_on_income_change()` - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ PV

### 4. –†–∞—Å—á–µ—Ç PV

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ä–∞—Å—á–µ—Ç–∞ PV –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π –¥–æ—Ö–æ–¥–∞:
- ‚úÖ $0-999 ‚Üí PV = 3%
- ‚úÖ $1,000-1,999 ‚Üí PV = 5%
- ‚úÖ $2,000-4,999 ‚Üí PV = 7%
- ‚úÖ $5,000+ ‚Üí PV = 10%

### 5. –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Å–∏—Å—Ç–µ–º–µ:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
- –ü–∞—Ä—Ç–Ω–µ—Ä—ã —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º PV
- –ü–∞—Ä—Ç–Ω–µ—Ä—ã —Å –∞–∫—Ç–∏–≤–Ω—ã–º Revenue Share
- –°–≤—è–∑–∏ –≤ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏
- –ó–∞–ø–∏—Å–∏ Revenue Share

### 6. –ò–Ω–¥–µ–∫—Å—ã

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ (–∫–æ—Å–≤–µ–Ω–Ω–æ):
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã `partners`
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã `partner_network`
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã `partner_revenue_share`

---

## üìä –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
============================================================
–ù–ê–ß–ê–õ–û –ü–†–û–í–ï–†–ö–ò –ë–ê–ó–´ –î–ê–ù–ù–´–• MLM –°–ò–°–¢–ï–ú–´
============================================================

1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü...
‚úÖ –¢–∞–±–ª–∏—Ü–∞ partner_network —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
‚úÖ –¢–∞–±–ª–∏—Ü–∞ partner_revenue_share —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
‚úÖ –¢–∞–±–ª–∏—Ü–∞ partner_recruitment_commissions —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
‚úÖ –¢–∞–±–ª–∏—Ü–∞ partner_activation_conditions —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–æ–Ω–æ–∫ –≤ —Ç–∞–±–ª–∏—Ü–µ partners...
‚úÖ –ö–æ–ª–æ–Ω–∫–∞ partners.partner_type —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
‚úÖ –ö–æ–ª–æ–Ω–∫–∞ partners.partner_level —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
‚úÖ –ö–æ–ª–æ–Ω–∫–∞ partners.pv_percent —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
...

3. –ü—Ä–æ–≤–µ—Ä–∫–∞ SQL —Ñ—É–Ω–∫—Ü–∏–π...
‚úÖ –§—É–Ω–∫—Ü–∏—è check_revenue_share_activation —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
‚úÖ –§—É–Ω–∫—Ü–∏—è calculate_pv_by_income —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
...

4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ PV...
‚úÖ PV —Ä–∞—Å—á–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω: –ù–æ–≤–∏—á–æ–∫: $0 ‚Üí 3.0%
‚úÖ PV —Ä–∞—Å—á–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω: –ê–∫—Ç–∏–≤–Ω—ã–π: $1,000 ‚Üí 5.0%
‚úÖ PV —Ä–∞—Å—á–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω: –ü—Ä–µ–º–∏—É–º: $5,000 ‚Üí 10.0%

5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö...
‚úÖ –ù–∞–π–¥–µ–Ω–æ 15 –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
‚úÖ 12 –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –∏–º–µ—é—Ç PV
‚úÖ 8 –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –∏–º–µ—é—Ç –∞–∫—Ç–∏–≤–Ω—ã–π Revenue Share

============================================================
–ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢
============================================================

‚úÖ –£—Å–ø–µ—à–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫: 45
‚ö†Ô∏è  –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π: 2
‚ùå –û—à–∏–±–æ–∫: 0
üìä –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: 95.7%

‚úÖ –í–°–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–í–ï–†–ö–ò –ü–†–û–ô–î–ï–ù–´!
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.
============================================================
```

---

## ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã:

```
‚ùå –¢–∞–±–ª–∏—Ü–∞ partner_network –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
```

**–†–µ—à–µ–Ω–∏–µ:** –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –º–∏–≥—Ä–∞—Ü–∏—é `supabase_mlm_partner_revenue_share.sql`

### –ï—Å–ª–∏ –∫–æ–ª–æ–Ω–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã:

```
‚ùå –ö–æ–ª–æ–Ω–∫–∞ partners.pv_percent –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
```

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ SQL –º–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é

### –ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:

```
‚ùå –§—É–Ω–∫—Ü–∏—è calculate_pv_by_income –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
```

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL –º–∏–≥—Ä–∞—Ü–∏–∏, –æ—Å–æ–±–µ–Ω–Ω–æ —Ä–∞–∑–¥–µ–ª —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏

---

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ CI/CD

–°–∫—Ä–∏–ø—Ç –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ CI/CD –ø–∞–π–ø–ª–∞–π–Ω–µ:

```yaml
# –ü—Ä–∏–º–µ—Ä –¥–ª—è GitHub Actions
- name: Check MLM Database
  run: |
    python3 check_mlm_database.py
  env:
    SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
    SUPABASE_KEY: ${{ secrets.SUPABASE_KEY }}
```

---

## üìù –ö–æ–¥—ã –≤—ã—Ö–æ–¥–∞

- `0` - –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
- `1` - –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏

---

## üõ†Ô∏è –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞

–í—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏, —Ä–∞—Å—à–∏—Ä–∏–≤ –∫–ª–∞—Å—Å `MLMDatabaseChecker`:

```python
def check_custom_validation(self):
    """–í–∞—à–∞ –∫–∞—Å—Ç–æ–º–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞"""
    # –í–∞—à –∫–æ–¥ –∑–¥–µ—Å—å
    pass
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

- [ ] SQL –º–∏–≥—Ä–∞—Ü–∏—è `supabase_mlm_partner_revenue_share.sql` –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è `SUPABASE_URL` –∏ `SUPABASE_KEY` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (`supabase`, `python-dotenv`)
- [ ] –î–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö Supabase –µ—Å—Ç—å

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–∫—Ä–∏–ø—Ç–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ SQL –º–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** –ù–æ—è–±—Ä—å 2025  
**–í–µ—Ä—Å–∏—è:** 1.0











