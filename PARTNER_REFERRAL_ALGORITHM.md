# –ü–æ—à–∞–≥–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã –ø–∞—Ä—Ç–Ω—ë—Ä–∞ —Å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–æ–π

## üìã –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–ü–∞—Ä—Ç–Ω—ë—Ä –ø–æ–ª—É—á–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—É—é —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤. –ö–∞–∂–¥—ã–π –∫–ª–∏–µ–Ω—Ç, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ —Å—Å—ã–ª–∫–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ –±–∞–ª–ª—ã –∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è –∫ —ç—Ç–æ–º—É –ø–∞—Ä—Ç–Ω—ë—Ä—É.

---

## üöÄ –≠—Ç–∞–ø 1: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º

### –®–∞–≥ 1.1: –ü–∞—Ä—Ç–Ω—ë—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–µ–Ω—é –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è

**–î–µ–π—Å—Ç–≤–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞:**
- –ü–∞—Ä—Ç–Ω—ë—Ä –∑–∞—Ö–æ–¥–∏—Ç –≤ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–π –±–æ—Ç
- –ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É **"üë• –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞"** –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ü–∞—Ä—Ç–Ω—ë—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
- –°—Ç–∞—Ç—É—Å –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `Approved` (–æ–¥–æ–±—Ä–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º)

**–ö–æ–¥:**
```python
# bot.py, —Å—Ç—Ä–æ–∫–∏ 442-458
@bot.message_handler(func=lambda message: message.text == 'üë• –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞')
def handle_invite_start(message):
    chat_id = message.chat.id
    if not sm.partner_exists(chat_id) or sm.get_partner_status(chat_id) != 'Approved':
        bot.send_message(chat_id, "–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.")
        return
```

### –®–∞–≥ 1.2: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ:**
- –ë–æ—Ç —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –æ—Å–Ω–æ–≤–µ `chat_id` –ø–∞—Ä—Ç–Ω—ë—Ä–∞
- –§–æ—Ä–º–∞—Ç —Å—Å—ã–ª–∫–∏: `https://t.me/{client_bot_username}?start=partner_{partner_chat_id}`

**–ü—Ä–∏–º–µ—Ä:**
```
https://t.me/mindbeatybot?start=partner_123456789
```

–ì–¥–µ `123456789` - —ç—Ç–æ `chat_id` –ø–∞—Ä—Ç–Ω—ë—Ä–∞.

**–ö–æ–¥:**
```python
# bot.py, —Å—Ç—Ä–æ–∫–∏ 468-471
if call.data == 'invite_by_link':
    partner_id = str(chat_id)
    link = f"https://t.me/mindbeatybot?start=partner_{partner_id}"
```

### –®–∞–≥ 1.3: –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–∫–∏

**–ü–∞—Ä—Ç–Ω—ë—Ä –≤–∏–¥–∏—Ç —Ç—Ä–∏ –æ–ø—Ü–∏–∏:**

1. **üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É** - –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–ª–∏–µ–Ω—Ç—É
2. **üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É** - –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ—Ä–µ–∑ –±–æ—Ç–∞ (–Ω—É–∂–µ–Ω Chat ID –∫–ª–∏–µ–Ω—Ç–∞)
3. **üì± –ü–æ–ª—É—á–∏—Ç—å QR-–∫–æ–¥** - –¥–ª—è –ø–µ—á–∞—Ç–∏ –∏–ª–∏ –ø–æ–∫–∞–∑–∞ –∫–ª–∏–µ–Ω—Ç—É –æ—Ñ–ª–∞–π–Ω

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
```
üîó –í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:

https://t.me/mindbeatybot?start=partner_123456789

üì± –í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:
[üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É]
[üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É]
[üì± –ü–æ–ª—É—á–∏—Ç—å QR-–∫–æ–¥]
```

---

## üìã –≠—Ç–∞–ø 2: –°–ø–æ—Å–æ–± 1 - –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏

### –®–∞–≥ 2.1: –ü–∞—Ä—Ç–Ω—ë—Ä –Ω–∞–∂–∏–º–∞–µ—Ç "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É"

**–î–µ–π—Å—Ç–≤–∏–µ:**
- –ü–∞—Ä—Ç–Ω—ë—Ä –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É **"üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É"**
- –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Å—ã–ª–∫—É –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

**–°–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞:**
```
üìã –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É:

https://t.me/mindbeatybot?start=partner_123456789

üí° –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å—Å—ã–ª–∫—É –≤—ã—à–µ, —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –µ—ë
```

### –®–∞–≥ 2.2: –ü–∞—Ä—Ç–Ω—ë—Ä –∫–æ–ø–∏—Ä—É–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Å—ã–ª–∫—É –∫–ª–∏–µ–Ω—Ç—É

**–î–µ–π—Å—Ç–≤–∏—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞:**
1. –ü–∞—Ä—Ç–Ω—ë—Ä –∫–æ–ø–∏—Ä—É–µ—Ç —Å—Å—ã–ª–∫—É –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ—ë –∫–ª–∏–µ–Ω—Ç—É –ª—é–±—ã–º —É–¥–æ–±–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º:
   - –í –ª–∏—á–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ Telegram
   - –í WhatsApp
   - –ü–æ SMS
   - –í —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö
   - –ü–µ—á–∞—Ç–∞–µ—Ç –Ω–∞ –≤–∏–∑–∏—Ç–∫–µ/—Ñ–ª–∞–µ—Ä–µ
   - –ü—É–±–ª–∏–∫—É–µ—Ç –Ω–∞ —Å–∞–π—Ç–µ/–≤ —Å–æ—Ü—Å–µ—Ç—è—Ö

**–í–∞–∂–Ω–æ:**
- –ö–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ –≤ Telegram
- –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –∫–ª–∏–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä–æ–µ—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –±–æ—Ç–∞ (`@mindbeatybot`)

---

## üì§ –≠—Ç–∞–ø 3: –°–ø–æ—Å–æ–± 2 - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Å—ã–ª–∫–∏ —á–µ—Ä–µ–∑ –±–æ—Ç–∞

### –®–∞–≥ 3.1: –ü–∞—Ä—Ç–Ω—ë—Ä –≤—ã–±–∏—Ä–∞–µ—Ç "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É"

**–î–µ–π—Å—Ç–≤–∏–µ:**
- –ü–∞—Ä—Ç–Ω—ë—Ä –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É **"üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É"**
- –ë–æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç Chat ID –∫–ª–∏–µ–Ω—Ç–∞

**–°–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞:**
```
üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Å—ã–ª–∫–∏ –∫–ª–∏–µ–Ω—Ç—É

–í–≤–µ–¥–∏—Ç–µ Chat ID –∫–ª–∏–µ–Ω—Ç–∞ (—á–∏—Å–ª–æ), –∫–æ—Ç–æ—Ä–æ–º—É —Ö–æ—Ç–∏—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É.

üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: Chat ID –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å, –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –Ω–∞–ø–∏—à–µ—Ç –±–æ—Ç—É @userinfobot
```

### –®–∞–≥ 3.2: –ü–∞—Ä—Ç–Ω—ë—Ä –≤–≤–æ–¥–∏—Ç Chat ID –∫–ª–∏–µ–Ω—Ç–∞

**–î–µ–π—Å—Ç–≤–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞:**
- –ü–∞—Ä—Ç–Ω—ë—Ä –≤–≤–æ–¥–∏—Ç Chat ID –∫–ª–∏–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `987654321`)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:**
- Chat ID –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å, –ø–æ–ø—Ä–æ—Å–∏–≤ –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞–ø–∏—Å–∞—Ç—å –±–æ—Ç—É `@userinfobot`
- –≠—Ç–æ —á–∏—Å–ª–æ, —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram

### –®–∞–≥ 3.3: –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Å—ã–ª–∫—É –∫–ª–∏–µ–Ω—Ç—É

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ:**

1. –ë–æ—Ç —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É —á–µ—Ä–µ–∑ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –±–æ—Ç–∞

**–°–æ–æ–±—â–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É:**
```
üéâ –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –æ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–∞!

–í—ã –ø–æ–ª—É—á–∏–ª–∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –ø—Ä–æ–≥—Ä–∞–º–º–µ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏.

üíé –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ —Å—Å—ã–ª–∫–µ –≤—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∏—Ç–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ –±–∞–ª–ª—ã!

üîó –°—Å—ã–ª–∫–∞: https://t.me/mindbeatybot?start=partner_123456789

[üéâ –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∏ –ø–æ–ª—É—á–∏—Ç—å –±–∞–ª–ª—ã] (–∫–Ω–æ–ø–∫–∞)
```

**–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä—É:**
```
‚úÖ –°—Å—ã–ª–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–ª–∏–µ–Ω—Ç—É!

üì± Chat ID –∫–ª–∏–µ–Ω—Ç–∞: 987654321
üîó –°—Å—ã–ª–∫–∞: https://t.me/mindbeatybot?start=partner_123456789

–ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∏—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ –±–∞–ª–ª—ã –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ —Å—Å—ã–ª–∫–µ.
```

---

## üì± –≠—Ç–∞–ø 4: –°–ø–æ—Å–æ–± 3 - QR-–∫–æ–¥

### –®–∞–≥ 4.1: –ü–∞—Ä—Ç–Ω—ë—Ä –Ω–∞–∂–∏–º–∞–µ—Ç "–ü–æ–ª—É—á–∏—Ç—å QR-–∫–æ–¥"

**–î–µ–π—Å—Ç–≤–∏–µ:**
- –ü–∞—Ä—Ç–Ω—ë—Ä –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É **"üì± –ü–æ–ª—É—á–∏—Ç—å QR-–∫–æ–¥"**
- –ë–æ—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç QR-–∫–æ–¥ —Å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–æ–π

### –®–∞–≥ 4.2: –ë–æ—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç QR-–∫–æ–¥

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ:**

1. –ë–æ—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç QR-–∫–æ–¥, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ QR-–∫–æ–¥–∞ –ø–∞—Ä—Ç–Ω—ë—Ä—É

**–°–æ–æ–±—â–µ–Ω–∏–µ —Å QR-–∫–æ–¥–æ–º:**
```
üì± QR-–∫–æ–¥ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏

üîó –°—Å—ã–ª–∫–∞: https://t.me/mindbeatybot?start=partner_123456789

üí° –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
‚Ä¢ –ü–æ–∫–∞–∂–∏—Ç–µ QR-–∫–æ–¥ –∫–ª–∏–µ–Ω—Ç—É
‚Ä¢ –ö–ª–∏–µ–Ω—Ç –æ—Ç—Å–∫–∞–Ω–∏—Ä—É–µ—Ç –µ–≥–æ –∫–∞–º–µ—Ä–æ–π
‚Ä¢ –ö–ª–∏–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∏—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ –±–∞–ª–ª—ã!
```

[–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ QR-–∫–æ–¥–∞]

**–°–ø–æ—Å–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è QR-–∫–æ–¥–∞:**
- –†–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å –∏ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –Ω–∞ —Å—Ç–æ–π–∫–µ —Ä–µ—Å–µ–ø—à–µ–Ω–∞
- –ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–ª–∞–Ω—à–µ—Ç–∞/—Ç–µ–ª–µ—Ñ–æ–Ω–∞
- –†–∞–∑–º–µ—Å—Ç–∏—Ç—å –Ω–∞ –≤–∏–∑–∏—Ç–∫–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–∞—Ö
- –î–æ–±–∞–≤–∏—Ç—å –Ω–∞ —Å–∞–π—Ç/–≤ —Å–æ—Ü—Å–µ—Ç–∏

---

## ‚úÖ –≠—Ç–∞–ø 5: –ö–ª–∏–µ–Ω—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ —Å—Å—ã–ª–∫–µ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è)

### –®–∞–≥ 5.1: –ö–ª–∏–µ–Ω—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Å—ã–ª–∫—É –≤ Telegram

**–î–µ–π—Å—Ç–≤–∏–µ –∫–ª–∏–µ–Ω—Ç–∞:**
- –ö–ª–∏–µ–Ω—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞
- Telegram –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –±–æ—Ç–∞ (`@mindbeatybot`)
- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ `/start partner_123456789`

### –®–∞–≥ 5.2: –ü–∞—Ä—Å–∏–Ω–≥ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ:**

1. –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –±–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É `/start partner_123456789`
2. –ò–∑–≤–ª–µ–∫–∞–µ—Ç `partner_id` –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —Å—Å—ã–ª–∫–∏

**–ö–æ–¥:**
```python
# client_handler.py, —Å—Ç—Ä–æ–∫–∏ 687-699
REFERRAL_PATTERN = re.compile(r'partner_(\d+)', re.IGNORECASE)
partner_match = REFERRAL_PATTERN.search(text)

if partner_match:
    partner_id = partner_match.group(1)
    logger.info(f"–û–±–Ω–∞—Ä—É–∂–µ–Ω partner_id –∏–∑ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏: {partner_id}")
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ò–∑–≤–ª–µ—á—ë–Ω `partner_id`: `123456789`

### –®–∞–≥ 5.3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ:**
```python
client_exists = sm.client_exists(chat_id)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- –ï—Å–ª–∏ `False`: –∫–ª–∏–µ–Ω—Ç –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
- –ï—Å–ª–∏ `True`: –∫–ª–∏–µ–Ω—Ç —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–µ–Ω—é

### –®–∞–≥ 5.4: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ —Å—Å—ã–ª–∫–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞

**–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–µ—Ç–æ–¥:**
```python
result = sm.register_client_via_link(chat_id, partner_id, phone=None, name=None)
```

**–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –º–µ—Ç–æ–¥–∞ `register_client_via_link`:**

#### 5.4.1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
```python
if self.client_exists(client_chat_id):
    return None, "–ö–ª–∏–µ–Ω—Ç —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ –±–æ—Ç–µ."
```

#### 5.4.2: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç–∞
```python
client_data = {
    'chat_id': client_chat_id,
    'phone': phone,  # None –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Å—Å—ã–ª–∫–µ
    'status': 'active',
    'balance': 100,  # WELCOME_BONUS_AMOUNT (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    'registered_via': 'partner_link',
    'partner_id': partner_chat_id,  # ID –ø–∞—Ä—Ç–Ω—ë—Ä–∞
    'name': name,  # None –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Å—Å—ã–ª–∫–µ
    'reg_date': datetime.datetime.now().isoformat()
}

self.client.from_(USER_TABLE).insert(client_data).execute()
```

#### 5.4.3: –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –±–æ–Ω—É—Å–∞
```python
transaction_data = {
    'client_chat_id': client_chat_id,
    'partner_chat_id': partner_chat_id,
    'total_amount': 0,
    'earned_points': 100,  # WELCOME_BONUS_AMOUNT
    'spent_points': 0,
    'operation_type': 'enrollment_bonus',
    'description': '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ',
    'date_time': datetime.datetime.now().isoformat()
}
self.client.from_(TRANSACTION_TABLE).insert(transaction_data).execute()
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ö–ª–∏–µ–Ω—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ —Å–∏—Å—Ç–µ–º–µ
- –ë–∞–ª–∞–Ω—Å: 100 –±–∞–ª–ª–æ–≤ (–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å)
- –ö–ª–∏–µ–Ω—Ç –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –ø–∞—Ä—Ç–Ω—ë—Ä—É —á–µ—Ä–µ–∑ –ø–æ–ª–µ `partner_id`
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞–ø–∏—Å–∞–Ω–∞ –≤ —Ç–∞–±–ª–∏—Ü—É `transactions`

### –®–∞–≥ 5.5: –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É

**–°–æ–æ–±—â–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É:**
```
üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!

–í—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å –ø–æ —Å—Å—ã–ª–∫–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –∏ –ø–æ–ª—É—á–∏–ª–∏ 100 –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö –±–∞–ª–ª–æ–≤!
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∫–ª–∏–µ–Ω—Ç –≤–∏–¥–∏—Ç –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–∞–º–∏:
- üöÄ –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- üì± –ü–æ–∫–∞–∑–∞—Ç—å QR-–∫–æ–¥

---

## üîÑ –≠—Ç–∞–ø 6: –†—É—á–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±)

### –®–∞–≥ 6.1: –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä—É—á–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

**–°—Ü–µ–Ω–∞—Ä–∏–∏:**
1. –ö–ª–∏–µ–Ω—Ç –Ω–µ –∏–º–µ–µ—Ç Telegram –∏–ª–∏ –Ω–µ —Ö–æ—á–µ—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å
2. –ü–∞—Ä—Ç–Ω—ë—Ä —Ö–æ—á–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ —Å—Ä–∞–∑—É –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ/–ø–æ—Å–µ—â–µ–Ω–∏–∏
3. –ö–ª–∏–µ–Ω—Ç —É–∂–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —É –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –∏ —Ö–æ—á–µ—Ç –Ω–∞—á–∞—Ç—å –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å –±–∞–ª–ª—ã –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:**
- –ö–ª–∏–µ–Ω—Ç –≤—Å—ë —Ä–∞–≤–Ω–æ –¥–æ–ª–∂–µ–Ω –±—É–¥–µ—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç —á–µ—Ä–µ–∑ —Å—Å—ã–ª–∫—É, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø

### –®–∞–≥ 6.2: –ü–∞—Ä—Ç–Ω—ë—Ä –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä—É—á–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ –º–µ–Ω—é "‚öôÔ∏è –ï—â—ë" –∏–ª–∏ —á–µ—Ä–µ–∑ API. –ü—Ä–æ—Ü–µ—Å—Å –æ–ø–∏—Å–∞–Ω –Ω–∏–∂–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ—Ç–æ–¥–∞ `handle_manual_registration`.

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ü–∞—Ä—Ç–Ω—ë—Ä –≤–≤–æ–¥–∏—Ç –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞
2. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–µ—Ç–æ–¥ `sm.handle_manual_registration(phone, partner_id, welcome_bonus)`

### –®–∞–≥ 6.3: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç**

```python
# –°–æ–∑–¥–∞—ë—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω—ã–π ID
temp_chat_id = f"VIA_PARTNER_{clean_phone}"

client_data = {
    'chat_id': temp_chat_id,
    'phone': clean_phone,
    'status': 'active',
    'balance': 100,  # WELCOME_BONUS_AMOUNT
    'registered_via': 'partner_invite',
    'partner_id': partner_id,
    'name': f"–ö–ª–∏–µ–Ω—Ç {clean_phone[-4:]}",  # –ü–æ—Å–ª–µ–¥–Ω–∏–µ 4 —Ü–∏—Ñ—Ä—ã —Ç–µ–ª–µ—Ñ–æ–Ω–∞
    'reg_date': datetime.datetime.now().isoformat()
}

# –í—Å—Ç–∞–≤–∫–∞ –≤ –ë–î
self.client.from_(USER_TABLE).insert(client_data).execute()

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
transaction_data = {
    'client_chat_id': temp_chat_id,
    'partner_chat_id': partner_id,
    'total_amount': 0,
    'earned_points': 100,
    'spent_points': 0,
    'operation_type': 'enrollment_bonus',
    'description': '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –ü–∞—Ä—Ç–Ω–µ—Ä–∞',
    'date_time': datetime.datetime.now().isoformat()
}
self.client.from_(TRANSACTION_TABLE).insert(transaction_data).execute()
```

**–°–æ–æ–±—â–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä—É:**
```
–ù–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç +79991234567 —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –∏ –ø–æ–ª—É—á–∏–ª 100 –±–∞–ª–ª–æ–≤.

–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–ª–∏–µ–Ω—Ç—É —Å—Å—ã–ª–∫—É –Ω–∞ –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –±–æ—Ç –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏.
```

**–í–∞–∂–Ω–æ:**
- –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π ID: `VIA_PARTNER_79991234567`
- –ö–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–π—Ç–∏ –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ —Å—Å—ã–ª–∫–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–π ID –æ–±–Ω–æ–≤–∏—Ç—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π `chat_id`

**–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ö–ª–∏–µ–Ω—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –±–∞–ª–∞–Ω—Å = 0**

–ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —É–∂–µ –µ—Å—Ç—å –≤ —Å–∏—Å—Ç–µ–º–µ, –Ω–æ –±–∞–ª–∞–Ω—Å = 0:
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –±–∞–ª–∞–Ω—Å –¥–æ 100 –±–∞–ª–ª–æ–≤
- –ö–ª–∏–µ–Ω—Ç –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è –∫ –ø–∞—Ä—Ç–Ω—ë—Ä—É
- –°–æ–∑–¥–∞—ë—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –±–æ–Ω—É—Å–∞

**–°–æ–æ–±—â–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä—É:**
```
–ö–ª–∏–µ–Ω—Ç +79991234567 –Ω–∞–π–¥–µ–Ω –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω. –ù–∞—á–∏—Å–ª–µ–Ω —Å—Ç–∞—Ä—Ç–æ–≤—ã–π –±–æ–Ω—É—Å: 100 –±–∞–ª–ª–æ–≤. 
–ù–æ–≤—ã–π –±–∞–ª–∞–Ω—Å: 100.
```

**–°—Ü–µ–Ω–∞—Ä–∏–π 3: –ö–ª–∏–µ–Ω—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –±–æ–Ω—É—Å —É–∂–µ –±—ã–ª –Ω–∞—á–∏—Å–ª–µ–Ω**

–ï—Å–ª–∏ —É –∫–ª–∏–µ–Ω—Ç–∞ —É–∂–µ –µ—Å—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è `enrollment_bonus`:
- –ë–æ–Ω—É—Å –Ω–µ –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞: "–ë–æ–Ω—É—Å —É–∂–µ –±—ã–ª –Ω–∞—á–∏—Å–ª–µ–Ω —ç—Ç–æ–º—É –∫–ª–∏–µ–Ω—Ç—É"

### –®–∞–≥ 6.4: –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ü–∞—Ä—Ç–Ω—ë—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç—É —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
2. –ö–ª–∏–µ–Ω—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ —Å—Å—ã–ª–∫–µ –≤ Telegram
3. –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –∫–ª–∏–µ–Ω—Ç —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º ID `VIA_PARTNER_{phone}`
4. –ï—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –≤—Ä–µ–º–µ–Ω–Ω—ã–π ID –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π `chat_id` –∫–ª–∏–µ–Ω—Ç–∞

**–ö–æ–¥ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏:**
```python
# client_handler.py, —Å—Ç—Ä–æ–∫–∏ 794-804
if client_data.get('chat_id', '').startswith('VIA_PARTNER_'):
    temp_id = client_data['chat_id']
    if sm.update_client_chat_id(old_id=temp_id, new_id=chat_id):
        logger.info(f"CLIENT_HANDLER: –û–±–Ω–æ–≤–ª–µ–Ω chat_id –∫–ª–∏–µ–Ω—Ç–∞ —Å {temp_id} –Ω–∞ {chat_id}")
```

**–ú–µ—Ç–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
```python
# supabase_manager.py, —Å—Ç—Ä–æ–∫–∏ 348-358
def update_client_chat_id(self, old_id: str, new_id: str) -> bool:
    """–û–±–Ω–æ–≤–ª—è–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π chat_id –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –Ω–∞—Å—Ç–æ—è—â–∏–π ID –≤ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö."""
    self.client.from_(USER_TABLE).update({'chat_id': new_id}).eq('chat_id', old_id).execute()
    self.client.from_(TRANSACTION_TABLE).update({'client_chat_id': new_id}).eq('client_chat_id', old_id).execute()
    self.client.from_('nps_ratings').update({'client_chat_id': new_id}).eq('client_chat_id', old_id).execute()
    return True
```

---

## üìä –≠—Ç–∞–ø 7: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à—ë–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

### –®–∞–≥ 7.1: –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤

**–î–µ–π—Å—Ç–≤–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞:**
- –ü–∞—Ä—Ç–Ω—ë—Ä –º–æ–∂–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ —Å–≤–æ–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑:
  - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–∞—Ä—Ç–Ω—ë—Ä–∞
  - –ú–µ–Ω—é –±–æ—Ç–∞ "–ú–æ–∏ –∫–ª–∏–µ–Ω—Ç—ã" (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
- –ö–ª–∏–µ–Ω—Ç—ã –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ –ø–∞—Ä—Ç–Ω—ë—Ä—É —á–µ—Ä–µ–∑ –ø–æ–ª–µ `partner_id` –≤ —Ç–∞–±–ª–∏—Ü–µ `users`
- –ú–æ–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ:
  - –î–∞—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
  - –°—Ç–∞—Ç—É—Å—É (–∞–∫—Ç–∏–≤–Ω—ã–µ/–Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ)
  - –ë–∞–ª–∞–Ω—Å—É

### –®–∞–≥ 7.2: –ü–æ–∏—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É

**–î–µ–π—Å—Ç–≤–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞:**
- –ü–∞—Ä—Ç–Ω—ë—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–∏—Å–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞
- –í–≤–æ–¥–∏—Ç –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞

**–ö–æ–¥:**
```python
# bot.py, —Å—Ç—Ä–æ–∫–∏ 2910-2948
def handle_find_client(message):
    chat_id = message.chat.id
    USER_STATE[chat_id] = 'awaiting_client_phone_search'
    bot.send_message(chat_id, "üì± –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 79991234567):")

@bot.message_handler(func=lambda message: USER_STATE.get(message.chat.id) == 'awaiting_client_phone_search')
def process_client_phone_search(message):
    phone = message.text.strip().replace('+', '').replace(' ', '').replace('-', '')
    client_data = sm.get_client_by_phone(phone)
    
    if client_data:
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–ª–∏–µ–Ω—Ç–µ
        response = f"‚úÖ **–ö–ª–∏–µ–Ω—Ç –Ω–∞–π–¥–µ–Ω:**\n\n"
        response += f"üë§ –ò–º—è: {name}\n"
        response += f"üì± –¢–µ–ª–µ—Ñ–æ–Ω: {phone}\n"
        response += f"üí∞ –ë–∞–ª–∞–Ω—Å: {balance} –±–∞–ª–ª–æ–≤\n"
        response += f"üìä –°—Ç–∞—Ç—É—Å: {status}\n"
        response += f"üÜî Chat ID: `{client_chat_id}`"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
–ü–∞—Ä—Ç–Ω—ë—Ä –≤–∏–¥–∏—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–ª–∏–µ–Ω—Ç–µ:
- –ò–º—è
- –¢–µ–ª–µ—Ñ–æ–Ω
- –ë–∞–ª–∞–Ω—Å –±–∞–ª–ª–æ–≤
- –°—Ç–∞—Ç—É—Å
- Chat ID

---

## üí∞ –≠—Ç–∞–ø 8: –†–∞–±–æ—Ç–∞ —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ –ø—Ä–∏–≥–ª–∞—à—ë–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

### –®–∞–≥ 8.1: –ö–ª–∏–µ–Ω—Ç —Å–æ–≤–µ—Ä—à–∞–µ—Ç –ø–æ–∫—É–ø–∫—É —É –ø–∞—Ä—Ç–Ω—ë—Ä–∞

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
- –ö–ª–∏–µ–Ω—Ç, –ø—Ä–∏–≥–ª–∞—à—ë–Ω–Ω—ã–π –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º, –¥–µ–ª–∞–µ—Ç –ø–æ–∫—É–ø–∫—É/–ø–æ–ª—É—á–∞–µ—Ç —É—Å–ª—É–≥—É
- –ü–∞—Ä—Ç–Ω—ë—Ä –Ω–∞—á–∏—Å–ª—è–µ—Ç –±–∞–ª–ª—ã –∫–ª–∏–µ–Ω—Ç—É –∑–∞ –ø–æ–∫—É–ø–∫—É

### –®–∞–≥ 8.2: –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤ –∫–ª–∏–µ–Ω—Ç—É

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ü–∞—Ä—Ç–Ω—ë—Ä –≤–≤–æ–¥–∏—Ç Chat ID –∫–ª–∏–µ–Ω—Ç–∞ –∏–ª–∏ —Å–∫–∞–Ω–∏—Ä—É–µ—Ç QR-–∫–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞
2. –í—ã–±–∏—Ä–∞–µ—Ç —Ç–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏: "–ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤"
3. –í–≤–æ–¥–∏—Ç —Å—É–º–º—É –ø–æ–∫—É–ø–∫–∏
4. –ë–∞–ª–ª—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º –ø–∞—Ä—Ç–Ω—ë—Ä–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –±–∞–ª–ª—ã –Ω–∞ —Å–≤–æ–π –±–∞–ª–∞–Ω—Å
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `transactions`
- –í —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è `partner_chat_id`, —á—Ç–æ —Å–≤—è–∑—ã–≤–∞–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—é —Å –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º

### –®–∞–≥ 8.3: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

**–î–æ—Å—Ç—É–ø –ø–∞—Ä—Ç–Ω—ë—Ä–∞:**
- –ü–∞—Ä—Ç–Ω—ë—Ä –º–æ–∂–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–≤–æ–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ:
  - –ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∫–ª–∏–µ–Ω—Ç—É
  - –ü–µ—Ä–∏–æ–¥—É –≤—Ä–µ–º–µ–Ω–∏
  - –¢–∏–ø—É –æ–ø–µ—Ä–∞—Ü–∏–∏ (–Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ/—Å–ø–∏—Å–∞–Ω–∏–µ)
  - –°—É–º–º–µ

---

## üéØ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π: –ü–∞—Ä—Ç–Ω—ë—Ä –ø—Ä–∏–≥–ª–∞—à–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞

**–ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –ü–∞—Ä—Ç–Ω—ë—Ä (chat_id: 123456789) –æ–¥–æ–±—Ä–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–∏—Å—Ç–µ–º–µ
- –ö–ª–∏–µ–Ω—Ç (–Ω–æ–º–µ—Ä: +79991234567) –µ—â—ë –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω

---

**–®–∞–≥ 1:** –ü–∞—Ä—Ç–Ω—ë—Ä –ø–æ–ª—É—á–∞–µ—Ç —Å—Å—ã–ª–∫—É
- –ü–∞—Ä—Ç–Ω—ë—Ä –Ω–∞–∂–∏–º–∞–µ—Ç "üë• –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞"
- –ü–æ–ª—É—á–∞–µ—Ç —Å—Å—ã–ª–∫—É: `https://t.me/mindbeatybot?start=partner_123456789`

**–®–∞–≥ 2:** –ü–∞—Ä—Ç–Ω—ë—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Å—ã–ª–∫—É
- –í—ã–±–∏—Ä–∞–µ—Ç —Å–ø–æ—Å–æ–±: –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —á–µ—Ä–µ–∑ –±–æ—Ç–∞ (Chat ID –∫–ª–∏–µ–Ω—Ç–∞) –∏–ª–∏ –∫–æ–ø–∏—Ä—É–µ—Ç —Å—Å—ã–ª–∫—É
- –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ–º

**–®–∞–≥ 3:** –ö–ª–∏–µ–Ω—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ —Å—Å—ã–ª–∫–µ
- –ö–ª–∏–µ–Ω—Ç –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ —Å—Å—ã–ª–∫—É –≤ Telegram
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –±–æ—Ç `@mindbeatybot`
- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ `/start partner_123456789`

**–®–∞–≥ 4:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- –ë–æ—Ç –∏–∑–≤–ª–µ–∫–∞–µ—Ç `partner_id = 123456789`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
- –°–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ `users`:
  - `chat_id` = Chat ID –∫–ª–∏–µ–Ω—Ç–∞
  - `partner_id` = 123456789
  - `balance` = 100
  - `registered_via` = 'partner_link'

**–®–∞–≥ 5:** –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –±–æ–Ω—É—Å–∞
- –°–æ–∑–¥–∞—ë—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤ —Ç–∞–±–ª–∏—Ü–µ `transactions`:
  - `operation_type` = 'enrollment_bonus'
  - `earned_points` = 100
  - `partner_chat_id` = 123456789

**–®–∞–≥ 6:** –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–ª–∏–µ–Ω—Ç—É
- –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ: "üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –í—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å –ø–æ —Å—Å—ã–ª–∫–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –∏ –ø–æ–ª—É—á–∏–ª–∏ 100 –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö –±–∞–ª–ª–æ–≤!"

**–®–∞–≥ 7:** –ö–ª–∏–µ–Ω—Ç —Å–æ–≤–µ—Ä—à–∞–µ—Ç –ø–æ–∫—É–ø–∫—É
- –ö–ª–∏–µ–Ω—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç –∫ –ø–∞—Ä—Ç–Ω—ë—Ä—É –∏ –¥–µ–ª–∞–µ—Ç –ø–æ–∫—É–ø–∫—É –Ω–∞ 2000 —Ä—É–±–ª–µ–π
- –ü–∞—Ä—Ç–Ω—ë—Ä —Å–∫–∞–Ω–∏—Ä—É–µ—Ç QR-–∫–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞ –∏–ª–∏ –≤–≤–æ–¥–∏—Ç Chat ID
- –ù–∞—á–∏—Å–ª—è–µ—Ç –±–∞–ª–ª—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, 200 –±–∞–ª–ª–æ–≤ = 10% –æ—Ç —Å—É–º–º—ã)
- –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç: 100 (–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ) + 200 (–∑–∞ –ø–æ–∫—É–ø–∫—É) = 300 –±–∞–ª–ª–æ–≤

**–®–∞–≥ 8:** –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ
- –ü–∞—Ä—Ç–Ω—ë—Ä –º–æ–∂–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–ª–∏–µ–Ω—Ç–µ:
  - –ë–∞–ª–∞–Ω—Å: 300 –±–∞–ª–ª–æ–≤
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π: 2
  - –û–±—â–∞—è —Å—É–º–º–∞ –ø–æ–∫—É–ø–æ–∫: 2000 —Ä—É–±–ª–µ–π

---

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î

### –¢–∞–±–ª–∏—Ü–∞ `users`

**–ü–æ–ª—è –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞, –ø—Ä–∏–≥–ª–∞—à—ë–Ω–Ω–æ–≥–æ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º:**
- `chat_id`: ID –∫–ª–∏–µ–Ω—Ç–∞ –≤ Telegram (–∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–π `VIA_PARTNER_{phone}`)
- `phone`: –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å None –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Å—Å—ã–ª–∫–µ)
- `name`: –ò–º—è –∫–ª–∏–µ–Ω—Ç–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å None –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Å—Å—ã–ª–∫–µ)
- `partner_id`: ID –ø–∞—Ä—Ç–Ω—ë—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–≥–ª–∞—Å–∏–ª –∫–ª–∏–µ–Ω—Ç–∞
- `balance`: –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å –±–∞–ª–ª–æ–≤
- `status`: –°—Ç–∞—Ç—É—Å –∫–ª–∏–µ–Ω—Ç–∞ ('active', 'inactive')
- `registered_via`: –°–ø–æ—Å–æ–± —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ ('partner_link', 'partner_invite')
- `reg_date`: –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

### –¢–∞–±–ª–∏—Ü–∞ `transactions`

**–ü–æ–ª—è –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø—Ä–∏–≥–ª–∞—à—ë–Ω–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞:**
- `client_chat_id`: ID –∫–ª–∏–µ–Ω—Ç–∞
- `partner_chat_id`: ID –ø–∞—Ä—Ç–Ω—ë—Ä–∞
- `operation_type`: –¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏ ('enrollment_bonus', 'accrual', 'redemption')
- `earned_points`: –ù–∞—á–∏—Å–ª–µ–Ω–Ω—ã–µ –±–∞–ª–ª—ã
- `spent_points`: –°–ø–∏—Å–∞–Ω—ã–µ –±–∞–ª–ª—ã
- `total_amount`: –°—É–º–º–∞ –ø–æ–∫—É–ø–∫–∏ –≤ —Ä—É–±–ª—è—Ö
- `description`: –û–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `date_time`: –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### 1. –í—Ä–µ–º–µ–Ω–Ω—ã–µ ID –ø—Ä–∏ —Ä—É—á–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

- –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω—ã–π ID: `VIA_PARTNER_{phone}`
- –ö–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç, –ø–µ—Ä–µ–π–¥—è –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ
- –ü—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–π ID –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π `chat_id`

### 2. –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

- –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –ª–∏ –∫–ª–∏–µ–Ω—Ç —É–∂–µ
- –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å –Ω–µ –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–∞–∫ –ø–æ `chat_id`, —Ç–∞–∫ –∏ –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞

### 3. –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –ø–∞—Ä—Ç–Ω—ë—Ä—É

- –ö–ª–∏–µ–Ω—Ç –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è –∫ –ø–∞—Ä—Ç–Ω—ë—Ä—É —á–µ—Ä–µ–∑ –ø–æ–ª–µ `partner_id`
- –í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞ —Å–≤—è–∑–∞–Ω—ã —Å –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º —á–µ—Ä–µ–∑ `partner_chat_id`
- –ü–∞—Ä—Ç–Ω—ë—Ä –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

### 4. –ê–∫—Ç–∏–≤–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å—Å—ã–ª–∫—É

- –î–∞–∂–µ –ø—Ä–∏ —Ä—É—á–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç —á–µ—Ä–µ–∑ —Å—Å—ã–ª–∫—É
- –≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è:
  - –ü–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ—É–Ω–∫—Ü–∏—è–º –±–æ—Ç–∞
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ ID –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π
  - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–ª–∏–µ–Ω—Ç –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
1. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç –ø–µ—Ä–µ—à—ë–ª –ø–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ:
   ```sql
   SELECT chat_id, partner_id, balance, registered_via 
   FROM users 
   WHERE chat_id = 'CLIENT_CHAT_ID';
   ```

2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –±–æ–Ω—É—Å–∞:
   ```sql
   SELECT * FROM transactions 
   WHERE client_chat_id = 'CLIENT_CHAT_ID' 
   AND operation_type = 'enrollment_bonus';
   ```

3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ –±—ã–ª –ª–∏ –±–æ–Ω—É—Å —É–∂–µ –Ω–∞—á–∏—Å–ª–µ–Ω —Ä–∞–Ω–µ–µ

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–∞—Ä—Ç–Ω—ë—Ä –Ω–µ –≤–∏–¥–∏—Ç –∫–ª–∏–µ–Ω—Ç–∞ –≤ —Å–ø–∏—Å–∫–µ

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
1. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –ø–∞—Ä—Ç–Ω—ë—Ä—É:
   ```sql
   SELECT chat_id, partner_id 
   FROM users 
   WHERE partner_id = 'PARTNER_CHAT_ID';
   ```

2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–ª–∏–µ–Ω—Ç–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 'active')

### –ü—Ä–æ–±–ª–µ–º–∞: –í—Ä–µ–º–µ–Ω–Ω—ã–π ID –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
1. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç –ø–µ—Ä–µ—à—ë–ª –ø–æ —Å—Å—ã–ª–∫–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è ID
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç

---

## üìù –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞

### –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å—Å—ã–ª–∫–∏-–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è:

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å—Ç–∞—Ç—É—Å –ø–∞—Ä—Ç–Ω—ë—Ä–∞ `Approved`
- [ ] –ü–æ–ª—É—á–∏—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É —á–µ—Ä–µ–∑ –º–µ–Ω—é "üë• –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞"
- [ ] –í—ã–±—Ä–∞—Ç—å —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –æ—Ç–ø—Ä–∞–≤–∫–∏ (–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ/–æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ –±–æ—Ç–∞/QR-–∫–æ–¥)

### –ü—Ä–∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞:

- [ ] –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –∫–ª–∏–µ–Ω—Ç—É –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º
- [ ] –û–±—ä—è—Å–Ω–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É, —á—Ç–æ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ –≤ Telegram
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç –ø–µ—Ä–µ—à—ë–ª –ø–æ —Å—Å—ã–ª–∫–µ –∏ –ø–æ–ª—É—á–∏–ª –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ –±–∞–ª–ª—ã

### –ü—Ä–∏ —Ä—É—á–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:

- [ ] –í–≤–µ—Å—Ç–∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∏–ª –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å
- [ ] –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª –∞–∫–∫–∞—É–Ω—Ç

### –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞:

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ –∫–ª–∏–µ–Ω—Ç–æ–≤
- [ ] –û–±—ä—è—Å–Ω–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É, –∫–∞–∫ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å –±–∞–ª–ª—ã
- [ ] –û–±—ä—è—Å–Ω–∏—Ç—å, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∞–ª–ª—ã –¥–ª—è –æ–ø–ª–∞—Ç—ã

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–∞—Ä—Ç–Ω—ë—Ä–∞–º

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ QR-–∫–æ–¥** –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ –æ—Ñ–ª–∞–π–Ω–µ
2. **–†–∞–∑–º–µ—Å—Ç–∏—Ç–µ —Å—Å—ã–ª–∫—É** –Ω–∞ —Å–∞–π—Ç–µ, –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö –∏ –Ω–∞ –≤–∏–∑–∏—Ç–∫–∞—Ö
3. **–ù–∞–ø–æ–º–∏–Ω–∞–π—Ç–µ –∫–ª–∏–µ–Ω—Ç–∞–º** –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –ø–æ —Å—Å—ã–ª–∫–µ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
4. **–û–±—ä—è—Å–Ω—è–π—Ç–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞** –ø—Ä–æ–≥—Ä–∞–º–º—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞–º
5. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** –ø—Ä–∏–≥–ª–∞—à—ë–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
6. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É** –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π


