"""
A/B –≤–∞—Ä–∏–∞–Ω—Ç—ã —à–∞–±–ª–æ–Ω–æ–≤ –¥–ª—è Instagram Outreach
–°–æ–¥–µ—Ä–∂–∏—Ç —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —à–∞–±–ª–æ–Ω–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
"""

AB_TEMPLATE_VARIANTS = {
    'first_contact': {
        'A': {
            'name': '–ö–æ—Ä–æ—Ç–∫–æ–µ (—Ç–µ–∫—É—â–µ–µ)',
            'template': """–ü—Ä–∏–≤–µ—Ç {name}! üëã

–í–∏–¥–µ–ª —Ç–≤–æ–∏ —Ä–∞–±–æ—Ç—ã –≤ {district} ‚Äî —Å—É–ø–µ—Ä! üî•

–ú—ã –∑–∞–ø—É—Å–∫–∞–µ–º —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É –¥–ª—è –±—å—é—Ç–∏-–º–∞—Å—Ç–µ—Ä–æ–≤. 
–ù—É–∂–µ–Ω –ø–∞—Ä—Ç–Ω–µ—Ä –≤ {district} –¥–ª—è {business_type}.

–ß—Ç–æ –¥–∞–µ—Ç:
‚úÖ –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ä–∞–π–æ–Ω
‚úÖ –û–±–º–µ–Ω –∫–ª–∏–µ–Ω—Ç–∞–º–∏
‚úÖ $29/–º–µ—Å—è—Ü (—Ä–∞–Ω–Ω–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ)

–û–±—Å—É–¥–∏–º? üí¨""",
            'variables': ['name', 'district', 'business_type'],
            'length': 'short'
        },
        'B': {
            'name': '–ü–æ–¥—Ä–æ–±–Ω–æ–µ',
            'template': """–ü—Ä–∏–≤–µ—Ç {name}! üëã

–Ø –∏–∑ {company_name}. –ú—ã —Å–æ–∑–¥–∞–µ–º –∫—Ä–æ—Å—Å–º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—É—é 
—Å–∏—Å—Ç–µ–º—É –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –±—å—é—Ç–∏-–º–∞—Å—Ç–µ—Ä–æ–≤ –≤ –ù—å—é-–ô–æ—Ä–∫–µ.

–í –∫–∞–∂–¥–æ–º —Ä–∞–π–æ–Ω–µ –º—ã –±–µ—Ä–µ–º —Ç–æ–ª—å–∫–æ –û–î–ù–û–ì–û –ø–∞—Ä—Ç–Ω–µ—Ä–∞ 
–Ω–∞ –∫–∞–∂–¥—É—é —Å—Ñ–µ—Ä—É —É—Å–ª—É–≥.

–î–ª—è {district} –Ω–∞–º –Ω—É–∂–µ–Ω –º–∞—Å—Ç–µ—Ä –≤ {business_type}.

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
‚úÖ –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –ø—Ä–∞–≤–∞ ‚Äî –Ω–∏–∫—Ç–æ –¥—Ä—É–≥–æ–π –Ω–µ —Å–º–æ–∂–µ—Ç 
   –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —ç—Ç—É —É—Å–ª—É–≥—É –≤ –≤–∞—à–µ–º —Ä–∞–π–æ–Ω–µ
‚úÖ –û–±–º–µ–Ω –∫–ª–∏–µ–Ω—Ç–∞–º–∏ ‚Äî –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –æ—Ç 
   –¥—Ä—É–≥–∏—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ (–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç)
‚úÖ –†–∞–Ω–Ω–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ ‚Äî $29/–º–µ—Å—è—Ü –≤–º–µ—Å—Ç–æ $99
‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ?
{link}

–ò–ª–∏ –º–æ–∂–µ–º –æ–±—Å—É–¥–∏—Ç—å –≤ –ª–∏—á–∫–µ! üí¨""",
            'variables': ['name', 'company_name', 'district', 'business_type', 'link'],
            'length': 'long'
        },
        'C': {
            'name': '–° –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ –≤—ã–≥–æ–¥—É',
            'template': """–ü—Ä–∏–≤–µ—Ç {name}! üëã

–¢—ã –¥–µ–ª–∞–µ—à—å –æ—Ç–ª–∏—á–Ω—ã–µ {business_type} –≤ {district}! 

–•–æ—á–µ—à—å –ø–æ–ª—É—á–∞—Ç—å –±–æ–ª—å—à–µ –∫–ª–∏–µ–Ω—Ç–æ–≤? 

–ú—ã –∏—â–µ–º –û–î–ù–û–ì–û –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –≤ {district} –¥–ª—è –Ω–∞—à–µ–π 
—Å–∏—Å—Ç–µ–º—ã –æ–±–º–µ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞–º–∏.

üí∞ –ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç:
‚Ä¢ –ù–æ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –æ—Ç –¥—Ä—É–≥–∏—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
‚Ä¢ –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –ø—Ä–∞–≤–∞ –≤ —Ä–∞–π–æ–Ω–µ
‚Ä¢ –í—Å–µ–≥–æ $29/–º–µ—Å—è—Ü (–≤–º–µ—Å—Ç–æ $99)

–ü—Ä–∏–º–µ—Ä: –Ω–∞—à–∏ –ø–∞—Ä—Ç–Ω–µ—Ä—ã –ø–æ–ª—É—á–∞—é—Ç –≤ —Å—Ä–µ–¥–Ω–µ–º 5-10 
–Ω–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ –º–µ—Å—è—Ü –æ—Ç —Å–µ—Ç–∏.

–ì–æ—Ç–æ–≤ –æ–±—Å—É–¥–∏—Ç—å? üí¨""",
            'variables': ['name', 'district', 'business_type'],
            'length': 'medium'
        }
    },
    
    'follow_up_1': {
        'A': {
            'name': '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π',
            'template': """–ü—Ä–∏–≤–µ—Ç {name}! 

–ü–∏—Å–∞–ª –ø–∞—Ä—É –¥–Ω–µ–π –Ω–∞–∑–∞–¥ –ø—Ä–æ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–µ –ø–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–æ 
–≤ —Å–∏—Å—Ç–µ–º–µ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –±—å—é—Ç–∏-–º–∞—Å—Ç–µ—Ä–æ–≤.

–≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ ‚Äî –º—ã –¥–∞–µ–º —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ 
–ø—Ä–∞–≤–∞ –Ω–∞ —Ä–∞–π–æ–Ω + –æ–±–º–µ–Ω –∫–ª–∏–µ–Ω—Ç–∞–º–∏.

–ú–æ–∂–µ—à—å –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ—Ç–∞–ª–∏:
{link}

–ò–ª–∏ –Ω–∞–ø–∏—à–∏, –µ—Å–ª–∏ –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã! üëÜ""",
            'variables': ['name', 'link'],
            'length': 'medium'
        },
        'B': {
            'name': '–° –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º –æ –≤—ã–≥–æ–¥–µ',
            'template': """–ü—Ä–∏–≤–µ—Ç {name}!

–ü–∏—Å–∞–ª –ø—Ä–æ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–µ –ø–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–æ –¥–ª—è {business_type} 
–≤ {district}.

–ù–∞–ø–æ–º–∏–Ω–∞—é: $29/–º–µ—Å—è—Ü –≤–º–µ—Å—Ç–æ $99 + –Ω–æ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã 
–æ—Ç —Å–µ—Ç–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤.

–£–∂–µ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –≤ {district} ‚Äî 
–º–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å –æ–±–º–µ–Ω –∫–ª–∏–µ–Ω—Ç–∞–º–∏ —Å—Ä–∞–∑—É.

–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ –æ–±—Å—É–¥–∏—Ç—å? {link}""",
            'variables': ['name', 'business_type', 'district', 'link'],
            'length': 'medium'
        }
    }
}

# –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ —à–∞–±–ª–æ–Ω–∞
DEFAULT_VARIANTS = {
    'first_contact': 'A',
    'follow_up_1': 'A',
    'follow_up_2': 'A'
}


def get_ab_variant(template_group: str, variant: str) -> dict:
    """
    –ü–æ–ª—É—á–∞–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç —à–∞–±–ª–æ–Ω–∞ –¥–ª—è A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    
    Args:
        template_group: –ì—Ä—É–ø–ø–∞ —à–∞–±–ª–æ–Ω–æ–≤ ('first_contact', 'follow_up_1', etc.)
        variant: –í–∞—Ä–∏–∞–Ω—Ç ('A', 'B', 'C')
    
    Returns:
        dict: –î–∞–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∏–ª–∏ None
    """
    variants = AB_TEMPLATE_VARIANTS.get(template_group, {})
    return variants.get(variant)


def get_active_variants(template_group: str) -> dict:
    """
    –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–ª—è –≥—Ä—É–ø–ø—ã —à–∞–±–ª–æ–Ω–æ–≤
    
    Args:
        template_group: –ì—Ä—É–ø–ø–∞ —à–∞–±–ª–æ–Ω–æ–≤
    
    Returns:
        dict: –°–ª–æ–≤–∞—Ä—å –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ { 'A': {...}, 'B': {...} }
    """
    return AB_TEMPLATE_VARIANTS.get(template_group, {})


def get_default_variant(template_group: str) -> str:
    """
    –ü–æ–ª—É—á–∞–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –≥—Ä—É–ø–ø—ã —à–∞–±–ª–æ–Ω–æ–≤
    
    Args:
        template_group: –ì—Ä—É–ø–ø–∞ —à–∞–±–ª–æ–Ω–æ–≤
    
    Returns:
        str: –ö–æ–¥ –≤–∞—Ä–∏–∞–Ω—Ç–∞ ('A', 'B', 'C')
    """
    return DEFAULT_VARIANTS.get(template_group, 'A')

