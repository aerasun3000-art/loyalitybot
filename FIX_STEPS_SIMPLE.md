# üîß –ü–æ—à–∞–≥–æ–≤–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)

## ‚ö†Ô∏è –û –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–∏ Supabase

–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ "Potential issue detected" - —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Supabase. –°–∫—Ä–∏–ø—Ç –±–µ–∑–æ–ø–∞—Å–µ–Ω, –Ω–æ –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–æ —á–∞—Å—Ç—è–º.

## üìã –í–∞—Ä–∏–∞–Ω—Ç 1: –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤–µ—Å—å —Å–∫—Ä–∏–ø—Ç —Å—Ä–∞–∑—É

–ï—Å–ª–∏ –≤—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ä–∞–∑—É:
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `fix_partner_applications.sql`
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å —Å–∫—Ä–∏–ø—Ç
3. –í—Å—Ç–∞–≤—å—Ç–µ –≤ SQL Editor
4. **–ù–∞–∂–º–∏—Ç–µ "Ignore" –Ω–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–∏** (—Å–∫—Ä–∏–ø—Ç –±–µ–∑–æ–ø–∞—Å–µ–Ω)
5. –í—ã–ø–æ–ª–Ω–∏—Ç–µ

## üìã –í–∞—Ä–∏–∞–Ω—Ç 2: –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ —á–∞—Å—Ç—è–º (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∞–π–ª `fix_partner_applications_simple.sql` –∏ –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ –ø–æ –æ–¥–Ω–æ–º—É –±–ª–æ–∫—É:

### –®–∞–≥ 1: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø–µ—á–∞—Ç–∫–∏
```sql
ALTER TABLE partner_applications 
RENAME COLUMN company_nam TO company_name;
```
**‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ:** –í—ã–ø–æ–ª–Ω—è–π—Ç–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ–ª–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `company_nam`!

### –®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ created_at
```sql
ALTER TABLE partner_applications 
ADD COLUMN IF NOT EXISTS created_at TIMESTAMP DEFAULT NOW();
```
‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `IF NOT EXISTS`

### –®–∞–≥ 3: –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```sql
ALTER TABLE partner_applications 
ALTER COLUMN city SET DEFAULT '';

ALTER TABLE partner_applications 
ALTER COLUMN district SET DEFAULT '';
```
‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ - —Ç–æ–ª—å–∫–æ –º–µ–Ω—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### –®–∞–≥ 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ NULL –∑–Ω–∞—á–µ–Ω–∏–π
```sql
UPDATE partner_applications 
SET city = '' WHERE city IS NULL;

UPDATE partner_applications 
SET district = '' WHERE district IS NULL;

UPDATE partner_applications 
SET created_at = NOW() WHERE created_at IS NULL;
```
‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ - –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ NULL –∑–Ω–∞—á–µ–Ω–∏—è

### –®–∞–≥ 5: –ò–Ω–¥–µ–∫—Å –Ω–∞ chat_id
```sql
CREATE UNIQUE INDEX IF NOT EXISTS idx_partner_applications_chat_id 
ON partner_applications(chat_id) 
WHERE chat_id IS NOT NULL AND chat_id != '';
```
‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `IF NOT EXISTS`

### –®–∞–≥ 6-8: RLS Policies
–í—ã–ø–æ–ª–Ω–∏—Ç–µ –±–ª–æ–∫–∏ 6-8 –∏–∑ —Ñ–∞–π–ª–∞ `fix_partner_applications_simple.sql`
‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ - –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø

## ‚úÖ –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Table Editor:
- ‚úÖ –ü–æ–ª–µ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `company_name` (–Ω–µ `company_nam`)
- ‚úÖ –ï—Å—Ç—å –ø–æ–ª–µ `created_at`
- ‚úÖ –ü–æ–ª—è `city` –∏ `district` –∏–º–µ—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

## üß™ –¢–µ—Å—Ç

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ - –æ—à–∏–±–∫–∞ –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å!









