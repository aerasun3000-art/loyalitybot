# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ Cloudflare

**–î–∞—Ç–∞:** 2026-01-18  
**–ü—Ä–æ–±–ª–µ–º—ã:** 
1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ /start —Å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–æ–π
2. –û—à–∏–±–∫–∞ 404 –æ—Ç Netlify –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª–µ–Ω FRONTEND_URL

**–ë—ã–ª–æ:** –°—Ç–∞—Ä—ã–π Netlify URL (–≤–æ–∑–º–æ–∂–Ω–æ)  
**–°—Ç–∞–ª–æ:** `https://loyalitybot-frontend.pages.dev`

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
cd cloudflare/workers/client-webhook
echo "https://loyalitybot-frontend.pages.dev" | wrangler secret put FRONTEND_URL --env=""
```

---

## üîç –ß—Ç–æ –º–æ–≥–ª–æ "—Å–ª–µ—Ç–µ—Ç—å" –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

### 1. ‚ùå Webhook –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω –Ω–∞ Cloudflare

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ webhook –≤—Å–µ –µ—â–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å—Ç–∞—Ä—ã–π —Å–µ—Ä–≤–µ—Ä (Fly.io), –±–æ—Ç –±—É–¥–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å —Å—Ç–∞—Ä—ã–º –∫–æ–¥–æ–º.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/mybots`
3. –í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –±–æ—Ç–∞
4. –í—ã–±–µ—Ä–∏—Ç–µ "API Token"
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–∞–∫–æ–π webhook —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
cd cloudflare/workers/client-webhook
node scripts/setup_webhooks.js
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç:
```bash
cd scripts
python3 setup_webhooks.py
```

---

### 2. ‚ùå FRONTEND_URL —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å—Ç–∞—Ä—ã–π Netlify

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–Ω–æ–ø–∫–∞ "–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä—ã–π Netlify URL, –∫–æ—Ç–æ—Ä—ã–π –±–æ–ª—å—à–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –û–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ `https://loyalitybot-frontend.pages.dev`

---

### 3. ‚ùå –°—Ç–∞—Ä—ã–π –±–æ—Ç –≤—Å–µ –µ—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ —Å—Ç–∞—Ä—ã–π –±–æ—Ç –Ω–∞ Fly.io –≤—Å–µ –µ—â–µ –∑–∞–ø—É—â–µ–Ω, –æ–Ω –º–æ–∂–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è.

**–†–µ—à–µ–Ω–∏–µ:** 
- –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –±–æ—Ç—ã –Ω–∞ Fly.io
- –ò–ª–∏ —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Fly.io

---

### 4. ‚ùå –ö—ç—à Telegram

**–ü—Ä–æ–±–ª–µ–º–∞:** Telegram –º–æ–∂–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.

**–†–µ—à–µ–Ω–∏–µ:**
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Telegram
- –ò–ª–∏ –ø–æ–¥–æ–∂–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—ç—à–∞

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –±–æ—Ç:

- [ ] Webhook —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ Cloudflare Worker URL
- [ ] FRONTEND_URL = `https://loyalitybot-frontend.pages.dev`
- [ ] –ü—Ä–∏ `/start` –ø—Ä–∏—Ö–æ–¥–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- [ ] –ö–Ω–æ–ø–∫–∞ "–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç Cloudflare Pages (–Ω–µ Netlify)
- [ ] –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç (`/start partner_123`)

### –ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–π –±–æ—Ç:

- [ ] Webhook —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ Cloudflare Worker URL
- [ ] FRONTEND_URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] BOT_USERNAME = `mindbeatybot`
- [ ] –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞" –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É

### –ê–¥–º–∏–Ω—Å–∫–∏–π –±–æ—Ç:

- [ ] Webhook —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ Cloudflare Worker URL
- [ ] –ü—Ä–∏ `/start` –ø—Ä–∏—Ö–æ–¥–∏—Ç –∞–¥–º–∏–Ω—Å–∫–æ–µ –º–µ–Ω—é

---

## üîß –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –±–æ—Ç–∞:

```bash
# –ß–µ—Ä–µ–∑ Telegram Bot API (–Ω—É–∂–µ–Ω TOKEN_CLIENT)
curl "https://api.telegram.org/bot<TOKEN_CLIENT>/getWebhookInfo"
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
```json
{
  "ok": true,
  "result": {
    "url": "https://loyalitybot-client-webhook.aerasun3000.workers.dev",
    "has_custom_certificate": false,
    "pending_update_count": 0
  }
}
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã:

```bash
cd cloudflare/workers/client-webhook
wrangler secret list --env=""
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å:
- ‚úÖ TOKEN_CLIENT
- ‚úÖ SUPABASE_URL
- ‚úÖ SUPABASE_KEY
- ‚úÖ FRONTEND_URL = `https://loyalitybot-frontend.pages.dev`
- ‚úÖ WELCOME_BONUS_AMOUNT

---

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –°–æ–æ–±—â–µ–Ω–∏–µ "OWNED BY @MISHADOX"

–≠—Ç–æ **–ù–ï** –∏–∑ –Ω–∞—à–µ–≥–æ –∫–æ–¥–∞! –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
1. –õ–∏–±–æ webhook –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω –Ω–∞ Cloudflare
2. –õ–∏–±–æ —Å—Ç–∞—Ä—ã–π –±–æ—Ç –≤—Å–µ –µ—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≥–¥–µ-—Ç–æ
3. –õ–∏–±–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω –±–æ—Ç–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook —á–µ—Ä–µ–∑ @BotFather
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω
3. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –±–æ—Ç—ã –Ω–∞ Fly.io (–µ—Å–ª–∏ –æ–Ω–∏ –µ—â–µ —Ä–∞–±–æ—Ç–∞—é—Ç)

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω FRONTEND_URL –Ω–∞ Cloudflare Pages
2. ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –±–æ—Ç–∞
3. ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —Å—Ç–∞—Ä—ã–π –±–æ—Ç –Ω–∞ Fly.io
4. ‚ö†Ô∏è –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏

---

**–î–∞—Ç–∞:** 2026-01-18
